import{bL as requests,b$ as commonjsGlobal,c0 as getDefaultExportFromCjs,ap as defineStore}from"./index-36d3cba6.js";function getQcloudTmpkeys(o,e){return requests.post("/api/getQcloudTmpkeys",o,e)}/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),t.push.apply(t,r)}return t}function _objectSpread2(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(o,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(t,r))})}return o}function _typeof(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(o)}function _defineProperty(o,e,t){return e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function _extends(){return _extends=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(o[r]=t[r])}return o},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(o,e){if(o==null)return{};var t={},r=Object.keys(o),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(t[a]=o[a]);return t}function _objectWithoutProperties(o,e){if(o==null)return{};var t=_objectWithoutPropertiesLoose(o,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(o,r)&&(t[r]=o[r])}return t}var version="1.15.0";function userAgent(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(o,e,t){o.addEventListener(e,t,!IE11OrLess&&captureMode)}function off(o,e,t){o.removeEventListener(e,t,!IE11OrLess&&captureMode)}function matches(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function closest(o,e,t,r){if(o){t=t||document;do{if(e!=null&&(e[0]===">"?o.parentNode===t&&matches(o,e):matches(o,e))||r&&o===t)return o;if(o===t)break}while(o=getParentOrHost(o))}return null}var R_SPACE=/\s+/g;function toggleClass(o,e,t){if(o&&e)if(o.classList)o.classList[t?"add":"remove"](e);else{var r=(" "+o.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");o.className=(r+(t?" "+e:"")).replace(R_SPACE," ")}}function css(o,e,t){var r=o&&o.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(t=o.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function matrix(o,e){var t="";if(typeof o=="string")t=o;else do{var r=css(o,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(o=o.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function find(o,e,t){if(o){var r=o.getElementsByTagName(e),a=0,i=r.length;if(t)for(;a<i;a++)t(r[a],a);return r}return[]}function getWindowScrollingElement(){var o=document.scrollingElement;return o||document.documentElement}function getRect(o,e,t,r,a){if(!(!o.getBoundingClientRect&&o!==window)){var i,h,x,_,T,k,D;if(o!==window&&o.parentNode&&o!==getWindowScrollingElement()?(i=o.getBoundingClientRect(),h=i.top,x=i.left,_=i.bottom,T=i.right,k=i.height,D=i.width):(h=0,x=0,_=window.innerHeight,T=window.innerWidth,k=window.innerHeight,D=window.innerWidth),(e||t)&&o!==window&&(a=a||o.parentNode,!IE11OrLess))do if(a&&a.getBoundingClientRect&&(css(a,"transform")!=="none"||t&&css(a,"position")!=="static")){var F=a.getBoundingClientRect();h-=F.top+parseInt(css(a,"border-top-width")),x-=F.left+parseInt(css(a,"border-left-width")),_=h+i.height,T=x+i.width;break}while(a=a.parentNode);if(r&&o!==window){var j=matrix(a||o),P=j&&j.a,N=j&&j.d;j&&(h/=N,x/=P,D/=P,k/=N,_=h+k,T=x+D)}return{top:h,left:x,bottom:_,right:T,width:D,height:k}}}function isScrolledPast(o,e,t){for(var r=getParentAutoScrollElement(o,!0),a=getRect(o)[e];r;){var i=getRect(r)[t],h=void 0;if(t==="top"||t==="left"?h=a>=i:h=a<=i,!h)return r;if(r===getWindowScrollingElement())break;r=getParentAutoScrollElement(r,!1)}return!1}function getChild(o,e,t,r){for(var a=0,i=0,h=o.children;i<h.length;){if(h[i].style.display!=="none"&&h[i]!==Sortable.ghost&&(r||h[i]!==Sortable.dragged)&&closest(h[i],t.draggable,o,!1)){if(a===e)return h[i];a++}i++}return null}function lastChild(o,e){for(var t=o.lastElementChild;t&&(t===Sortable.ghost||css(t,"display")==="none"||e&&!matches(t,e));)t=t.previousElementSibling;return t||null}function index(o,e){var t=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==Sortable.clone&&(!e||matches(o,e))&&t++;return t}function getRelativeScrollOffset(o){var e=0,t=0,r=getWindowScrollingElement();if(o)do{var a=matrix(o),i=a.a,h=a.d;e+=o.scrollLeft*i,t+=o.scrollTop*h}while(o!==r&&(o=o.parentNode));return[e,t]}function indexOfObject(o,e){for(var t in o)if(o.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===o[t][r])return Number(t)}return-1}function getParentAutoScrollElement(o,e){if(!o||!o.getBoundingClientRect)return getWindowScrollingElement();var t=o,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=css(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return getWindowScrollingElement();if(r||e)return t;r=!0}}while(t=t.parentNode);return getWindowScrollingElement()}function extend(o,e){if(o&&e)for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);return o}function isRectEqual(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var _throttleTimeout;function throttle(o,e){return function(){if(!_throttleTimeout){var t=arguments,r=this;t.length===1?o.call(r,t[0]):o.apply(r,t),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(o,e,t){o.scrollLeft+=e,o.scrollTop+=t}function clone(o){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):t?t(o).clone(!0)[0]:o.cloneNode(!0)}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(a){if(!(css(a,"display")==="none"||a===Sortable.ghost)){o.push({target:a,rect:getRect(a)});var i=_objectSpread2({},o[o.length-1].rect);if(a.thisAnimationDuration){var h=matrix(a,!0);h&&(i.top-=h.f,i.left-=h.e)}a.fromRect=i}})}},addAnimationState:function(r){o.push(r)},removeAnimationState:function(r){o.splice(indexOfObject(o,{target:r}),1)},animateAll:function(r){var a=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var i=!1,h=0;o.forEach(function(x){var _=0,T=x.target,k=T.fromRect,D=getRect(T),F=T.prevFromRect,j=T.prevToRect,P=x.rect,N=matrix(T,!0);N&&(D.top-=N.f,D.left-=N.e),T.toRect=D,T.thisAnimationDuration&&isRectEqual(F,D)&&!isRectEqual(k,D)&&(P.top-D.top)/(P.left-D.left)===(k.top-D.top)/(k.left-D.left)&&(_=calculateRealTime(P,F,j,a.options)),isRectEqual(D,k)||(T.prevFromRect=k,T.prevToRect=D,_||(_=a.options.animation),a.animate(T,P,D,_)),_&&(i=!0,h=Math.max(h,_),clearTimeout(T.animationResetTimer),T.animationResetTimer=setTimeout(function(){T.animationTime=0,T.prevFromRect=null,T.fromRect=null,T.prevToRect=null,T.thisAnimationDuration=null},_),T.thisAnimationDuration=_)}),clearTimeout(e),i?e=setTimeout(function(){typeof r=="function"&&r()},h):typeof r=="function"&&r(),o=[]},animate:function(r,a,i,h){if(h){css(r,"transition",""),css(r,"transform","");var x=matrix(this.el),_=x&&x.a,T=x&&x.d,k=(a.left-i.left)/(_||1),D=(a.top-i.top)/(T||1);r.animatingX=!!k,r.animatingY=!!D,css(r,"transform","translate3d("+k+"px,"+D+"px,0)"),this.forRepaintDummy=repaint(r),css(r,"transition","transform "+h+"ms"+(this.options.easing?" "+this.options.easing:"")),css(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){css(r,"transition",""),css(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},h)}}}}function repaint(o){return o.offsetWidth}function calculateRealTime(o,e,t,r){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,t,r){var a=this;this.eventCanceled=!1,r.cancel=function(){a.eventCanceled=!0};var i=e+"Global";plugins.forEach(function(h){t[h.pluginName]&&(t[h.pluginName][i]&&t[h.pluginName][i](_objectSpread2({sortable:t},r)),t.options[h.pluginName]&&t[h.pluginName][e]&&t[h.pluginName][e](_objectSpread2({sortable:t},r)))})},initializePlugins:function(e,t,r,a){plugins.forEach(function(x){var _=x.pluginName;if(!(!e.options[_]&&!x.initializeByDefault)){var T=new x(e,t,e.options);T.sortable=e,T.options=e.options,e[_]=T,_extends(r,T.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var h=this.modifyOption(e,i,e.options[i]);typeof h<"u"&&(e.options[i]=h)}},getEventProperties:function(e,t){var r={};return plugins.forEach(function(a){typeof a.eventProperties=="function"&&_extends(r,a.eventProperties.call(t[a.pluginName],e))}),r},modifyOption:function(e,t,r){var a;return plugins.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[t]=="function"&&(a=i.optionListeners[t].call(e[i.pluginName],r))}),a}};function dispatchEvent(o){var e=o.sortable,t=o.rootEl,r=o.name,a=o.targetEl,i=o.cloneEl,h=o.toEl,x=o.fromEl,_=o.oldIndex,T=o.newIndex,k=o.oldDraggableIndex,D=o.newDraggableIndex,F=o.originalEvent,j=o.putSortable,P=o.extraEventProperties;if(e=e||t&&t[expando],!!e){var N,J=e.options,Q="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?N=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(N=document.createEvent("Event"),N.initEvent(r,!0,!0)),N.to=h||t,N.from=x||t,N.item=a||t,N.clone=i,N.oldIndex=_,N.newIndex=T,N.oldDraggableIndex=k,N.newDraggableIndex=D,N.originalEvent=F,N.pullMode=j?j.lastPutMode:void 0;var se=_objectSpread2(_objectSpread2({},P),PluginManager.getEventProperties(r,e));for(var B in se)N[B]=se[B];t&&t.dispatchEvent(N),J[Q]&&J[Q].call(e,N)}}var _excluded=["evt"],pluginEvent=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=r.evt,i=_objectWithoutProperties(r,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:a,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(x){_dispatchEvent({sortable:t,name:x,originalEvent:a})}},i))};function _dispatchEvent(o){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},o))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),_detectDirection=function(e,t){var r=css(e),a=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),i=getChild(e,0,t),h=getChild(e,1,t),x=i&&css(i),_=h&&css(h),T=x&&parseInt(x.marginLeft)+parseInt(x.marginRight)+getRect(i).width,k=_&&parseInt(_.marginLeft)+parseInt(_.marginRight)+getRect(h).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&x.float&&x.float!=="none"){var D=x.float==="left"?"left":"right";return h&&(_.clear==="both"||_.clear===D)?"vertical":"horizontal"}return i&&(x.display==="block"||x.display==="flex"||x.display==="table"||x.display==="grid"||T>=a&&r[CSSFloatProperty]==="none"||h&&r[CSSFloatProperty]==="none"&&T+k>a)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,r){var a=r?e.left:e.top,i=r?e.right:e.bottom,h=r?e.width:e.height,x=r?t.left:t.top,_=r?t.right:t.bottom,T=r?t.width:t.height;return a===x||i===_||a+h/2===x+T/2},_detectNearestEmptySortable=function(e,t){var r;return sortables.some(function(a){var i=a[expando].options.emptyInsertThreshold;if(!(!i||lastChild(a))){var h=getRect(a),x=e>=h.left-i&&e<=h.right+i,_=t>=h.top-i&&t<=h.bottom+i;if(x&&_)return r=a}}),r},_prepareGroup=function(e){function t(i,h){return function(x,_,T,k){var D=x.options.group.name&&_.options.group.name&&x.options.group.name===_.options.group.name;if(i==null&&(h||D))return!0;if(i==null||i===!1)return!1;if(h&&i==="clone")return i;if(typeof i=="function")return t(i(x,_,T,k),h)(x,_,T,k);var F=(h?x:_).options.group.name;return i===!0||typeof i=="string"&&i===F||i.join&&i.indexOf(F)>-1}}var r={},a=e.group;(!a||_typeof(a)!="object")&&(a={name:a}),r.name=a.name,r.checkPull=t(a.pull,!0),r.checkPut=t(a.put),r.revertClone=a.revertClone,e.group=r},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(o){if(ignoreNextClick)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[expando]._onDragOver(r)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=_extends({},e),o[expando]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(h,x){h.setData("Text",x.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,o,t);for(var r in t)!(r in e)&&(e[r]=t[r]);_prepareGroup(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(o,"pointerdown",this._onTapStart):(on(o,"mousedown",this._onTapStart),on(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(o,"dragover",this),on(o,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,a=this.options,i=a.preventOnFilter,h=e.type,x=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,_=(x||e).target,T=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||_,k=a.filter;if(_saveInputCheckedState(r),!dragEl&&!(/mousedown|pointerdown/.test(h)&&e.button!==0||a.disabled)&&!T.isContentEditable&&!(!this.nativeDraggable&&Safari&&_&&_.tagName.toUpperCase()==="SELECT")&&(_=closest(_,a.draggable,r,!1),!(_&&_.animated)&&lastDownEl!==_)){if(oldIndex=index(_),oldDraggableIndex=index(_,a.draggable),typeof k=="function"){if(k.call(this,e,_,this)){_dispatchEvent({sortable:t,rootEl:T,name:"filter",targetEl:_,toEl:r,fromEl:r}),pluginEvent("filter",t,{evt:e}),i&&e.cancelable&&e.preventDefault();return}}else if(k&&(k=k.split(",").some(function(D){if(D=closest(T,D.trim(),r,!1),D)return _dispatchEvent({sortable:t,rootEl:D,name:"filter",targetEl:_,fromEl:r,toEl:r}),pluginEvent("filter",t,{evt:e}),!0}),k)){i&&e.cancelable&&e.preventDefault();return}a.handle&&!closest(T,a.handle,r,!1)||this._prepareDragStart(e,x,_)}}},_prepareDragStart:function(e,t,r){var a=this,i=a.el,h=a.options,x=i.ownerDocument,_;if(r&&!dragEl&&r.parentNode===i){var T=getRect(r);if(rootEl=i,dragEl=r,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=r,activeGroup=h.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-T.left,tapDistanceTop=tapEvt.clientY-T.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",_=function(){if(pluginEvent("delayEnded",a,{evt:e}),Sortable.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!FireFox&&a.nativeDraggable&&(dragEl.draggable=!0),a._triggerDragStart(e,t),_dispatchEvent({sortable:a,name:"choose",originalEvent:e}),toggleClass(dragEl,h.chosenClass,!0)},h.ignore.split(",").forEach(function(k){find(dragEl,k.trim(),_disableDraggable)}),on(x,"dragover",nearestEmptyInsertDetectEvent),on(x,"mousemove",nearestEmptyInsertDetectEvent),on(x,"touchmove",nearestEmptyInsertDetectEvent),on(x,"mouseup",a._onDrop),on(x,"touchend",a._onDrop),on(x,"touchcancel",a._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),h.delay&&(!h.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(x,"mouseup",a._disableDelayedDrag),on(x,"touchend",a._disableDelayedDrag),on(x,"touchcancel",a._disableDelayedDrag),on(x,"mousemove",a._delayedDragTouchMoveHandler),on(x,"touchmove",a._delayedDragTouchMoveHandler),h.supportPointer&&on(x,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(_,h.delay)}else _()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):t?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var r=this.options;!e&&toggleClass(dragEl,r.dragClass,!1),toggleClass(dragEl,r.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==t);)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){var r=void 0;if(r=t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,r=t.fallbackTolerance,a=t.fallbackOffset,i=e.touches?e.touches[0]:e,h=ghostEl&&matrix(ghostEl,!0),x=ghostEl&&h&&h.a,_=ghostEl&&h&&h.d,T=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),k=(i.clientX-tapEvt.clientX+a.x)/(x||1)+(T?T[0]-ghostRelativeParentInitialScroll[0]:0)/(x||1),D=(i.clientY-tapEvt.clientY+a.y)/(_||1)+(T?T[1]-ghostRelativeParentInitialScroll[1]:0)/(_||1);if(!Sortable.active&&!awaitingDragStarted){if(r&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ghostEl){h?(h.e+=k-(lastDx||0),h.f+=D-(lastDy||0)):h={a:1,b:0,c:0,d:1,e:k,f:D};var F="matrix(".concat(h.a,",").concat(h.b,",").concat(h.c,",").concat(h.d,",").concat(h.e,",").concat(h.f,")");css(ghostEl,"webkitTransform",F),css(ghostEl,"mozTransform",F),css(ghostEl,"msTransform",F),css(ghostEl,"transform",F),lastDx=k,lastDy=D,touchEvt=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),r=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,r.ghostClass,!1),toggleClass(ghostEl,r.fallbackClass,!0),toggleClass(ghostEl,r.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,a=e.dataTransfer,i=r.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),r.cloneId=_nextTick(function(){pluginEvent("clone",r),!Sortable.eventCanceled&&(r.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),r._hideClone(),_dispatchEvent({sortable:r,name:"clone"}))}),!t&&toggleClass(dragEl,i.dragClass,!0),t?(ignoreNextClick=!0,r._loopId=setInterval(r._emulateDragOver,50)):(off(document,"mouseup",r._onDrop),off(document,"touchend",r._onDrop),off(document,"touchcancel",r._onDrop),a&&(a.effectAllowed="move",i.setData&&i.setData.call(r,a,dragEl)),on(document,"drop",r),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,r._dragStartId=_nextTick(r._dragStarted.bind(r,t,e)),on(document,"selectstart",r),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,a,i,h,x=this.options,_=x.group,T=Sortable.active,k=activeGroup===_,D=x.sort,F=putSortable||T,j,P=this,N=!1;if(_silent)return;function J(ue,le){pluginEvent(ue,P,_objectSpread2({evt:e,isOwner:k,axis:j?"vertical":"horizontal",revert:h,dragRect:a,targetRect:i,canSort:D,fromSortable:F,target:r,completed:se,onMove:function(de,ce){return _onMove(rootEl,t,dragEl,a,de,getRect(de),e,ce)},changed:B},le))}function Q(){J("dragOverAnimationCapture"),P.captureAnimationState(),P!==F&&F.captureAnimationState()}function se(ue){return J("dragOverCompleted",{insertion:ue}),ue&&(k?T._hideClone():T._showClone(P),P!==F&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:T.options.ghostClass,!1),toggleClass(dragEl,x.ghostClass,!0)),putSortable!==P&&P!==Sortable.active?putSortable=P:P===Sortable.active&&putSortable&&(putSortable=null),F===P&&(P._ignoreWhileAnimating=r),P.animateAll(function(){J("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==F&&(F.animateAll(),F._ignoreWhileAnimating=null)),(r===dragEl&&!dragEl.animated||r===t&&!r.animated)&&(lastTarget=null),!x.dragoverBubble&&!e.rootEl&&r!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!ue&&nearestEmptyInsertDetectEvent(e)),!x.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),N=!0}function B(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,x.draggable),_dispatchEvent({sortable:P,name:"change",toEl:t,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=closest(r,x.draggable,t,!0),J("dragOver"),Sortable.eventCanceled)return N;if(dragEl.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||P._ignoreWhileAnimating===r)return se(!1);if(ignoreNextClick=!1,T&&!x.disabled&&(k?D||(h=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,T,dragEl,e))&&_.checkPut(this,T,dragEl,e))){if(j=this._getDirection(e,r)==="vertical",a=getRect(dragEl),J("dragOverValid"),Sortable.eventCanceled)return N;if(h)return parentEl=rootEl,Q(),this._hideClone(),J("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),se(!0);var C=lastChild(t,x.draggable);if(!C||_ghostIsLast(e,j,this)&&!C.animated){if(C===dragEl)return se(!1);if(C&&t===e.target&&(r=C),r&&(i=getRect(r)),_onMove(rootEl,t,dragEl,a,r,i,e,!!r)!==!1)return Q(),C&&C.nextSibling?t.insertBefore(dragEl,C.nextSibling):t.appendChild(dragEl),parentEl=t,B(),se(!0)}else if(C&&_ghostIsFirst(e,j,this)){var S=getChild(t,0,x,!0);if(S===dragEl)return se(!1);if(r=S,i=getRect(r),_onMove(rootEl,t,dragEl,a,r,i,e,!1)!==!1)return Q(),t.insertBefore(dragEl,S),parentEl=t,B(),se(!0)}else if(r.parentNode===t){i=getRect(r);var V=0,y,K=dragEl.parentNode!==t,L=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||a,r.animated&&r.toRect||i,j),G=j?"top":"left",re=isScrolledPast(r,"top","top")||isScrolledPast(dragEl,"top","top"),O=re?re.scrollTop:void 0;lastTarget!==r&&(y=i[G],pastFirstInvertThresh=!1,isCircumstantialInvert=!L&&x.invertSwap||K),V=_getSwapDirection(e,r,i,j,L?1:x.swapThreshold,x.invertedSwapThreshold==null?x.swapThreshold:x.invertedSwapThreshold,isCircumstantialInvert,lastTarget===r);var q;if(V!==0){var X=index(dragEl);do X-=V,q=parentEl.children[X];while(q&&(css(q,"display")==="none"||q===ghostEl))}if(V===0||q===r)return se(!1);lastTarget=r,lastDirection=V;var W=r.nextElementSibling,Y=!1;Y=V===1;var ie=_onMove(rootEl,t,dragEl,a,r,i,e,Y);if(ie!==!1)return(ie===1||ie===-1)&&(Y=ie===1),_silent=!0,setTimeout(_unsilent,30),Q(),Y&&!W?t.appendChild(dragEl):r.parentNode.insertBefore(dragEl,Y?W:r),re&&scrollBy(re,0,O-re.scrollTop),parentEl=dragEl.parentNode,y!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(y-getRect(r)[G])),B(),se(!0)}if(t.contains(dragEl))return se(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,r.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,r.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,a=0,i=r.length,h=this.options;a<i;a++)t=r[a],closest(t,h.draggable,this.el,!1)&&e.push(t.getAttribute(h.dataIdAttr)||_generateId(t));return e},sort:function(e,t){var r={},a=this.el;this.toArray().forEach(function(i,h){var x=a.children[h];closest(x,this.options.draggable,a,!1)&&(r[i]=x)},this),t&&this.captureAnimationState(),e.forEach(function(i){r[i]&&(a.removeChild(r[i]),a.appendChild(r[i]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var a=PluginManager.modifyOption(this,e,t);typeof a<"u"?r[e]=a:r[e]=t,e==="group"&&_prepareGroup(r)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function _onMove(o,e,t,r,a,i,h,x){var _,T=o[expando],k=T.options.onMove,D;return window.CustomEvent&&!IE11OrLess&&!Edge?_=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent("move",!0,!0)),_.to=e,_.from=o,_.dragged=t,_.draggedRect=r,_.related=a||e,_.relatedRect=i||getRect(e),_.willInsertAfter=x,_.originalEvent=h,o.dispatchEvent(_),k&&(D=k.call(T,_,h)),D}function _disableDraggable(o){o.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(o,e,t){var r=getRect(getChild(t.el,0,t.options,!0)),a=10;return e?o.clientX<r.left-a||o.clientY<r.top&&o.clientX<r.right:o.clientY<r.top-a||o.clientY<r.bottom&&o.clientX<r.left}function _ghostIsLast(o,e,t){var r=getRect(lastChild(t.el,t.options.draggable)),a=10;return e?o.clientX>r.right+a||o.clientX<=r.right&&o.clientY>r.bottom&&o.clientX>=r.left:o.clientX>r.right&&o.clientY>r.top||o.clientX<=r.right&&o.clientY>r.bottom+a}function _getSwapDirection(o,e,t,r,a,i,h,x){var _=r?o.clientY:o.clientX,T=r?t.height:t.width,k=r?t.top:t.left,D=r?t.bottom:t.right,F=!1;if(!h){if(x&&targetMoveDistance<T*a){if(!pastFirstInvertThresh&&(lastDirection===1?_>k+T*i/2:_<D-T*i/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)F=!0;else if(lastDirection===1?_<k+targetMoveDistance:_>D-targetMoveDistance)return-lastDirection}else if(_>k+T*(1-a)/2&&_<D-T*(1-a)/2)return _getInsertDirection(e)}return F=F||h,F&&(_<k+T*i/2||_>D-T*i/2)?_>k+T/2?1:-1:0}function _getInsertDirection(o){return index(dragEl)<index(o)?1:-1}function _generateId(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function _saveInputCheckedState(o){savedInputChecked.length=0;for(var e=o.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&savedInputChecked.push(r)}}function _nextTick(o){return setTimeout(o,0)}function _cancelNextTick(o){return clearTimeout(o)}documentExists&&on(document,"touchmove",function(o){(Sortable.active||awaitingDragStarted)&&o.cancelable&&o.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,t){return!!closest(e,t,e,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(o){return o[expando]};Sortable.mount=function(){for(var o=arguments.length,e=new Array(o),t=0;t<o;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),r.utils)),PluginManager.mount(r)})};Sortable.create=function(o,e){return new Sortable(o,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):r.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var a=this,i=(t.touches?t.touches[0]:t).clientX,h=(t.touches?t.touches[0]:t).clientY,x=document.elementFromPoint(i,h);if(touchEvt$1=t,r||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,x,r);var _=getParentAutoScrollElement(x,!0);scrolling&&(!pointerElemChangedInterval||i!==lastAutoScrollX||h!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var T=getParentAutoScrollElement(document.elementFromPoint(i,h),!0);T!==_&&(_=T,clearAutoScrolls()),autoScroll(t,a.options,T,r)},10),lastAutoScrollX=i,lastAutoScrollY=h)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(x,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(t,this.options,getParentAutoScrollElement(x,!1),!1)}}},_extends(o,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(o){clearInterval(o.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(o,e,t,r){if(e.scroll){var a=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,h=e.scrollSensitivity,x=e.scrollSpeed,_=getWindowScrollingElement(),T=!1,k;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,k=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(t,!0)));var D=0,F=scrollEl;do{var j=F,P=getRect(j),N=P.top,J=P.bottom,Q=P.left,se=P.right,B=P.width,C=P.height,S=void 0,V=void 0,y=j.scrollWidth,K=j.scrollHeight,L=css(j),G=j.scrollLeft,re=j.scrollTop;j===_?(S=B<y&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),V=C<K&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(S=B<y&&(L.overflowX==="auto"||L.overflowX==="scroll"),V=C<K&&(L.overflowY==="auto"||L.overflowY==="scroll"));var O=S&&(Math.abs(se-a)<=h&&G+B<y)-(Math.abs(Q-a)<=h&&!!G),q=V&&(Math.abs(J-i)<=h&&re+C<K)-(Math.abs(N-i)<=h&&!!re);if(!autoScrolls[D])for(var X=0;X<=D;X++)autoScrolls[X]||(autoScrolls[X]={});(autoScrolls[D].vx!=O||autoScrolls[D].vy!=q||autoScrolls[D].el!==j)&&(autoScrolls[D].el=j,autoScrolls[D].vx=O,autoScrolls[D].vy=q,clearInterval(autoScrolls[D].pid),(O!=0||q!=0)&&(T=!0,autoScrolls[D].pid=setInterval(function(){r&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var W=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*x:0,Y=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*x:0;typeof k=="function"&&k.call(Sortable.dragged.parentNode[expando],Y,W,o,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,Y,W)}.bind({layer:D}),24))),D++}while(e.bubbleScroll&&F!==_&&(F=getParentAutoScrollElement(F,!1)));scrolling=T}},30),drop=function(e){var t=e.originalEvent,r=e.putSortable,a=e.dragEl,i=e.activeSortable,h=e.dispatchSortableEvent,x=e.hideGhostForTarget,_=e.unhideGhostForTarget;if(t){var T=r||i;x();var k=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,D=document.elementFromPoint(k.clientX,k.clientY);_(),T&&!T.el.contains(D)&&(h("spill"),this.onSpill({dragEl:a,putSortable:r}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var a=getChild(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,a=r||this.sortable;a.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),a.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var cosJsSdkV5={exports:{}};(function(module,exports){(function(e,t){module.exports=t()})(commonjsGlobal,function(){return function(o){var e={};function t(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return o[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=o,t.c=e,t.d=function(r,a,i){t.o(r,a)||Object.defineProperty(r,a,{enumerable:!0,get:i})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,a){if(a&1&&(r=t(r)),a&8||a&4&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),a&2&&typeof r!="string")for(var h in r)t.d(i,h,function(x){return r[x]}.bind(null,h));return i},t.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(a,"a",a),a},t.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},t.p="/dist/",t(t.s="./index.js")}({"./index.js":function(o,e,t){var r=t("./src/cos.js");o.exports=r},"./lib/beacon.min.js":function(o,e,t){var r,a,i=t("./node_modules/@babel/runtime/helpers/typeof.js");(function(h,x){i(e)=="object"&&typeof o<"u"?o.exports=x():(r=x,a=typeof r=="function"?r.call(e,t,e,o):r,a!==void 0&&(o.exports=a))})(this,function(){var h=function(u,d){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,m){c.__proto__=m}||function(c,m){for(var I in m)Object.prototype.hasOwnProperty.call(m,I)&&(c[I]=m[I])},h(u,d)},x=function(){return x=Object.assign||function(u){for(var d,c=1,m=arguments.length;c<m;c++)for(var I in d=arguments[c])Object.prototype.hasOwnProperty.call(d,I)&&(u[I]=d[I]);return u},x.apply(this,arguments)};function _(v,u,d,c){return new(d||(d=Promise))(function(m,I){function U(ye){try{ge(c.next(ye))}catch(ne){I(ne)}}function ee(ye){try{ge(c.throw(ye))}catch(ne){I(ne)}}function ge(ye){var ne;ye.done?m(ye.value):(ne=ye.value,ne instanceof d?ne:new d(function(Be){Be(ne)})).then(U,ee)}ge((c=c.apply(v,u||[])).next())})}function T(v,u){var d,c,m,I,U={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return I={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function ee(ge){return function(ye){return function(ne){if(d)throw new TypeError("Generator is already executing.");for(;U;)try{if(d=1,c&&(m=2&ne[0]?c.return:ne[0]?c.throw||((m=c.return)&&m.call(c),0):c.next)&&!(m=m.call(c,ne[1])).done)return m;switch(c=0,m&&(ne=[2&ne[0],m.value]),ne[0]){case 0:case 1:m=ne;break;case 4:return U.label++,{value:ne[1],done:!1};case 5:U.label++,c=ne[1],ne=[0];continue;case 7:ne=U.ops.pop(),U.trys.pop();continue;default:if(m=U.trys,!((m=m.length>0&&m[m.length-1])||ne[0]!==6&&ne[0]!==2)){U=0;continue}if(ne[0]===3&&(!m||ne[1]>m[0]&&ne[1]<m[3])){U.label=ne[1];break}if(ne[0]===6&&U.label<m[1]){U.label=m[1],m=ne;break}if(m&&U.label<m[2]){U.label=m[2],U.ops.push(ne);break}m[2]&&U.ops.pop(),U.trys.pop();continue}ne=u.call(v,U)}catch(Be){ne=[6,Be],c=0}finally{d=m=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ge,ye])}}}var k="__BEACON_",D="__BEACON_deviceId",F="last_report_time",j="sending_event_ids",P="beacon_config",N="beacon_config_request_time",J=function(){function v(){var u=this;this.emit=function(d,c){if(u){var m,I=u.__EventsList[d];if(I!=null&&I.length){I=I.slice();for(var U=0;U<I.length;U++){m=I[U];try{var ee=m.callback.apply(u,[c]);if(m.type===1&&u.remove(d,m.callback),ee===!1)break}catch(ge){throw ge}}}return u}},this.__EventsList={}}return v.prototype.indexOf=function(u,d){for(var c=0;c<u.length;c++)if(u[c].callback===d)return c;return-1},v.prototype.on=function(u,d,c){if(c===void 0&&(c=0),this){var m=this.__EventsList[u];if(m||(m=this.__EventsList[u]=[]),this.indexOf(m,d)===-1){var I={name:u,type:c||0,callback:d};return m.push(I),this}return this}},v.prototype.one=function(u,d){this.on(u,d,1)},v.prototype.remove=function(u,d){if(this){var c=this.__EventsList[u];if(!c)return null;if(!d){try{delete this.__EventsList[u]}catch{}return null}if(c.length){var m=this.indexOf(c,d);c.splice(m,1)}return this}},v}();function Q(v,u){for(var d={},c=0,m=Object.keys(v);c<m.length;c++){var I=m[c],U=v[I];if(typeof U=="string")d[se(I)]=se(U);else{if(u)throw new Error("value mast be string  !!!!");d[se(String(I))]=se(String(U))}}return d}function se(v){if(typeof v!="string")return v;try{return v.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch{return""}}function B(v){return String(v.A99)+String(v.A100)}var C=function(){},S=function(){function v(u){var d=this;this.lifeCycle=new J,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(c){if(!c||!c.reduce||!c.length)throw new TypeError("createPipeline 方法需要传入至少有一个 pipe 的数组");return c.length===1?function(m,I){c[0](m,I||C)}:c.reduce(function(m,I){return function(U,ee){return ee===void 0&&(ee=C),m(U,function(ge){return I==null?void 0:I(ge,ee)})}})}([function(c){d.send({url:d.strategy.getUploadUrl(),data:c,method:"post",contentType:"application/json;charset=UTF-8"},function(){var m=d.config.onReportSuccess;typeof m=="function"&&m(JSON.stringify(c.events))},function(){var m=d.config.onReportFail;typeof m=="function"&&m(JSON.stringify(c.events))})}]),function(c,m){if(!c)throw m instanceof Error?m:new Error(m)}(!!u.appkey,"appkey must be initial"),this.config=x({},u)}return v.prototype.onUserAction=function(u,d){this.preReport(u,d,!1)},v.prototype.onDirectUserAction=function(u,d){this.preReport(u,d,!0)},v.prototype.preReport=function(u,d,c){u?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(u)||this.strategy.isSampleEvent(u)||this.onReport(u,d,c)):this.errorReport.reportError("602"," no eventCode")},v.prototype.addAdditionalParams=function(u){for(var d=0,c=Object.keys(u);d<c.length;d++){var m=c[d];this.additionalParams[m]=u[m]}},v.prototype.setChannelId=function(u){this.commonInfo.channelID=String(u)},v.prototype.setOpenId=function(u){this.commonInfo.openid=String(u)},v.prototype.setUnionid=function(u){this.commonInfo.unid=String(u)},v.prototype.getDeviceId=function(){return this.commonInfo.deviceId},v.prototype.getCommonInfo=function(){return this.commonInfo},v.prototype.removeSendingId=function(u){try{var d=JSON.parse(this.storage.getItem(j)),c=d.indexOf(u);c!=-1&&(d.splice(c,1),this.storage.setItem(j,JSON.stringify(d)))}catch{}},v}(),V=function(){function v(u,d,c,m){this.requestParams={},this.network=m,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=u.appkey,this.requestParams.platform=c,this.requestParams.uin=d.deviceId,this.requestParams.model="",this.requestParams.os=c,this.requestParams.app_version=u.appVersion,this.requestParams.sdk_version=d.sdkVersion,this.requestParams.error_stack="",this.uploadUrl=u.isOversea?"https://htrace.wetvinfo.com/kv":"https://h.trace.qq.com/kv"}return v.prototype.reportError=function(u,d){this.requestParams._dc=Math.random(),this.requestParams.error_msg=d,this.requestParams.error_code=u,this.network.get(this.uploadUrl,{params:this.requestParams}).catch(function(c){})},v}(),y=function(){function v(u,d,c,m,I){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.needQueryConfig=!0,this.appkey=d.appkey,this.storage=m,this.needQueryConfig=u;try{var U=JSON.parse(this.storage.getItem(P));U&&this.processData(U)}catch{}d.isOversea&&(this.strategy.httpsUploadUrl="https://svibeacon.onezapp.com/analytics/v2_upload"),!d.isOversea&&this.needRequestConfig()&&this.requestConfig(d.appVersion,c,I)}return v.prototype.requestConfig=function(u,d,c){var m=this;this.storage.setItem(N,Date.now().toString()),c.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:typeof wx>"u"?"3":"4",mainAppKey:this.appkey,appVersion:u,sdkVersion:d.sdkVersion,osVersion:d.userAgent,model:"",packageName:"",params:{A3:d.deviceId}}).then(function(I){if(I.data.ret==0)try{var U=JSON.parse(I.data.beaconConfig);U&&(m.processData(U),m.storage.setItem(P,I.data.beaconConfig))}catch{}else m.processData(null),m.storage.setItem(P,"")}).catch(function(I){})},v.prototype.processData=function(u){var d,c,m,I,U;this.strategy.isEventUpOnOff=(d=u==null?void 0:u.isEventUpOnOff)!==null&&d!==void 0?d:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=(c=u==null?void 0:u.httpsUploadUrl)!==null&&c!==void 0?c:this.strategy.httpsUploadUrl,this.strategy.requestInterval=(m=u==null?void 0:u.requestInterval)!==null&&m!==void 0?m:this.strategy.requestInterval,this.strategy.blacklist=(I=u==null?void 0:u.blacklist)!==null&&I!==void 0?I:this.strategy.blacklist,this.strategy.samplelist=(U=u==null?void 0:u.samplelist)!==null&&U!==void 0?U:this.strategy.samplelist;for(var ee=0,ge=this.strategy.samplelist;ee<ge.length;ee++){var ye=ge[ee].split(",");ye.length==2&&(this.realSample[ye[0]]=ye[1])}},v.prototype.needRequestConfig=function(){if(!this.needQueryConfig)return!1;var u=Number(this.storage.getItem(N));return Date.now()-u>60*this.strategy.requestInterval*1e3},v.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},v.prototype.isBlackEvent=function(u){return this.strategy.blacklist.indexOf(u)!=-1},v.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},v.prototype.isSampleEvent=function(u){return!!Object.prototype.hasOwnProperty.call(this.realSample,u)&&this.realSample[u]<Math.floor(Math.random()*Math.floor(1e4))},v}(),K="session_storage_key",L=function(){function v(u,d,c){this.getSessionStackDepth=0,this.beacon=c,this.storage=u,this.duration=d,this.appkey=c.config.appkey}return v.prototype.getSession=function(){this.getSessionStackDepth+=1;var u=this.storage.getItem(K);if(!u)return this.createSession();var d="",c=0;try{var m=JSON.parse(u)||{sessionId:void 0,sessionStart:void 0};if(!m.sessionId||!m.sessionStart)return this.createSession();var I=Number(this.storage.getItem(F));if(Date.now()-I>this.duration)return this.createSession();d=m.sessionId,c=m.sessionStart,this.getSessionStackDepth=0}catch{}return{sessionId:d,sessionStart:c}},v.prototype.createSession=function(){var u=Date.now(),d={sessionId:this.appkey+"_"+u.toString(),sessionStart:u};this.storage.setItem(K,JSON.stringify(d)),this.storage.setItem(F,u.toString());var c="is_new_user",m=this.storage.getItem(c);return this.getSessionStackDepth<=1&&this.beacon.onDirectUserAction("rqd_applaunched",{A21:m?"N":"Y"}),this.storage.setItem(c,JSON.stringify(!1)),d},v}();function G(){var v=navigator.userAgent,u=v.indexOf("compatible")>-1&&v.indexOf("MSIE")>-1,d=v.indexOf("Edge")>-1&&!u,c=v.indexOf("Trident")>-1&&v.indexOf("rv:11.0")>-1;if(u){new RegExp("MSIE (\\d+\\.\\d+);").test(v);var m=parseFloat(RegExp.$1);return m==7?7:m==8?8:m==9?9:m==10?10:6}return d?-2:c?11:-1}function re(v,u){var d,c;return(d="https://tun-cos-1258344701.file.myqcloud.com/fp.js",c===void 0&&(c=Date.now()+"-"+Math.random()),new Promise(function(m,I){if(document.getElementById(c))m(void 0);else{var U=document.getElementsByTagName("head")[0],ee=document.createElement("script");ee.onload=function(){return function(){ee.onload=null,m(void 0)}},ee.onerror=function(ge){ee.onerror=null,U.removeChild(ee),I(ge)},ee.src=d,ee.id=c,U.appendChild(ee)}})).then(function(){new Fingerprint().getQimei36(v,u)}).catch(function(m){}),""}var O=function(){return(O=Object.assign||function(u){for(var d,c=1,m=arguments.length;c<m;c++)for(var I in d=arguments[c])Object.prototype.hasOwnProperty.call(d,I)&&(u[I]=d[I]);return u}).apply(this,arguments)},q,X=function(){function v(u,d){d===void 0&&(d={}),this.reportOptions={},this.config=u,this.reportOptions=d}return v.canUseDB=function(){return!!(window!=null&&window.indexedDB)},v.prototype.openDB=function(){var u=this;return new Promise(function(d,c){if(!v.canUseDB())return c({message:"当前不支持 indexeddb"});var m=u.config,I=m.name,U=m.version,ee=m.stores,ge=indexedDB.open(I,U);ge.onsuccess=function(){u.db=ge.result,d(),O({result:1,func:"open",params:JSON.stringify(u.config)},u.reportOptions)},ge.onerror=function(ye){var ne,Be;c(ye),O({result:0,func:"open",params:JSON.stringify(u.config),error_msg:(Be=(ne=ye.target)===null||ne===void 0?void 0:ne.error)===null||Be===void 0?void 0:Be.message},u.reportOptions)},ge.onupgradeneeded=function(){u.db=ge.result;try{ee==null||ee.forEach(function(ye){u.createStore(ye)})}catch(ye){O({result:0,func:"open",params:JSON.stringify(u.config),error_msg:ye.message},u.reportOptions),c(ye)}}})},v.prototype.useStore=function(u){return this.storeName=u,this},v.prototype.deleteDB=function(){var u=this;return this.closeDB(),new Promise(function(d,c){var m=indexedDB.deleteDatabase(u.config.name);m.onsuccess=function(){return d()},m.onerror=c})},v.prototype.closeDB=function(){var u;(u=this.db)===null||u===void 0||u.close(),this.db=null},v.prototype.getStoreCount=function(){var u=this;return new Promise(function(d,c){var m=u.getStore("readonly").count();m.onsuccess=function(){return d(m.result)},m.onerror=c})},v.prototype.clearStore=function(){var u=this;return new Promise(function(d,c){var m=u.getStore("readwrite").clear();m.onsuccess=function(){return d()},m.onerror=c})},v.prototype.add=function(u,d){var c=this;return new Promise(function(m,I){var U=c.getStore("readwrite").add(u,d);U.onsuccess=function(){m(U.result)},U.onerror=I})},v.prototype.put=function(u,d){var c=this;return new Promise(function(m,I){var U=c.getStore("readwrite").put(u,d);U.onsuccess=function(){m(U.result)},U.onerror=I})},v.prototype.getStoreAllData=function(){var u=this;return new Promise(function(d,c){var m=u.getStore("readonly").openCursor(),I=[];m.onsuccess=function(){var U;if(!((U=m.result)===null||U===void 0)&&U.value){var ee=m.result.value;I.push(ee),m.result.continue()}else d(I)},m.onerror=c})},v.prototype.getDataRangeByIndex=function(u,d,c,m,I){var U=this;return new Promise(function(ee,ge){var ye=U.getStore().index(u),ne=IDBKeyRange.bound(d,c,m,I),Be=[],Te=ye.openCursor(ne);Te.onsuccess=function(){var Me;!((Me=Te==null?void 0:Te.result)===null||Me===void 0)&&Me.value?(Be.push(Te==null?void 0:Te.result.value),Te==null||Te.result.continue()):ee(Be)},Te.onerror=ge})},v.prototype.removeDataByIndex=function(u,d,c,m,I){var U=this;return new Promise(function(ee,ge){var ye=U.getStore("readwrite").index(u),ne=IDBKeyRange.bound(d,c,m,I),Be=ye.openCursor(ne),Te=0;Be.onsuccess=function(Me){var Fe=Me.target.result;Fe?(Te+=1,Fe.delete(),Fe.continue()):ee(Te)},Be.onerror=ge})},v.prototype.createStore=function(u){var d=u.name,c=u.indexes,m=c===void 0?[]:c,I=u.options;if(this.db){this.db.objectStoreNames.contains(d)&&this.db.deleteObjectStore(d);var U=this.db.createObjectStore(d,I);m.forEach(function(ee){U.createIndex(ee.indexName,ee.keyPath,ee.options)})}},v.prototype.getStore=function(u){var d;return u===void 0&&(u="readonly"),(d=this.db)===null||d===void 0?void 0:d.transaction(this.storeName,u).objectStore(this.storeName)},v}(),W="event_table_v3",Y="eventId",ie=function(){function v(u){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new X({name:"Beacon_"+u+"_V3",version:1,stores:[{name:W,options:{keyPath:Y},indexes:[{indexName:Y,keyPath:Y,options:{unique:!0}}]}]}),this.open()}return v.prototype.getCount=function(){var u=this;return this.readyExec(function(){return u.db.getStoreCount()})},v.prototype.setItem=function(u,d){var c=this;return this.readyExec(function(){return c.db.add({eventId:u,value:d})})},v.prototype.getItem=function(u){return _(this,void 0,void 0,function(){var d=this;return T(this,function(c){return[2,this.readyExec(function(){return d.db.getDataRangeByIndex(Y,u,u)})]})})},v.prototype.removeItem=function(u){var d=this;return this.readyExec(function(){return d.db.removeDataByIndex(Y,u,u)})},v.prototype.updateItem=function(u,d){var c=this;return this.readyExec(function(){return c.db.put({eventId:u,value:d})})},v.prototype.iterate=function(u){var d=this;return this.readyExec(function(){return d.db.getStoreAllData().then(function(c){c.forEach(function(m){u(m.value)})})})},v.prototype.open=function(){return _(this,void 0,void 0,function(){var u=this;return T(this,function(d){switch(d.label){case 0:return this.taskQueue=this.taskQueue.then(function(){return u.db.openDB()}),[4,this.taskQueue];case 1:return d.sent(),this.isReady=!0,this.db.useStore(W),[2]}})})},v.prototype.readyExec=function(u){return this.isReady?u():(this.taskQueue=this.taskQueue.then(function(){return u()}),this.taskQueue)},v}(),ue=function(){function v(u){this.keyObject={},this.storage=u}return v.prototype.getCount=function(){return this.storage.getStoreCount()},v.prototype.removeItem=function(u){this.storage.removeItem(u),delete this.keyObject[u]},v.prototype.setItem=function(u,d){var c=JSON.stringify(d);this.storage.setItem(u,c),this.keyObject[u]=d},v.prototype.iterate=function(u){for(var d=Object.keys(this.keyObject),c=0;c<d.length;c++){var m=this.storage.getItem(d[c]);u(JSON.parse(m))}},v}(),le=function(){function v(u,d){var c=this;this.dbEventCount=0,G()>0||!window.indexedDB||/X5Lite/.test(navigator.userAgent)?(this.store=new ue(d),this.dbEventCount=this.store.getCount()):(this.store=new ie(u),this.getCount().then(function(m){c.dbEventCount=m}).catch(function(m){}))}return v.prototype.getCount=function(){return _(this,void 0,void 0,function(){return T(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.store.getCount()];case 1:return[2,u.sent()];case 2:return u.sent(),[2,Promise.reject()];case 3:return[2]}})})},v.prototype.insertEvent=function(u,d){return _(this,void 0,void 0,function(){var c,m;return T(this,function(I){switch(I.label){case 0:if(this.dbEventCount>=1e4)return[2,Promise.reject()];c=B(u.mapValue),I.label=1;case 1:return I.trys.push([1,3,,4]),this.dbEventCount++,[4,this.store.setItem(c,u)];case 2:return[2,I.sent()];case 3:return m=I.sent(),d&&d(m,u),this.dbEventCount--,[2,Promise.reject()];case 4:return[2]}})})},v.prototype.getEvents=function(){return _(this,void 0,void 0,function(){var u;return T(this,function(d){switch(d.label){case 0:u=[],d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.store.iterate(function(c){u.push(c)})];case 2:return d.sent(),[2,Promise.all(u)];case 3:return d.sent(),[2,Promise.all(u)];case 4:return[2]}})})},v.prototype.removeEvent=function(u){return _(this,void 0,void 0,function(){var d;return T(this,function(c){switch(c.label){case 0:d=B(u.mapValue),c.label=1;case 1:return c.trys.push([1,3,,4]),this.dbEventCount--,[4,this.store.removeItem(d)];case 2:return[2,c.sent()];case 3:return c.sent(),this.dbEventCount++,[2,Promise.reject()];case 4:return[2]}})})},v}(),te=function(){return(te=Object.assign||function(u){for(var d,c=1,m=arguments.length;c<m;c++)for(var I in d=arguments[c])Object.prototype.hasOwnProperty.call(d,I)&&(u[I]=d[I]);return u}).apply(this,arguments)};function de(v){try{return decodeURIComponent(v.replace(/\+/g," "))}catch{return null}}function ce(v,u){var d=[null,void 0,"",NaN].includes(v);if(u.isSkipEmpty&&d)return null;var c=!u.isSkipEmpty&&d?"":v;try{return u.encode?encodeURIComponent(c):c}catch{return null}}function Se(v,u){u===void 0&&(u={encode:!0,isSkipEmpty:!1});var d=v.url,c=v.query,m=c===void 0?{}:c,I=v.hash,U=d.split("#"),ee=U[0],ge=U[1],ye=ge===void 0?"":ge,ne=ee.split("?")[0],Be=[],Te=ce(I||ye,u),Me=te(te({},function(Fe){var Ke=Fe.split("#"),qe=Ke[0],Ve=Ke[1],Xe=Ve===void 0?"":Ve,ze=qe.split("?"),Ge=ze[0],We=ze[1],st=We===void 0?"":We,ot=de(Xe),tt=Object.create(null);return st.split("&").forEach(function(l){var g=l.split("="),R=g[0],H=g[1],he=H===void 0?"":H,_e=de(R),Ue=de(he);_e===null||Ue===null||_e===""&&Ue===""||tt[_e]||(tt[_e]=Ue)}),{url:Ge,query:tt,hash:ot}}(d).query),m);return Object.keys(Me).forEach(function(Fe){var Ke=ce(Fe,u),qe=ce(Me[Fe],u);Ke!==null&&qe!==null&&Be.push(Ke+"="+qe)}),ne+(Be.length?"?"+Be.join("&"):"")+(Te?"#"+Te:"")}function $(v,u){return new Promise(function(d,c){if(u&&document.querySelectorAll("script[data-tag="+u+"]").length)return d();var m=document.createElement("script"),I=te({type:"text/javascript",charset:"utf-8"},v);Object.keys(I).forEach(function(U){return function(ee,ge,ye){if(ee)return ye===void 0?ee.getAttribute(ge):ee.setAttribute(ge,ye)}(m,U,I[U])}),u&&(m.dataset.tag=u),m.onload=function(){return d()},m.onreadystatechange=function(){var U=m.readyState;["complete","loaded"].includes(U)&&(m.onreadystatechange=null,d())},m.onerror=c,document.body.appendChild(m)})}(function(v){v[v.equal=0]="equal",v[v.low=-1]="low",v[v.high=1]="high"})(q||(q={}));var oe=function(){return(oe=Object.assign||function(u){for(var d,c=1,m=arguments.length;c<m;c++)for(var I in d=arguments[c])Object.prototype.hasOwnProperty.call(d,I)&&(u[I]=d[I]);return u}).apply(this,arguments)};function pe(v,u,d,c){return new(d||(d=Promise))(function(m,I){function U(ye){try{ge(c.next(ye))}catch(ne){I(ne)}}function ee(ye){try{ge(c.throw(ye))}catch(ne){I(ne)}}function ge(ye){var ne;ye.done?m(ye.value):(ne=ye.value,ne instanceof d?ne:new d(function(Be){Be(ne)})).then(U,ee)}ge((c=c.apply(v,u||[])).next())})}function Ee(v,u){var d,c,m,I,U={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return I={next:ee(0),throw:ee(1),return:ee(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function ee(ge){return function(ye){return function(ne){if(d)throw new TypeError("Generator is already executing.");for(;U;)try{if(d=1,c&&(m=2&ne[0]?c.return:ne[0]?c.throw||((m=c.return)&&m.call(c),0):c.next)&&!(m=m.call(c,ne[1])).done)return m;switch(c=0,m&&(ne=[2&ne[0],m.value]),ne[0]){case 0:case 1:m=ne;break;case 4:return U.label++,{value:ne[1],done:!1};case 5:U.label++,c=ne[1],ne=[0];continue;case 7:ne=U.ops.pop(),U.trys.pop();continue;default:if(!((m=(m=U.trys).length>0&&m[m.length-1])||ne[0]!==6&&ne[0]!==2)){U=0;continue}if(ne[0]===3&&(!m||ne[1]>m[0]&&ne[1]<m[3])){U.label=ne[1];break}if(ne[0]===6&&U.label<m[1]){U.label=m[1],m=ne;break}if(m&&U.label<m[2]){U.label=m[2],U.ops.push(ne);break}m[2]&&U.ops.pop(),U.trys.pop();continue}ne=u.call(v,U)}catch(Be){ne=[6,Be],c=0}finally{d=m=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ge,ye])}}}var ve=function(){function v(){this.interceptors=[]}return v.prototype.use=function(u,d){return this.interceptors.push({resolved:u,rejected:d}),this.interceptors.length-1},v.prototype.traverse=function(u,d){d===void 0&&(d=!1);var c=Promise.resolve(u);return(d?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(m,I){if(I){var U=I.resolved,ee=I.rejected;c=c.then(U,ee)}return m},""),c},v.prototype.eject=function(u){this.interceptors[u]&&(this.interceptors[u]=null)},v}(),me={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new ve,response:new ve}},Ce=/^([a-z][a-z\d+\-.]*:)?\/\//i,xe=Object.prototype.toString;function ke(v){return pe(this,void 0,void 0,function(){var u;return Ee(this,function(d){switch(d.label){case 0:if(window.fetch)return[2];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,$({src:v})];case 2:return d.sent(),[3,4];case 3:throw u=d.sent(),new Error("加载 polyfill "+v+" 失败: "+u.message);case 4:return[2]}})})}function Ae(v){return["Accept","Content-Type"].forEach(function(u){return d=u,void((c=v.headers)&&Object.keys(c).forEach(function(m){m!==d&&m.toUpperCase()===d.toUpperCase()&&(c[d]=c[m],delete c[m])}));var d,c}),function(u){if(xe.call(u)!=="[object Object]")return!1;var d=Object.getPrototypeOf(u);return d===null||d===Object.prototype}(v.body)&&(v.body=JSON.stringify(v.body),v.headers&&(v.headers["Content-Type"]="application/json;charset=utf-8")),v}function Ie(v){return pe(this,void 0,void 0,function(){var u,d,c,m,I,U,ee,ge,ye,ne,Be,Te,Me,Fe,Ke,qe,Ve;return Ee(this,function(Xe){switch(Xe.label){case 0:return u=me.baseURL,d=me.defaults,c=me.interceptors,[4,ke(me.polyfillUrl)];case 1:return Xe.sent(),(m=oe(oe({},d),v)).headers||(m.headers=function(ze){ze===void 0&&(ze="GET");var Ge=me.headers[ze]||{};return oe(oe({},me.headers.common),Ge)}(m.method)),Ae(m),[4,c.request.traverse(m,!0)];case 2:if((I=Xe.sent())instanceof Error)throw I;return I.url=function(ze,Ge){return!ze||Ce.test(Ge)?Ge:ze.replace(/\/+$/,"")+"/"+Ge.replace(/^\/+/,"")}(u,I.url),U=I.url,ee=I.timeout,ge=I.params,ye=I.method,ne=["GET","DELETE","OPTIONS","HEAD"].includes(ye===void 0?"GET":ye)&&!!ge,Be=ne?Se({url:U,query:ge}):U,Te=[],ee&&!I.signal&&(Ke=new Promise(function(ze){Me=setTimeout(function(){ze(new Error("timeout"))},ee)}),Te.push(Ke),Fe=new AbortController,I.signal=Fe.signal),Te.push(fetch(Be,I).catch(function(ze){return ze})),[4,Promise.race(Te)];case 3:return qe=Xe.sent(),Me&&clearTimeout(Me),[4,c.response.traverse(qe)];case 4:if((Ve=Xe.sent())instanceof Error)throw Fe==null||Fe.abort(),Ve;return[2,Ve]}})})}var Oe=function(){function v(u){me.interceptors.request.use(function(d){var c=d.url,m=d.method,I=d.body,U=I;if(u.onReportBeforeSend){var ee=u.onReportBeforeSend({url:c,method:m,data:I?JSON.parse(I):null});U=ee!=null&&ee.data?JSON.stringify(ee.data):null}return m!="GET"&&U?x(x({},d),{body:U}):d})}return v.prototype.get=function(u,d){return _(this,void 0,void 0,function(){var c,m;return T(this,function(I){switch(I.label){case 0:return[4,Ie(x({url:u},d))];case 1:return[4,(c=I.sent()).json()];case 2:return m=I.sent(),[2,Promise.resolve({data:m,status:c.status,statusText:c.statusText,headers:c.headers})]}})})},v.prototype.post=function(u,d,c){return _(this,void 0,void 0,function(){var m,I;return T(this,function(U){switch(U.label){case 0:return[4,Ie(x({url:u,body:d,method:"POST"},c))];case 1:return[4,(m=U.sent()).json()];case 2:return I=U.sent(),[2,Promise.resolve({data:I,status:m.status,statusText:m.statusText,headers:m.headers})]}})})},v}(),ae=function(){function v(u){this.appkey=u}return v.prototype.getItem=function(u){try{return window.localStorage.getItem(this.getStoreKey(u))}catch{return""}},v.prototype.removeItem=function(u){try{window.localStorage.removeItem(this.getStoreKey(u))}catch{}},v.prototype.setItem=function(u,d){try{window.localStorage.setItem(this.getStoreKey(u),d)}catch{}},v.prototype.setSessionItem=function(u,d){try{window.sessionStorage.setItem(this.getStoreKey(u),d)}catch{}},v.prototype.getSessionItem=function(u){try{return window.sessionStorage.getItem(this.getStoreKey(u))}catch{return""}},v.prototype.getStoreKey=function(u){return k+this.appkey+"_"+u},v.prototype.createDeviceId=function(){try{var u=window.localStorage.getItem(D);return u||(u=function(d){for(var c="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",m="",I=0;I<d;I++)m+=c.charAt(Math.floor(Math.random()*c.length));return m}(32),window.localStorage.setItem(D,u)),u}catch{return""}},v.prototype.clear=function(){try{for(var u=window.localStorage.length,d=0;d<u;d++){var c=window.localStorage.key(d);(c==null?void 0:c.substr(0,9))==k&&window.localStorage.removeItem(c)}}catch{}},v.prototype.getStoreCount=function(){var u=0;try{u=window.localStorage.length}catch{}return u},v}(),A="logid_start",z="4.5.14-web";return function(v){function u(d){var c=v.call(this,d)||this;c.qimei36="",c.uselessCycleTaskNum=0,c.underWeakNet=!1,c.pauseSearching=!1,c.send=function(ee,ge,ye){c.storage.setItem(F,Date.now().toString()),c.network.post(c.uploadUrl||c.strategy.getUploadUrl(),ee.data).then(function(ne){var Be;((Be=ne==null?void 0:ne.data)===null||Be===void 0?void 0:Be.result)==100?c.delayTime=1e3*ne.data.delayTime:c.delayTime=0,ge&&ge(ee.data),ee.data.events.forEach(function(Te){c.store.removeEvent(Te).then(function(){c.removeSendingId(B(Te.mapValue))})}),c.doCustomCycleTask()}).catch(function(ne){var Be=ee.data.events;c.errorReport.reportError(ne.code?ne.code.toString():"600",ne.message),ye&&ye(ee.data);var Te=JSON.parse(c.storage.getItem(j));Be.forEach(function(Me){Te&&Te.indexOf(B(Me))!=-1&&c.store.insertEvent(Me,function(Fe,Ke){Fe&&c.errorReport.reportError("604","insertEvent fail!")}),c.removeSendingId(B(Me))}),c.monitorUploadFailed()})};var m,I,U=G();return c.isUnderIE8=U>0&&U<8,c.isUnderIE8||(c.isUnderIE=U>0,d.needInitQimei&&re(d.appkey,function(ee){c.qimei36=ee.q36}),c.network=new Oe(d),c.storage=new ae(d.appkey),c.initCommonInfo(d),c.store=new le(d.appkey,c.storage),c.errorReport=new V(c.config,c.commonInfo,"web",c.network),c.strategy=new y(d.needQueryConfig==null||d.needQueryConfig,c.config,c.commonInfo,c.storage,c.network),c.logidStartTime=c.storage.getItem(A),c.logidStartTime||(c.logidStartTime=Date.now().toString(),c.storage.setItem(A,c.logidStartTime)),m=c.logidStartTime,I=Date.now()-Number.parseFloat(m),Math.floor(I/864e5)>=365&&c.storage.clear(),c.initSession(d),c.onDirectUserAction("rqd_js_init",{}),setTimeout(function(){return c.lifeCycle.emit("init")},0),c.initDelayTime=d.delay?d.delay:1e3,c.cycleTask(c.initDelayTime)),c}return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function m(){this.constructor=d}h(d,c),d.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}(u,v),u.prototype.initSession=function(d){var c=18e5;d.sessionDuration&&d.sessionDuration>3e4&&(c=d.sessionDuration),this.beaconSession=new L(this.storage,c,this)},u.prototype.initCommonInfo=function(d){var c=Number(this.storage.getItem(F));try{var m=JSON.parse(this.storage.getItem(j));(Date.now()-c>3e4||!m)&&this.storage.setItem(j,JSON.stringify([]))}catch{}d.uploadUrl&&(this.uploadUrl=d.uploadUrl+"?appkey="+d.appkey);var I=[window.screen.width,window.screen.height];window.devicePixelRatio&&I.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:I.join("*"),channelID:d.channelID?String(d.channelID):"",openid:d.openid?String(d.openid):"",unid:d.unionid?String(d.unionid):"",sdkVersion:z},this.config.appVersion=d.versionCode?String(d.versionCode):"",this.config.strictMode=d.strictMode},u.prototype.cycleTask=function(d){var c=this;this.intervalID=window.setInterval(function(){c.pauseSearching||c.store.getEvents().then(function(m){m.length==0&&(c.pauseSearching=!0);var I=[],U=JSON.parse(c.storage.getItem(j));U||(U=[]),m&&m.forEach(function(ee){var ge=B(ee.mapValue);U.indexOf(ge)==-1&&(I.push(ee),U.push(ge))}),I.length!=0&&(c.storage.setItem(j,JSON.stringify(U)),c._normalLogPipeline(c.assembleData(I)))}).catch(function(m){})},d)},u.prototype.onReport=function(d,c,m){var I=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{this.pauseSearching=!1;var U=this.generateData(d,c,m);if(m&&this.delayTime==0&&!this.underWeakNet)this._normalLogPipeline(this.assembleData(U));else{var ee=U.shift();ee&&this.store.insertEvent(ee,function(ge){ge&&I.errorReport.reportError("604","insertEvent fail!")}).catch(function(ge){I._normalLogPipeline(I.assembleData(U))})}}},u.prototype.onSendBeacon=function(d,c){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{this.pauseSearching=!1;var m=this.assembleData(this.generateData(d,c,!0));typeof navigator.sendBeacon=="function"&&navigator.sendBeacon(this.uploadUrl||this.strategy.getUploadUrl(),JSON.stringify(m))}},u.prototype.generateData=function(d,c,m){var I=[],U="4.5.14-web_"+(m?"direct_log_id":"normal_log_id"),ee=Number(this.storage.getItem(U));return ee=ee||1,c=x(x({},c),{A99:m?"Y":"N",A100:ee.toString(),A72:z,A88:this.logidStartTime}),ee++,this.storage.setItem(U,ee.toString()),I.push({eventCode:d,eventTime:Date.now().toString(),mapValue:Q(c,this.config.strictMode)}),I},u.prototype.assembleData=function(d){var c=this.beaconSession.getSession();return{appVersion:this.config.appVersion?se(this.config.appVersion):"",sdkId:"js",sdkVersion:z,mainAppKey:this.config.appkey,platformId:3,common:Q(x(x({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:c.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query,A153:this.qimei36}),!1),events:d}},u.prototype.monitorUploadFailed=function(){this.uselessCycleTaskNum++,this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(6e4),this.underWeakNet=!0)},u.prototype.doCustomCycleTask=function(){this.uselessCycleTaskNum>=5&&(window.clearInterval(this.intervalID),this.cycleTask(this.initDelayTime)),this.uselessCycleTaskNum=0,this.underWeakNet=!1},u}(S)})},"./lib/crypto.js":function(o,e,t){(function(r){var a=t("./node_modules/@babel/runtime/helpers/typeof.js"),i=i||function(h,x){var _={},T=_.lib={},k=function(){},D=T.Base={extend:function(C){k.prototype=this;var S=new k;return C&&S.mixIn(C),S.hasOwnProperty("init")||(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var C=this.extend();return C.init.apply(C,arguments),C},init:function(){},mixIn:function(C){for(var S in C)C.hasOwnProperty(S)&&(this[S]=C[S]);C.hasOwnProperty("toString")&&(this.toString=C.toString)},clone:function(){return this.init.prototype.extend(this)}},F=T.WordArray=D.extend({init:function(C,S){C=this.words=C||[],this.sigBytes=S!=x?S:4*C.length},toString:function(C){return(C||P).stringify(this)},concat:function(C){var S=this.words,V=C.words,y=this.sigBytes;if(C=C.sigBytes,this.clamp(),y%4)for(var K=0;K<C;K++)S[y+K>>>2]|=(V[K>>>2]>>>24-8*(K%4)&255)<<24-8*((y+K)%4);else if(65535<V.length)for(K=0;K<C;K+=4)S[y+K>>>2]=V[K>>>2];else S.push.apply(S,V);return this.sigBytes+=C,this},clamp:function(){var C=this.words,S=this.sigBytes;C[S>>>2]&=4294967295<<32-8*(S%4),C.length=h.ceil(S/4)},clone:function(){var C=D.clone.call(this);return C.words=this.words.slice(0),C},random:function(C){for(var S=[],V=0;V<C;V+=4)S.push(4294967296*h.random()|0);return new F.init(S,C)}}),j=_.enc={},P=j.Hex={stringify:function(C){var S=C.words;C=C.sigBytes;for(var V=[],y=0;y<C;y++){var K=S[y>>>2]>>>24-8*(y%4)&255;V.push((K>>>4).toString(16)),V.push((K&15).toString(16))}return V.join("")},parse:function(C){for(var S=C.length,V=[],y=0;y<S;y+=2)V[y>>>3]|=parseInt(C.substr(y,2),16)<<24-4*(y%8);return new F.init(V,S/2)}},N=j.Latin1={stringify:function(C){var S=C.words;C=C.sigBytes;for(var V=[],y=0;y<C;y++)V.push(String.fromCharCode(S[y>>>2]>>>24-8*(y%4)&255));return V.join("")},parse:function(C){for(var S=C.length,V=[],y=0;y<S;y++)V[y>>>2]|=(C.charCodeAt(y)&255)<<24-8*(y%4);return new F.init(V,S)}},J=j.Utf8={stringify:function(C){try{return decodeURIComponent(escape(N.stringify(C)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(C){return N.parse(unescape(encodeURIComponent(C)))}},Q=T.BufferedBlockAlgorithm=D.extend({reset:function(){this._data=new F.init,this._nDataBytes=0},_append:function(C){typeof C=="string"&&(C=J.parse(C)),this._data.concat(C),this._nDataBytes+=C.sigBytes},_process:function(C){var S=this._data,V=S.words,y=S.sigBytes,K=this.blockSize,L=y/(4*K),L=C?h.ceil(L):h.max((L|0)-this._minBufferSize,0);if(C=L*K,y=h.min(4*C,y),C){for(var G=0;G<C;G+=K)this._doProcessBlock(V,G);G=V.splice(0,C),S.sigBytes-=y}return new F.init(G,y)},clone:function(){var C=D.clone.call(this);return C._data=this._data.clone(),C},_minBufferSize:0});T.Hasher=Q.extend({cfg:D.extend(),init:function(C){this.cfg=this.cfg.extend(C),this.reset()},reset:function(){Q.reset.call(this),this._doReset()},update:function(C){return this._append(C),this._process(),this},finalize:function(C){return C&&this._append(C),this._doFinalize()},blockSize:16,_createHelper:function(C){return function(S,V){return new C.init(V).finalize(S)}},_createHmacHelper:function(C){return function(S,V){return new se.HMAC.init(C,V).finalize(S)}}});var se=_.algo={};return _}(Math);(function(){var h=i,k=h.lib,x=k.WordArray,_=k.Hasher,T=[],k=h.algo.SHA1=_.extend({_doReset:function(){this._hash=new x.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(F,j){for(var P=this._hash.words,N=P[0],J=P[1],Q=P[2],se=P[3],B=P[4],C=0;80>C;C++){if(16>C)T[C]=F[j+C]|0;else{var S=T[C-3]^T[C-8]^T[C-14]^T[C-16];T[C]=S<<1|S>>>31}S=(N<<5|N>>>27)+B+T[C],S=20>C?S+((J&Q|~J&se)+1518500249):40>C?S+((J^Q^se)+1859775393):60>C?S+((J&Q|J&se|Q&se)-1894007588):S+((J^Q^se)-899497514),B=se,se=Q,Q=J<<30|J>>>2,J=N,N=S}P[0]=P[0]+N|0,P[1]=P[1]+J|0,P[2]=P[2]+Q|0,P[3]=P[3]+se|0,P[4]=P[4]+B|0},_doFinalize:function(){var F=this._data,j=F.words,P=8*this._nDataBytes,N=8*F.sigBytes;return j[N>>>5]|=128<<24-N%32,j[(N+64>>>9<<4)+14]=Math.floor(P/4294967296),j[(N+64>>>9<<4)+15]=P,F.sigBytes=4*j.length,this._process(),this._hash},clone:function(){var F=_.clone.call(this);return F._hash=this._hash.clone(),F}});h.SHA1=_._createHelper(k),h.HmacSHA1=_._createHmacHelper(k)})(),function(){var h=i,x=h.enc.Utf8;h.algo.HMAC=h.lib.Base.extend({init:function(T,k){T=this._hasher=new T.init,typeof k=="string"&&(k=x.parse(k));var D=T.blockSize,F=4*D;k.sigBytes>F&&(k=T.finalize(k)),k.clamp();for(var j=this._oKey=k.clone(),P=this._iKey=k.clone(),N=j.words,J=P.words,Q=0;Q<D;Q++)N[Q]^=1549556828,J[Q]^=909522486;j.sigBytes=P.sigBytes=F,this.reset()},reset:function(){var T=this._hasher;T.reset(),T.update(this._iKey)},update:function(T){return this._hasher.update(T),this},finalize:function(T){var k=this._hasher;return T=k.finalize(T),k.reset(),k.finalize(this._oKey.clone().concat(T))}})}(),function(){var h=i,x=h.lib,_=x.WordArray,T=h.enc;T.Base64={stringify:function(D){var F=D.words,j=D.sigBytes,P=this._map;D.clamp();for(var N=[],J=0;J<j;J+=3)for(var Q=F[J>>>2]>>>24-J%4*8&255,se=F[J+1>>>2]>>>24-(J+1)%4*8&255,B=F[J+2>>>2]>>>24-(J+2)%4*8&255,C=Q<<16|se<<8|B,S=0;S<4&&J+S*.75<j;S++)N.push(P.charAt(C>>>6*(3-S)&63));var V=P.charAt(64);if(V)for(;N.length%4;)N.push(V);return N.join("")},parse:function(D){var F=D.length,j=this._map,P=j.charAt(64);if(P){var N=D.indexOf(P);N!=-1&&(F=N)}for(var J=[],Q=0,se=0;se<F;se++)if(se%4){var B=j.indexOf(D.charAt(se-1))<<se%4*2,C=j.indexOf(D.charAt(se))>>>6-se%4*2;J[Q>>>2]|=(B|C)<<24-Q%4*8,Q++}return _.create(J,Q)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),a(r)==="object"?r.exports=i:window.CryptoJS=i}).call(this,t("./node_modules/webpack/buildin/module.js")(o))},"./lib/json2xml.js":function(o,e,t){var r=t("./node_modules/@babel/runtime/helpers/typeof.js"),a="a-zA-Z_À-ÖØ-öø-ÿͰ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿿、-퟿豈-﷏ﷰ-�",i="-.0-9·̀-ͯ‿⁀",h=new RegExp("^([^"+a+"])|^((x|X)(m|M)(l|L))|([^"+a+i+"])","g"),x=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,_=function(j){var P=[];if(j instanceof Object)for(var N in j)j.hasOwnProperty(N)&&P.push(N);return P},T=function(j,P){var N=function(Q,se,B,C,S){var V=P.indent!==void 0?P.indent:"	",y=P.prettyPrint?`
`+new Array(C).join(V):"";P.removeIllegalNameCharacters&&(Q=Q.replace(h,"_"));var K=[y,"<",Q,B||""];return se&&se.length>0?(K.push(">"),K.push(se),S&&K.push(y),K.push("</"),K.push(Q),K.push(">")):K.push("/>"),K.join("")};return function J(Q,se,B){var C=r(Q);switch((Array.isArray?Array.isArray(Q):Q instanceof Array)?C="array":Q instanceof Date&&(C="date"),C){case"array":var S=[];return Q.map(function(L){S.push(J(L,1,B+1))}),P.prettyPrint&&S.push(`
`),S.join("");case"date":return Q.toJSON?Q.toJSON():Q+"";case"object":var V=[];for(var y in Q)if(Q.hasOwnProperty(y))if(Q[y]instanceof Array)for(var K=0;K<Q[y].length;K++)Q[y].hasOwnProperty(K)&&V.push(N(y,J(Q[y][K],0,B+1),null,B+1,_(Q[y][K]).length));else V.push(N(y,J(Q[y],0,B+1),null,B+1));return P.prettyPrint&&V.length>0&&V.push(`
`),V.join("");case"function":return Q();default:return P.escape?D(Q):""+Q}}(j,0,0)},k=function(j){var P=['<?xml version="1.0" encoding="UTF-8"'];return j&&P.push(' standalone="yes"'),P.push("?>"),P.join("")};function D(F){return(""+F).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(x,"")}o.exports=function(F,j){if(j||(j={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),typeof F=="string")try{F=JSON.parse(F.toString())}catch{return!1}var P="",N="";j&&(r(j)=="object"?(j.xmlHeader&&(P=k(!!j.xmlHeader.standalone)),typeof j.docType<"u"&&(N="<!DOCTYPE "+j.docType+">")):P=k()),j=j||{};var J=[P,j.prettyPrint&&N?`
`:"",N,T(F,j)];return J.join("").replace(/\n{2,}/g,`
`).replace(/\s+$/g,"")}},"./lib/md5.js":function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__,_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var ERROR="input is invalid type",WINDOW=(typeof window>"u"?"undefined":_typeof(window))==="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&(typeof self>"u"?"undefined":_typeof(self))==="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&(typeof process>"u"?"undefined":_typeof(process))==="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&_typeof(module)==="object"&&module.exports,AMD=__webpack_require__("./node_modules/webpack/buildin/amd-options.js"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(o){return _typeof(o)==="object"&&o.buffer&&o.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t,r){return new Md5(!0).update(t,r)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.getCtx=e.create=function(){return new Md5},e.update=function(a){return e.create().update(a)};for(var t=0;t<OUTPUT_TYPES.length;++t){var r=OUTPUT_TYPES[t];e[r]=createOutputMethod(r)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function o(e){if(typeof e=="string")return crypto.createHash("md5").update(e,"utf8").digest("hex");if(e==null)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(o){if(o)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(o,e){if(!this.finalized){for(var t,r=0,a,i=o.length,h=this.blocks,x=this.buffer8;r<i;){if(this.hashed&&(this.hashed=!1,h[0]=h[16],h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0),ARRAY_BUFFER)for(a=this.start;r<i&&a<64;++r)t=o.charCodeAt(r),e||t<128?x[a++]=t:t<2048?(x[a++]=192|t>>6,x[a++]=128|t&63):t<55296||t>=57344?(x[a++]=224|t>>12,x[a++]=128|t>>6&63,x[a++]=128|t&63):(t=65536+((t&1023)<<10|o.charCodeAt(++r)&1023),x[a++]=240|t>>18,x[a++]=128|t>>12&63,x[a++]=128|t>>6&63,x[a++]=128|t&63);else for(a=this.start;r<i&&a<64;++r)t=o.charCodeAt(r),e||t<128?h[a>>2]|=t<<SHIFT[a++&3]:t<2048?(h[a>>2]|=(192|t>>6)<<SHIFT[a++&3],h[a>>2]|=(128|t&63)<<SHIFT[a++&3]):t<55296||t>=57344?(h[a>>2]|=(224|t>>12)<<SHIFT[a++&3],h[a>>2]|=(128|t>>6&63)<<SHIFT[a++&3],h[a>>2]|=(128|t&63)<<SHIFT[a++&3]):(t=65536+((t&1023)<<10|o.charCodeAt(++r)&1023),h[a>>2]|=(240|t>>18)<<SHIFT[a++&3],h[a>>2]|=(128|t>>12&63)<<SHIFT[a++&3],h[a>>2]|=(128|t>>6&63)<<SHIFT[a++&3],h[a>>2]|=(128|t&63)<<SHIFT[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var o=this.blocks,e=this.lastByteIndex;o[e>>2]|=EXTRA[e&3],e>=56&&(this.hashed||this.hash(),o[0]=o[16],o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),o[14]=this.bytes<<3,o[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var o,e,t,r,a,i,h=this.blocks;this.first?(o=h[0]-680876937,o=(o<<7|o>>>25)-271733879<<0,r=(-1732584194^o&2004318071)+h[1]-117830708,r=(r<<12|r>>>20)+o<<0,t=(-271733879^r&(o^-271733879))+h[2]-1126478375,t=(t<<17|t>>>15)+r<<0,e=(o^t&(r^o))+h[3]-1316259209,e=(e<<22|e>>>10)+t<<0):(o=this.h0,e=this.h1,t=this.h2,r=this.h3,o+=(r^e&(t^r))+h[0]-680876936,o=(o<<7|o>>>25)+e<<0,r+=(t^o&(e^t))+h[1]-389564586,r=(r<<12|r>>>20)+o<<0,t+=(e^r&(o^e))+h[2]+606105819,t=(t<<17|t>>>15)+r<<0,e+=(o^t&(r^o))+h[3]-1044525330,e=(e<<22|e>>>10)+t<<0),o+=(r^e&(t^r))+h[4]-176418897,o=(o<<7|o>>>25)+e<<0,r+=(t^o&(e^t))+h[5]+1200080426,r=(r<<12|r>>>20)+o<<0,t+=(e^r&(o^e))+h[6]-1473231341,t=(t<<17|t>>>15)+r<<0,e+=(o^t&(r^o))+h[7]-45705983,e=(e<<22|e>>>10)+t<<0,o+=(r^e&(t^r))+h[8]+1770035416,o=(o<<7|o>>>25)+e<<0,r+=(t^o&(e^t))+h[9]-1958414417,r=(r<<12|r>>>20)+o<<0,t+=(e^r&(o^e))+h[10]-42063,t=(t<<17|t>>>15)+r<<0,e+=(o^t&(r^o))+h[11]-1990404162,e=(e<<22|e>>>10)+t<<0,o+=(r^e&(t^r))+h[12]+1804603682,o=(o<<7|o>>>25)+e<<0,r+=(t^o&(e^t))+h[13]-40341101,r=(r<<12|r>>>20)+o<<0,t+=(e^r&(o^e))+h[14]-1502002290,t=(t<<17|t>>>15)+r<<0,e+=(o^t&(r^o))+h[15]+1236535329,e=(e<<22|e>>>10)+t<<0,o+=(t^r&(e^t))+h[1]-165796510,o=(o<<5|o>>>27)+e<<0,r+=(e^t&(o^e))+h[6]-1069501632,r=(r<<9|r>>>23)+o<<0,t+=(o^e&(r^o))+h[11]+643717713,t=(t<<14|t>>>18)+r<<0,e+=(r^o&(t^r))+h[0]-373897302,e=(e<<20|e>>>12)+t<<0,o+=(t^r&(e^t))+h[5]-701558691,o=(o<<5|o>>>27)+e<<0,r+=(e^t&(o^e))+h[10]+38016083,r=(r<<9|r>>>23)+o<<0,t+=(o^e&(r^o))+h[15]-660478335,t=(t<<14|t>>>18)+r<<0,e+=(r^o&(t^r))+h[4]-405537848,e=(e<<20|e>>>12)+t<<0,o+=(t^r&(e^t))+h[9]+568446438,o=(o<<5|o>>>27)+e<<0,r+=(e^t&(o^e))+h[14]-1019803690,r=(r<<9|r>>>23)+o<<0,t+=(o^e&(r^o))+h[3]-187363961,t=(t<<14|t>>>18)+r<<0,e+=(r^o&(t^r))+h[8]+1163531501,e=(e<<20|e>>>12)+t<<0,o+=(t^r&(e^t))+h[13]-1444681467,o=(o<<5|o>>>27)+e<<0,r+=(e^t&(o^e))+h[2]-51403784,r=(r<<9|r>>>23)+o<<0,t+=(o^e&(r^o))+h[7]+1735328473,t=(t<<14|t>>>18)+r<<0,e+=(r^o&(t^r))+h[12]-1926607734,e=(e<<20|e>>>12)+t<<0,a=e^t,o+=(a^r)+h[5]-378558,o=(o<<4|o>>>28)+e<<0,r+=(a^o)+h[8]-2022574463,r=(r<<11|r>>>21)+o<<0,i=r^o,t+=(i^e)+h[11]+1839030562,t=(t<<16|t>>>16)+r<<0,e+=(i^t)+h[14]-35309556,e=(e<<23|e>>>9)+t<<0,a=e^t,o+=(a^r)+h[1]-1530992060,o=(o<<4|o>>>28)+e<<0,r+=(a^o)+h[4]+1272893353,r=(r<<11|r>>>21)+o<<0,i=r^o,t+=(i^e)+h[7]-155497632,t=(t<<16|t>>>16)+r<<0,e+=(i^t)+h[10]-1094730640,e=(e<<23|e>>>9)+t<<0,a=e^t,o+=(a^r)+h[13]+681279174,o=(o<<4|o>>>28)+e<<0,r+=(a^o)+h[0]-358537222,r=(r<<11|r>>>21)+o<<0,i=r^o,t+=(i^e)+h[3]-722521979,t=(t<<16|t>>>16)+r<<0,e+=(i^t)+h[6]+76029189,e=(e<<23|e>>>9)+t<<0,a=e^t,o+=(a^r)+h[9]-640364487,o=(o<<4|o>>>28)+e<<0,r+=(a^o)+h[12]-421815835,r=(r<<11|r>>>21)+o<<0,i=r^o,t+=(i^e)+h[15]+530742520,t=(t<<16|t>>>16)+r<<0,e+=(i^t)+h[2]-995338651,e=(e<<23|e>>>9)+t<<0,o+=(t^(e|~r))+h[0]-198630844,o=(o<<6|o>>>26)+e<<0,r+=(e^(o|~t))+h[7]+1126891415,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~e))+h[14]-1416354905,t=(t<<15|t>>>17)+r<<0,e+=(r^(t|~o))+h[5]-57434055,e=(e<<21|e>>>11)+t<<0,o+=(t^(e|~r))+h[12]+1700485571,o=(o<<6|o>>>26)+e<<0,r+=(e^(o|~t))+h[3]-1894986606,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~e))+h[10]-1051523,t=(t<<15|t>>>17)+r<<0,e+=(r^(t|~o))+h[1]-2054922799,e=(e<<21|e>>>11)+t<<0,o+=(t^(e|~r))+h[8]+1873313359,o=(o<<6|o>>>26)+e<<0,r+=(e^(o|~t))+h[15]-30611744,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~e))+h[6]-1560198380,t=(t<<15|t>>>17)+r<<0,e+=(r^(t|~o))+h[13]+1309151649,e=(e<<21|e>>>11)+t<<0,o+=(t^(e|~r))+h[4]-145523070,o=(o<<6|o>>>26)+e<<0,r+=(e^(o|~t))+h[11]-1120210379,r=(r<<10|r>>>22)+o<<0,t+=(o^(r|~e))+h[2]+718787259,t=(t<<15|t>>>17)+r<<0,e+=(r^(t|~o))+h[9]-343485551,e=(e<<21|e>>>11)+t<<0,this.first?(this.h0=o+1732584193<<0,this.h1=e-271733879<<0,this.h2=t-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+o<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var o=this.h0,e=this.h1,t=this.h2,r=this.h3;return HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(o){if(o==="hex")return this.hex();this.finalize();var e=this.h0,t=this.h1,r=this.h2,a=this.h3,i=[e&255,e>>8&255,e>>16&255,e>>24&255,t&255,t>>8&255,t>>16&255,t>>24&255,r&255,r>>8&255,r>>16&255,r>>24&255,a&255,a>>8&255,a>>16&255,a>>24&255];return i},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var o=new ArrayBuffer(16),e=new Uint32Array(o);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,o},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var o,e,t,r="",a=this.array(),i=0;i<15;)o=a[i++],e=a[i++],t=a[i++],r+=BASE64_ENCODE_CHAR[o>>>2]+BASE64_ENCODE_CHAR[(o<<4|e>>>4)&63]+BASE64_ENCODE_CHAR[(e<<2|t>>>6)&63]+BASE64_ENCODE_CHAR[t&63];return o=a[i],r+=BASE64_ENCODE_CHAR[o>>>2]+BASE64_ENCODE_CHAR[o<<4&63]+"==",r};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("./node_modules/process/browser.js"),__webpack_require__("./node_modules/webpack/buildin/global.js"),__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./lib/request.js":function(o,e,t){var r=t("./node_modules/@babel/runtime/helpers/typeof.js"),a=function(k){switch(r(k)){case"string":return k;case"boolean":return k?"true":"false";case"number":return isFinite(k)?k:"";default:return""}},i=function(k,D,F,j){return D=D||"&",F=F||"=",k===null&&(k=void 0),r(k)==="object"?Object.keys(k).map(function(P){var N=encodeURIComponent(a(P))+F;return Array.isArray(k[P])?k[P].map(function(J){return N+encodeURIComponent(a(J))}).join(D):N+encodeURIComponent(a(k[P]))}).filter(Boolean).join(D):j?encodeURIComponent(a(j))+F+encodeURIComponent(a(k)):""},h=function(k,D,F){var j={};return D.getAllResponseHeaders().trim().split(`
`).forEach(function(P){if(P){var N=P.indexOf(":"),J=P.substr(0,N).trim().toLowerCase(),Q=P.substr(N+1).trim();j[J]=Q}}),{error:k,statusCode:D.status,statusMessage:D.statusText,headers:j,body:F}},x=function(k,D){return!D&&D==="text"?k.responseText:k.response},_=function(k,D){var F=(k.method||"GET").toUpperCase(),j=k.url;if(k.qs){var P=i(k.qs);P&&(j+=(j.indexOf("?")===-1?"?":"&")+P)}var N=new XMLHttpRequest;if(N.open(F,j,!0),N.responseType=k.dataType||"text",k.xhrFields)for(var J in k.xhrFields)N[J]=k.xhrFields[J];var Q=k.headers;if(Q)for(var se in Q)Q.hasOwnProperty(se)&&se.toLowerCase()!=="content-length"&&se.toLowerCase()!=="user-agent"&&se.toLowerCase()!=="origin"&&se.toLowerCase()!=="host"&&N.setRequestHeader(se,Q[se]);return k.onProgress&&N.upload&&(N.upload.onprogress=k.onProgress),k.onDownloadProgress&&(N.onprogress=k.onDownloadProgress),k.timeout&&(N.timeout=k.timeout),N.ontimeout=function(B){var C=new Error("timeout");D(h(C,N))},N.onload=function(){D(h(null,N,x(N,k.dataType)))},N.onerror=function(B){var C=x(N,k.dataType);if(C)D(h(null,N,C));else{var S=N.statusText;!S&&N.status===0&&(S=new Error("CORS blocked or network error")),D(h(S,N,C))}},N.send(k.body||""),N};o.exports=_},"./lib/xml2json.js":function(o,e,t){var r=t("./node_modules/@xmldom/xmldom/lib/index.js").DOMParser,a=function(){this.version="1.3.5";var h={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},x=new RegExp(/(?!xmlns)^.*:/);return this.grokType=function(_){return/^\s*$/.test(_)?null:/^(?:true|false)$/i.test(_)?_.toLowerCase()==="true":isFinite(_)?parseFloat(_):_},this.parseString=function(_,T){if(_){var k=this.stringToXML(_);return k.getElementsByTagName("parsererror").length?null:this.parseXML(k,T)}else return null},this.parseXML=function(_,T){for(var k in T)h[k]=T[k];var D={},F=0,j="",P=_.childNodes.length;if(P)for(var N,J,Q,se=0;se<_.childNodes.length;se++)N=_.childNodes.item(se),N.nodeType===4?h.mergeCDATA&&(j+=N.nodeValue):N.nodeType===3?j+=N.nodeValue:N.nodeType===1&&(F===0&&(D={}),h.stripElemPrefix?J=N.nodeName.replace(x,""):J=N.nodeName,Q=a.parseXML(N),D.hasOwnProperty(J)?(D[J].constructor!==Array&&(D[J]=[D[J]]),D[J].push(Q)):(D[J]=Q,F++));return Object.keys(D).length||(D=j||""),D},this.xmlToString=function(_){try{var T=_.xml?_.xml:new XMLSerializer().serializeToString(_);return T}catch{return null}},this.stringToXML=function(_){try{var T=null;if(window.DOMParser){var k=new r;return T=k.parseFromString(_,"text/xml"),T}else return T=new ActiveXObject("Microsoft.XMLDOM"),T.async=!1,T.loadXML(_),T}catch{return null}},this}.call({}),i=function(x){return a.parseString(x)};o.exports=i},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(o,e){function t(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(o,e){function t(a,i){for(var h=0;h<i.length;h++){var x=i[h];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(a,x.key,x)}}function r(a,i,h){return i&&t(a.prototype,i),h&&t(a,h),Object.defineProperty(a,"prototype",{writable:!1}),a}o.exports=r,o.exports.__esModule=!0,o.exports.default=o.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(o,e){function t(r){return o.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},o.exports.__esModule=!0,o.exports.default=o.exports,t(r)}o.exports=t,o.exports.__esModule=!0,o.exports.default=o.exports},"./node_modules/@xmldom/xmldom/lib/conventions.js":function(o,e,t){function r(_,T,k){if(k===void 0&&(k=Array.prototype),_&&typeof k.find=="function")return k.find.call(_,T);for(var D=0;D<_.length;D++)if(Object.prototype.hasOwnProperty.call(_,D)){var F=_[D];if(T.call(void 0,F,D,_))return F}}function a(_,T){return T===void 0&&(T=Object),T&&typeof T.freeze=="function"?T.freeze(_):_}function i(_,T){if(_===null||typeof _!="object")throw new TypeError("target is not an object");for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(_[k]=T[k]);return _}var h=a({HTML:"text/html",isHTML:function(_){return _===h.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),x=a({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(_){return _===x.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});e.assign=i,e.find=r,e.freeze=a,e.MIME_TYPE=h,e.NAMESPACE=x},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":function(o,e,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js"),a=t("./node_modules/@xmldom/xmldom/lib/dom.js"),i=t("./node_modules/@xmldom/xmldom/lib/entities.js"),h=t("./node_modules/@xmldom/xmldom/lib/sax.js"),x=a.DOMImplementation,_=r.NAMESPACE,T=h.ParseError,k=h.XMLReader;function D(B){return B.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function F(B){this.options=B||{locator:{}}}F.prototype.parseFromString=function(B,C){var S=this.options,V=new k,y=S.domBuilder||new P,K=S.errorHandler,L=S.locator,G=S.xmlns||{},re=/\/x?html?$/.test(C),O=re?i.HTML_ENTITIES:i.XML_ENTITIES;L&&y.setDocumentLocator(L),V.errorHandler=j(K,y,L),V.domBuilder=S.domBuilder||y,re&&(G[""]=_.HTML),G.xml=G.xml||_.XML;var q=S.normalizeLineEndings||D;return B&&typeof B=="string"?V.parse(q(B),G,O):V.errorHandler.error("invalid doc source"),y.doc};function j(B,C,S){if(!B){if(C instanceof P)return C;B=C}var V={},y=B instanceof Function;S=S||{};function K(L){var G=B[L];!G&&y&&(G=B.length==2?function(re){B(L,re)}:B),V[L]=G&&function(re){G("[xmldom "+L+"]	"+re+J(S))}||function(){}}return K("warning"),K("error"),K("fatalError"),V}function P(){this.cdata=!1}function N(B,C){C.lineNumber=B.lineNumber,C.columnNumber=B.columnNumber}P.prototype={startDocument:function(){this.doc=new x().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(B,C,S,V){var y=this.doc,K=y.createElementNS(B,S||C),L=V.length;se(this,K),this.currentElement=K,this.locator&&N(this.locator,K);for(var G=0;G<L;G++){var B=V.getURI(G),re=V.getValue(G),S=V.getQName(G),O=y.createAttributeNS(B,S);this.locator&&N(V.getLocator(G),O),O.value=O.nodeValue=re,K.setAttributeNode(O)}},endElement:function(B,C,S){var V=this.currentElement;V.tagName,this.currentElement=V.parentNode},startPrefixMapping:function(B,C){},endPrefixMapping:function(B){},processingInstruction:function(B,C){var S=this.doc.createProcessingInstruction(B,C);this.locator&&N(this.locator,S),se(this,S)},ignorableWhitespace:function(B,C,S){},characters:function(B,C,S){if(B=Q.apply(this,arguments),B){if(this.cdata)var V=this.doc.createCDATASection(B);else var V=this.doc.createTextNode(B);this.currentElement?this.currentElement.appendChild(V):/^\s*$/.test(B)&&this.doc.appendChild(V),this.locator&&N(this.locator,V)}},skippedEntity:function(B){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(B){(this.locator=B)&&(B.lineNumber=0)},comment:function(B,C,S){B=Q.apply(this,arguments);var V=this.doc.createComment(B);this.locator&&N(this.locator,V),se(this,V)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(B,C,S){var V=this.doc.implementation;if(V&&V.createDocumentType){var y=V.createDocumentType(B,C,S);this.locator&&N(this.locator,y),se(this,y),this.doc.doctype=y}},warning:function(B){},error:function(B){},fatalError:function(B){throw new T(B,this.locator)}};function J(B){if(B)return`
@`+(B.systemId||"")+"#[line:"+B.lineNumber+",col:"+B.columnNumber+"]"}function Q(B,C,S){return typeof B=="string"?B.substr(C,S):B.length>=C+S||C?new java.lang.String(B,C,S)+"":B}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(B){P.prototype[B]=function(){return null}});function se(B,C){B.currentElement?B.currentElement.appendChild(C):B.doc.appendChild(C)}e.__DOMHandler=P,e.normalizeLineEndings=D,e.DOMParser=F},"./node_modules/@xmldom/xmldom/lib/dom.js":function(o,e,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js"),a=r.find,i=r.NAMESPACE;function h(l){return l!==""}function x(l){return l?l.split(/[\t\n\f\r ]+/).filter(h):[]}function _(l,g){return l.hasOwnProperty(g)||(l[g]=!0),l}function T(l){if(!l)return[];var g=x(l);return Object.keys(g.reduce(_,{}))}function k(l){return function(g){return l&&l.indexOf(g)!==-1}}function D(l,g){for(var R in l)Object.prototype.hasOwnProperty.call(l,R)&&(g[R]=l[R])}function F(l,g){var R=l.prototype;if(!(R instanceof g)){let H=function(){};H.prototype=g.prototype,H=new H,D(R,H),l.prototype=R=H}R.constructor!=l&&(R.constructor=l)}var j={},P=j.ELEMENT_NODE=1,N=j.ATTRIBUTE_NODE=2,J=j.TEXT_NODE=3,Q=j.CDATA_SECTION_NODE=4,se=j.ENTITY_REFERENCE_NODE=5,B=j.ENTITY_NODE=6,C=j.PROCESSING_INSTRUCTION_NODE=7,S=j.COMMENT_NODE=8,V=j.DOCUMENT_NODE=9,y=j.DOCUMENT_TYPE_NODE=10,K=j.DOCUMENT_FRAGMENT_NODE=11,L=j.NOTATION_NODE=12,G={},re={};G.INDEX_SIZE_ERR=(re[1]="Index size error",1),G.DOMSTRING_SIZE_ERR=(re[2]="DOMString size error",2);var O=G.HIERARCHY_REQUEST_ERR=(re[3]="Hierarchy request error",3);G.WRONG_DOCUMENT_ERR=(re[4]="Wrong document",4),G.INVALID_CHARACTER_ERR=(re[5]="Invalid character",5),G.NO_DATA_ALLOWED_ERR=(re[6]="No data allowed",6),G.NO_MODIFICATION_ALLOWED_ERR=(re[7]="No modification allowed",7);var q=G.NOT_FOUND_ERR=(re[8]="Not found",8);G.NOT_SUPPORTED_ERR=(re[9]="Not supported",9);var X=G.INUSE_ATTRIBUTE_ERR=(re[10]="Attribute in use",10);G.INVALID_STATE_ERR=(re[11]="Invalid state",11),G.SYNTAX_ERR=(re[12]="Syntax error",12),G.INVALID_MODIFICATION_ERR=(re[13]="Invalid modification",13),G.NAMESPACE_ERR=(re[14]="Invalid namespace",14),G.INVALID_ACCESS_ERR=(re[15]="Invalid access",15);function W(l,g){if(g instanceof Error)var R=g;else R=this,Error.call(this,re[l]),this.message=re[l],Error.captureStackTrace&&Error.captureStackTrace(this,W);return R.code=l,g&&(this.message=this.message+": "+g),R}W.prototype=Error.prototype,D(G,W);function Y(){}Y.prototype={length:0,item:function(l){return this[l]||null},toString:function(l,g){for(var R=[],H=0;H<this.length;H++)We(this[H],R,l,g);return R.join("")},filter:function(l){return Array.prototype.filter.call(this,l)},indexOf:function(l){return Array.prototype.indexOf.call(this,l)}};function ie(l,g){this._node=l,this._refresh=g,ue(this)}function ue(l){var g=l._node._inc||l._node.ownerDocument._inc;if(l._inc!=g){var R=l._refresh(l._node);tt(l,"length",R.length),D(R,l),l._inc=g}}ie.prototype.item=function(l){return ue(this),this[l]},F(ie,Y);function le(){}function te(l,g){for(var R=l.length;R--;)if(l[R]===g)return R}function de(l,g,R,H){if(H?g[te(g,H)]=R:g[g.length++]=R,l){R.ownerElement=l;var he=l.ownerDocument;he&&(H&&me(he,l,H),ve(he,l,R))}}function ce(l,g,R){var H=te(g,R);if(H>=0){for(var he=g.length-1;H<he;)g[H]=g[++H];if(g.length=he,l){var _e=l.ownerDocument;_e&&(me(_e,l,R),R.ownerElement=null)}}else throw new W(q,new Error(l.tagName+"@"+R))}le.prototype={length:0,item:Y.prototype.item,getNamedItem:function(l){for(var g=this.length;g--;){var R=this[g];if(R.nodeName==l)return R}},setNamedItem:function(l){var g=l.ownerElement;if(g&&g!=this._ownerElement)throw new W(X);var R=this.getNamedItem(l.nodeName);return de(this._ownerElement,this,l,R),R},setNamedItemNS:function(l){var g=l.ownerElement,R;if(g&&g!=this._ownerElement)throw new W(X);return R=this.getNamedItemNS(l.namespaceURI,l.localName),de(this._ownerElement,this,l,R),R},removeNamedItem:function(l){var g=this.getNamedItem(l);return ce(this._ownerElement,this,g),g},removeNamedItemNS:function(l,g){var R=this.getNamedItemNS(l,g);return ce(this._ownerElement,this,R),R},getNamedItemNS:function(l,g){for(var R=this.length;R--;){var H=this[R];if(H.localName==g&&H.namespaceURI==l)return H}return null}};function Se(){}Se.prototype={hasFeature:function(l,g){return!0},createDocument:function(l,g,R){var H=new Ee;if(H.implementation=this,H.childNodes=new Y,H.doctype=R||null,R&&H.appendChild(R),g){var he=H.createElementNS(l,g);H.appendChild(he)}return H},createDocumentType:function(l,g,R){var H=new Be;return H.name=l,H.nodeName=l,H.publicId=g||"",H.systemId=R||"",H}};function $(){}$.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(l,g){return c(this,l,g)},replaceChild:function(l,g){c(this,l,g,d),g&&this.removeChild(g)},removeChild:function(l){return xe(this,l)},appendChild:function(l){return this.insertBefore(l,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(l){return ot(this.ownerDocument||this,this,l)},normalize:function(){for(var l=this.firstChild;l;){var g=l.nextSibling;g&&g.nodeType==J&&l.nodeType==J?(this.removeChild(g),l.appendData(g.data)):(l.normalize(),l=g)}},isSupported:function(l,g){return this.ownerDocument.implementation.hasFeature(l,g)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(l){for(var g=this;g;){var R=g._nsMap;if(R){for(var H in R)if(Object.prototype.hasOwnProperty.call(R,H)&&R[H]===l)return H}g=g.nodeType==N?g.ownerDocument:g.parentNode}return null},lookupNamespaceURI:function(l){for(var g=this;g;){var R=g._nsMap;if(R&&Object.prototype.hasOwnProperty.call(R,l))return R[l];g=g.nodeType==N?g.ownerDocument:g.parentNode}return null},isDefaultNamespace:function(l){var g=this.lookupPrefix(l);return g==null}};function oe(l){return l=="<"&&"&lt;"||l==">"&&"&gt;"||l=="&"&&"&amp;"||l=='"'&&"&quot;"||"&#"+l.charCodeAt()+";"}D(j,$),D(j,$.prototype);function pe(l,g){if(g(l))return!0;if(l=l.firstChild)do if(pe(l,g))return!0;while(l=l.nextSibling)}function Ee(){this.ownerDocument=this}function ve(l,g,R){l&&l._inc++;var H=R.namespaceURI;H===i.XMLNS&&(g._nsMap[R.prefix?R.localName:""]=R.value)}function me(l,g,R,H){l&&l._inc++;var he=R.namespaceURI;he===i.XMLNS&&delete g._nsMap[R.prefix?R.localName:""]}function Ce(l,g,R){if(l&&l._inc){l._inc++;var H=g.childNodes;if(R)H[H.length++]=R;else{for(var he=g.firstChild,_e=0;he;)H[_e++]=he,he=he.nextSibling;H.length=_e,delete H[H.length]}}}function xe(l,g){var R=g.previousSibling,H=g.nextSibling;return R?R.nextSibling=H:l.firstChild=H,H?H.previousSibling=R:l.lastChild=R,g.parentNode=null,g.previousSibling=null,g.nextSibling=null,Ce(l.ownerDocument,l),g}function ke(l){return l&&(l.nodeType===$.DOCUMENT_NODE||l.nodeType===$.DOCUMENT_FRAGMENT_NODE||l.nodeType===$.ELEMENT_NODE)}function Ae(l){return l&&(Oe(l)||ae(l)||Ie(l)||l.nodeType===$.DOCUMENT_FRAGMENT_NODE||l.nodeType===$.COMMENT_NODE||l.nodeType===$.PROCESSING_INSTRUCTION_NODE)}function Ie(l){return l&&l.nodeType===$.DOCUMENT_TYPE_NODE}function Oe(l){return l&&l.nodeType===$.ELEMENT_NODE}function ae(l){return l&&l.nodeType===$.TEXT_NODE}function A(l,g){var R=l.childNodes||[];if(a(R,Oe)||Ie(g))return!1;var H=a(R,Ie);return!(g&&H&&R.indexOf(H)>R.indexOf(g))}function z(l,g){var R=l.childNodes||[];function H(_e){return Oe(_e)&&_e!==g}if(a(R,H))return!1;var he=a(R,Ie);return!(g&&he&&R.indexOf(he)>R.indexOf(g))}function v(l,g,R){if(!ke(l))throw new W(O,"Unexpected parent node type "+l.nodeType);if(R&&R.parentNode!==l)throw new W(q,"child not in parent");if(!Ae(g)||Ie(g)&&l.nodeType!==$.DOCUMENT_NODE)throw new W(O,"Unexpected node type "+g.nodeType+" for parent node type "+l.nodeType)}function u(l,g,R){var H=l.childNodes||[],he=g.childNodes||[];if(g.nodeType===$.DOCUMENT_FRAGMENT_NODE){var _e=he.filter(Oe);if(_e.length>1||a(he,ae))throw new W(O,"More than one element or text in fragment");if(_e.length===1&&!A(l,R))throw new W(O,"Element in fragment can not be inserted before doctype")}if(Oe(g)&&!A(l,R))throw new W(O,"Only one element can be added and only after doctype");if(Ie(g)){if(a(H,Ie))throw new W(O,"Only one doctype is allowed");var Ue=a(H,Oe);if(R&&H.indexOf(Ue)<H.indexOf(R))throw new W(O,"Doctype can only be inserted before an element");if(!R&&Ue)throw new W(O,"Doctype can not be appended since element is present")}}function d(l,g,R){var H=l.childNodes||[],he=g.childNodes||[];if(g.nodeType===$.DOCUMENT_FRAGMENT_NODE){var _e=he.filter(Oe);if(_e.length>1||a(he,ae))throw new W(O,"More than one element or text in fragment");if(_e.length===1&&!z(l,R))throw new W(O,"Element in fragment can not be inserted before doctype")}if(Oe(g)&&!z(l,R))throw new W(O,"Only one element can be added and only after doctype");if(Ie(g)){if(a(H,function(Qe){return Ie(Qe)&&Qe!==R}))throw new W(O,"Only one doctype is allowed");var Ue=a(H,Oe);if(R&&H.indexOf(Ue)<H.indexOf(R))throw new W(O,"Doctype can only be inserted before an element")}}function c(l,g,R,H){v(l,g,R),l.nodeType===$.DOCUMENT_NODE&&(H||u)(l,g,R);var he=g.parentNode;if(he&&he.removeChild(g),g.nodeType===K){var _e=g.firstChild;if(_e==null)return g;var Ue=g.lastChild}else _e=Ue=g;var fe=R?R.previousSibling:l.lastChild;_e.previousSibling=fe,Ue.nextSibling=R,fe?fe.nextSibling=_e:l.firstChild=_e,R==null?l.lastChild=Ue:R.previousSibling=Ue;do _e.parentNode=l;while(_e!==Ue&&(_e=_e.nextSibling));return Ce(l.ownerDocument||l,l),g.nodeType==K&&(g.firstChild=g.lastChild=null),g}function m(l,g){return g.parentNode&&g.parentNode.removeChild(g),g.parentNode=l,g.previousSibling=l.lastChild,g.nextSibling=null,g.previousSibling?g.previousSibling.nextSibling=g:l.firstChild=g,l.lastChild=g,Ce(l.ownerDocument,l,g),g}Ee.prototype={nodeName:"#document",nodeType:V,doctype:null,documentElement:null,_inc:1,insertBefore:function(l,g){if(l.nodeType==K){for(var R=l.firstChild;R;){var H=R.nextSibling;this.insertBefore(R,g),R=H}return l}return c(this,l,g),l.ownerDocument=this,this.documentElement===null&&l.nodeType===P&&(this.documentElement=l),l},removeChild:function(l){return this.documentElement==l&&(this.documentElement=null),xe(this,l)},replaceChild:function(l,g){c(this,l,g,d),l.ownerDocument=this,g&&this.removeChild(g),Oe(l)&&(this.documentElement=l)},importNode:function(l,g){return st(this,l,g)},getElementById:function(l){var g=null;return pe(this.documentElement,function(R){if(R.nodeType==P&&R.getAttribute("id")==l)return g=R,!0}),g},getElementsByClassName:function(l){var g=T(l);return new ie(this,function(R){var H=[];return g.length>0&&pe(R.documentElement,function(he){if(he!==R&&he.nodeType===P){var _e=he.getAttribute("class");if(_e){var Ue=l===_e;if(!Ue){var fe=T(_e);Ue=g.every(k(fe))}Ue&&H.push(he)}}}),H})},createElement:function(l){var g=new I;g.ownerDocument=this,g.nodeName=l,g.tagName=l,g.localName=l,g.childNodes=new Y;var R=g.attributes=new le;return R._ownerElement=g,g},createDocumentFragment:function(){var l=new Ke;return l.ownerDocument=this,l.childNodes=new Y,l},createTextNode:function(l){var g=new ge;return g.ownerDocument=this,g.appendData(l),g},createComment:function(l){var g=new ye;return g.ownerDocument=this,g.appendData(l),g},createCDATASection:function(l){var g=new ne;return g.ownerDocument=this,g.appendData(l),g},createProcessingInstruction:function(l,g){var R=new qe;return R.ownerDocument=this,R.tagName=R.target=l,R.nodeValue=R.data=g,R},createAttribute:function(l){var g=new U;return g.ownerDocument=this,g.name=l,g.nodeName=l,g.localName=l,g.specified=!0,g},createEntityReference:function(l){var g=new Fe;return g.ownerDocument=this,g.nodeName=l,g},createElementNS:function(l,g){var R=new I,H=g.split(":"),he=R.attributes=new le;return R.childNodes=new Y,R.ownerDocument=this,R.nodeName=g,R.tagName=g,R.namespaceURI=l,H.length==2?(R.prefix=H[0],R.localName=H[1]):R.localName=g,he._ownerElement=R,R},createAttributeNS:function(l,g){var R=new U,H=g.split(":");return R.ownerDocument=this,R.nodeName=g,R.name=g,R.namespaceURI=l,R.specified=!0,H.length==2?(R.prefix=H[0],R.localName=H[1]):R.localName=g,R}},F(Ee,$);function I(){this._nsMap={}}I.prototype={nodeType:P,hasAttribute:function(l){return this.getAttributeNode(l)!=null},getAttribute:function(l){var g=this.getAttributeNode(l);return g&&g.value||""},getAttributeNode:function(l){return this.attributes.getNamedItem(l)},setAttribute:function(l,g){var R=this.ownerDocument.createAttribute(l);R.value=R.nodeValue=""+g,this.setAttributeNode(R)},removeAttribute:function(l){var g=this.getAttributeNode(l);g&&this.removeAttributeNode(g)},appendChild:function(l){return l.nodeType===K?this.insertBefore(l,null):m(this,l)},setAttributeNode:function(l){return this.attributes.setNamedItem(l)},setAttributeNodeNS:function(l){return this.attributes.setNamedItemNS(l)},removeAttributeNode:function(l){return this.attributes.removeNamedItem(l.nodeName)},removeAttributeNS:function(l,g){var R=this.getAttributeNodeNS(l,g);R&&this.removeAttributeNode(R)},hasAttributeNS:function(l,g){return this.getAttributeNodeNS(l,g)!=null},getAttributeNS:function(l,g){var R=this.getAttributeNodeNS(l,g);return R&&R.value||""},setAttributeNS:function(l,g,R){var H=this.ownerDocument.createAttributeNS(l,g);H.value=H.nodeValue=""+R,this.setAttributeNode(H)},getAttributeNodeNS:function(l,g){return this.attributes.getNamedItemNS(l,g)},getElementsByTagName:function(l){return new ie(this,function(g){var R=[];return pe(g,function(H){H!==g&&H.nodeType==P&&(l==="*"||H.tagName==l)&&R.push(H)}),R})},getElementsByTagNameNS:function(l,g){return new ie(this,function(R){var H=[];return pe(R,function(he){he!==R&&he.nodeType===P&&(l==="*"||he.namespaceURI===l)&&(g==="*"||he.localName==g)&&H.push(he)}),H})}},Ee.prototype.getElementsByTagName=I.prototype.getElementsByTagName,Ee.prototype.getElementsByTagNameNS=I.prototype.getElementsByTagNameNS,F(I,$);function U(){}U.prototype.nodeType=N,F(U,$);function ee(){}ee.prototype={data:"",substringData:function(l,g){return this.data.substring(l,l+g)},appendData:function(l){l=this.data+l,this.nodeValue=this.data=l,this.length=l.length},insertData:function(l,g){this.replaceData(l,0,g)},appendChild:function(l){throw new Error(re[O])},deleteData:function(l,g){this.replaceData(l,g,"")},replaceData:function(l,g,R){var H=this.data.substring(0,l),he=this.data.substring(l+g);R=H+R+he,this.nodeValue=this.data=R,this.length=R.length}},F(ee,$);function ge(){}ge.prototype={nodeName:"#text",nodeType:J,splitText:function(l){var g=this.data,R=g.substring(l);g=g.substring(0,l),this.data=this.nodeValue=g,this.length=g.length;var H=this.ownerDocument.createTextNode(R);return this.parentNode&&this.parentNode.insertBefore(H,this.nextSibling),H}},F(ge,ee);function ye(){}ye.prototype={nodeName:"#comment",nodeType:S},F(ye,ee);function ne(){}ne.prototype={nodeName:"#cdata-section",nodeType:Q},F(ne,ee);function Be(){}Be.prototype.nodeType=y,F(Be,$);function Te(){}Te.prototype.nodeType=L,F(Te,$);function Me(){}Me.prototype.nodeType=B,F(Me,$);function Fe(){}Fe.prototype.nodeType=se,F(Fe,$);function Ke(){}Ke.prototype.nodeName="#document-fragment",Ke.prototype.nodeType=K,F(Ke,$);function qe(){}qe.prototype.nodeType=C,F(qe,$);function Ve(){}Ve.prototype.serializeToString=function(l,g,R){return Xe.call(l,g,R)},$.prototype.toString=Xe;function Xe(l,g){var R=[],H=this.nodeType==9&&this.documentElement||this,he=H.prefix,_e=H.namespaceURI;if(_e&&he==null){var he=H.lookupPrefix(_e);if(he==null)var Ue=[{namespace:_e,prefix:null}]}return We(this,R,l,g,Ue),R.join("")}function ze(l,g,R){var H=l.prefix||"",he=l.namespaceURI;if(!he||H==="xml"&&he===i.XML||he===i.XMLNS)return!1;for(var _e=R.length;_e--;){var Ue=R[_e];if(Ue.prefix===H)return Ue.namespace!==he}return!0}function Ge(l,g,R){l.push(" ",g,'="',R.replace(/[<>&"\t\n\r]/g,oe),'"')}function We(l,g,R,H,he){if(he||(he=[]),H)if(l=H(l),l){if(typeof l=="string"){g.push(l);return}}else return;switch(l.nodeType){case P:var _e=l.attributes,Ue=_e.length,w=l.firstChild,fe=l.tagName;R=i.isHTML(l.namespaceURI)||R;var Qe=fe;if(!R&&!l.prefix&&l.namespaceURI){for(var Ye,Je=0;Je<_e.length;Je++)if(_e.item(Je).name==="xmlns"){Ye=_e.item(Je).value;break}if(!Ye)for(var n=he.length-1;n>=0;n--){var p=he[n];if(p.prefix===""&&p.namespace===l.namespaceURI){Ye=p.namespace;break}}if(Ye!==l.namespaceURI)for(var n=he.length-1;n>=0;n--){var p=he[n];if(p.namespace===l.namespaceURI){p.prefix&&(Qe=p.prefix+":"+fe);break}}}g.push("<",Qe);for(var s=0;s<Ue;s++){var f=_e.item(s);f.prefix=="xmlns"?he.push({prefix:f.localName,namespace:f.value}):f.nodeName=="xmlns"&&he.push({prefix:"",namespace:f.value})}for(var s=0;s<Ue;s++){var f=_e.item(s);if(ze(f,R,he)){var b=f.prefix||"",E=f.namespaceURI;Ge(g,b?"xmlns:"+b:"xmlns",E),he.push({prefix:b,namespace:E})}We(f,g,R,H,he)}if(fe===Qe&&ze(l,R,he)){var b=l.prefix||"",E=l.namespaceURI;Ge(g,b?"xmlns:"+b:"xmlns",E),he.push({prefix:b,namespace:E})}if(w||R&&!/^(?:meta|link|img|br|hr|input)$/i.test(fe)){if(g.push(">"),R&&/^script$/i.test(fe))for(;w;)w.data?g.push(w.data):We(w,g,R,H,he.slice()),w=w.nextSibling;else for(;w;)We(w,g,R,H,he.slice()),w=w.nextSibling;g.push("</",Qe,">")}else g.push("/>");return;case V:case K:for(var w=l.firstChild;w;)We(w,g,R,H,he.slice()),w=w.nextSibling;return;case N:return Ge(g,l.name,l.value);case J:return g.push(l.data.replace(/[<&>]/g,oe));case Q:return g.push("<![CDATA[",l.data,"]]>");case S:return g.push("<!--",l.data,"-->");case y:var M=l.publicId,Z=l.systemId;if(g.push("<!DOCTYPE ",l.name),M)g.push(" PUBLIC ",M),Z&&Z!="."&&g.push(" ",Z),g.push(">");else if(Z&&Z!=".")g.push(" SYSTEM ",Z,">");else{var De=l.internalSubset;De&&g.push(" [",De,"]"),g.push(">")}return;case C:return g.push("<?",l.target," ",l.data,"?>");case se:return g.push("&",l.nodeName,";");default:g.push("??",l.nodeName)}}function st(l,g,R){var H;switch(g.nodeType){case P:H=g.cloneNode(!1),H.ownerDocument=l;case K:break;case N:R=!0;break}if(H||(H=g.cloneNode(!1)),H.ownerDocument=l,H.parentNode=null,R)for(var he=g.firstChild;he;)H.appendChild(st(l,he,R)),he=he.nextSibling;return H}function ot(l,g,R){var H=new g.constructor;for(var he in g)if(Object.prototype.hasOwnProperty.call(g,he)){var _e=g[he];typeof _e!="object"&&_e!=H[he]&&(H[he]=_e)}switch(g.childNodes&&(H.childNodes=new Y),H.ownerDocument=l,H.nodeType){case P:var Ue=g.attributes,fe=H.attributes=new le,Qe=Ue.length;fe._ownerElement=H;for(var Ye=0;Ye<Qe;Ye++)H.setAttributeNode(ot(l,Ue.item(Ye),!0));break;case N:R=!0}if(R)for(var Je=g.firstChild;Je;)H.appendChild(ot(l,Je,R)),Je=Je.nextSibling;return H}function tt(l,g,R){l[g]=R}try{if(Object.defineProperty){let l=function(g){switch(g.nodeType){case P:case K:var R=[];for(g=g.firstChild;g;)g.nodeType!==7&&g.nodeType!==8&&R.push(l(g)),g=g.nextSibling;return R.join("");default:return g.nodeValue}};Object.defineProperty(ie.prototype,"length",{get:function(){return ue(this),this.$$length}}),Object.defineProperty($.prototype,"textContent",{get:function(){return l(this)},set:function(g){switch(this.nodeType){case P:case K:for(;this.firstChild;)this.removeChild(this.firstChild);(g||String(g))&&this.appendChild(this.ownerDocument.createTextNode(g));break;default:this.data=g,this.value=g,this.nodeValue=g}}}),tt=function(g,R,H){g["$$"+R]=H}}}catch{}e.DocumentType=Be,e.DOMException=W,e.DOMImplementation=Se,e.Element=I,e.Node=$,e.NodeList=Y,e.XMLSerializer=Ve},"./node_modules/@xmldom/xmldom/lib/entities.js":function(o,e,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;e.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=r({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),e.entityMap=e.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":function(o,e,t){var r=t("./node_modules/@xmldom/xmldom/lib/dom.js");e.DOMImplementation=r.DOMImplementation,e.XMLSerializer=r.XMLSerializer,e.DOMParser=t("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":function(o,e,t){var r=t("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE,a=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+a.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),h=new RegExp("^"+a.source+i.source+"*(?::"+a.source+i.source+"*)?$"),x=0,_=1,T=2,k=3,D=4,F=5,j=6,P=7;function N(O,q){this.message=O,this.locator=q,Error.captureStackTrace&&Error.captureStackTrace(this,N)}N.prototype=new Error,N.prototype.name=N.name;function J(){}J.prototype={parse:function(O,q,X){var W=this.domBuilder;W.startDocument(),y(q,q={}),Q(O,q,X,W,this.errorHandler),W.endDocument()}};function Q(O,q,X,W,Y){function ie(I){if(I>65535){I-=65536;var U=55296+(I>>10),ee=56320+(I&1023);return String.fromCharCode(U,ee)}else return String.fromCharCode(I)}function ue(I){var U=I.slice(1,-1);return Object.hasOwnProperty.call(X,U)?X[U]:U.charAt(0)==="#"?ie(parseInt(U.substr(1).replace("x","0x"))):(Y.error("entity not found:"+I),I)}function le(I){if(I>Ee){var U=O.substring(Ee,I).replace(/&#?\w+;/g,ue);$&&te(Ee),W.characters(U,0,I-Ee),Ee=I}}function te(I,U){for(;I>=ce&&(U=Se.exec(O));)de=U.index,ce=de+U[0].length,$.lineNumber++;$.columnNumber=I-de+1}for(var de=0,ce=0,Se=/.*(?:\r\n?|\n)|.*$/g,$=W.locator,oe=[{currentNSMap:q}],pe={},Ee=0;;){try{var ve=O.indexOf("<",Ee);if(ve<0){if(!O.substr(Ee).match(/^\s*$/)){var me=W.doc,Ce=me.createTextNode(O.substr(Ee));me.appendChild(Ce),W.currentElement=Ce}return}switch(ve>Ee&&le(ve),O.charAt(ve+1)){case"/":var v=O.indexOf(">",ve+3),xe=O.substring(ve+2,v).replace(/[ \t\n\r]+$/g,""),ke=oe.pop();v<0?(xe=O.substring(ve+2).replace(/[\s<].*/,""),Y.error("end tag name: "+xe+" is not complete:"+ke.tagName),v=ve+1+xe.length):xe.match(/\s</)&&(xe=xe.replace(/[\s<].*/,""),Y.error("end tag name: "+xe+" maybe not complete"),v=ve+1+xe.length);var Ae=ke.localNSMap,Ie=ke.tagName==xe,Oe=Ie||ke.tagName&&ke.tagName.toLowerCase()==xe.toLowerCase();if(Oe){if(W.endElement(ke.uri,ke.localName,xe),Ae)for(var ae in Ae)Object.prototype.hasOwnProperty.call(Ae,ae)&&W.endPrefixMapping(ae);Ie||Y.fatalError("end tag name: "+xe+" is not match the current start tagName:"+ke.tagName)}else oe.push(ke);v++;break;case"?":$&&te(ve),v=L(O,ve,W);break;case"!":$&&te(ve),v=K(O,ve,W,Y);break;default:$&&te(ve);var A=new G,z=oe[oe.length-1].currentNSMap,v=B(O,ve,A,z,ue,Y),u=A.length;if(!A.closed&&V(O,v,A.tagName,pe)&&(A.closed=!0,X.nbsp||Y.warning("unclosed xml attribute")),$&&u){for(var d=se($,{}),c=0;c<u;c++){var m=A[c];te(m.offset),m.locator=se($,{})}W.locator=d,C(A,W,z)&&oe.push(A),W.locator=$}else C(A,W,z)&&oe.push(A);r.isHTML(A.uri)&&!A.closed?v=S(O,v,A.tagName,ue,W):v++}}catch(I){if(I instanceof N)throw I;Y.error("element parse error: "+I),v=-1}v>Ee?Ee=v:le(Math.max(ve,Ee)+1)}}function se(O,q){return q.lineNumber=O.lineNumber,q.columnNumber=O.columnNumber,q}function B(O,q,X,W,Y,ie){function ue($,oe,pe){X.attributeNames.hasOwnProperty($)&&ie.fatalError("Attribute "+$+" redefined"),X.addValue($,oe.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Y),pe)}for(var le,te,de=++q,ce=x;;){var Se=O.charAt(de);switch(Se){case"=":if(ce===_)le=O.slice(q,de),ce=k;else if(ce===T)ce=k;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ce===k||ce===_)if(ce===_&&(ie.warning('attribute value must after "="'),le=O.slice(q,de)),q=de+1,de=O.indexOf(Se,q),de>0)te=O.slice(q,de),ue(le,te,q-1),ce=F;else throw new Error("attribute value no end '"+Se+"' match");else if(ce==D)te=O.slice(q,de),ue(le,te,q),ie.warning('attribute "'+le+'" missed start quot('+Se+")!!"),q=de+1,ce=F;else throw new Error('attribute value must after "="');break;case"/":switch(ce){case x:X.setTagName(O.slice(q,de));case F:case j:case P:ce=P,X.closed=!0;case D:case _:case T:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ie.error("unexpected end of input"),ce==x&&X.setTagName(O.slice(q,de)),de;case">":switch(ce){case x:X.setTagName(O.slice(q,de));case F:case j:case P:break;case D:case _:te=O.slice(q,de),te.slice(-1)==="/"&&(X.closed=!0,te=te.slice(0,-1));case T:ce===T&&(te=le),ce==D?(ie.warning('attribute "'+te+'" missed quot(")!'),ue(le,te,q)):((!r.isHTML(W[""])||!te.match(/^(?:disabled|checked|selected)$/i))&&ie.warning('attribute "'+te+'" missed value!! "'+te+'" instead!!'),ue(te,te,q));break;case k:throw new Error("attribute value missed!!")}return de;case"":Se=" ";default:if(Se<=" ")switch(ce){case x:X.setTagName(O.slice(q,de)),ce=j;break;case _:le=O.slice(q,de),ce=T;break;case D:var te=O.slice(q,de);ie.warning('attribute "'+te+'" missed quot(")!!'),ue(le,te,q);case F:ce=j;break}else switch(ce){case T:X.tagName,(!r.isHTML(W[""])||!le.match(/^(?:disabled|checked|selected)$/i))&&ie.warning('attribute "'+le+'" missed value!! "'+le+'" instead2!!'),ue(le,le,q),q=de,ce=_;break;case F:ie.warning('attribute space is required"'+le+'"!!');case j:ce=_,q=de;break;case k:ce=D,q=de;break;case P:throw new Error("elements closed character '/' and '>' must be connected to")}}de++}}function C(O,q,X){for(var W=O.tagName,Y=null,Se=O.length;Se--;){var ie=O[Se],ue=ie.qName,le=ie.value,$=ue.indexOf(":");if($>0)var te=ie.prefix=ue.slice(0,$),de=ue.slice($+1),ce=te==="xmlns"&&de;else de=ue,te=null,ce=ue==="xmlns"&&"";ie.localName=de,ce!==!1&&(Y==null&&(Y={},y(X,X={})),X[ce]=Y[ce]=le,ie.uri=r.XMLNS,q.startPrefixMapping(ce,le))}for(var Se=O.length;Se--;){ie=O[Se];var te=ie.prefix;te&&(te==="xml"&&(ie.uri=r.XML),te!=="xmlns"&&(ie.uri=X[te||""]))}var $=W.indexOf(":");$>0?(te=O.prefix=W.slice(0,$),de=O.localName=W.slice($+1)):(te=null,de=O.localName=W);var oe=O.uri=X[te||""];if(q.startElement(oe,de,W,O),O.closed){if(q.endElement(oe,de,W),Y)for(te in Y)Object.prototype.hasOwnProperty.call(Y,te)&&q.endPrefixMapping(te)}else return O.currentNSMap=X,O.localNSMap=Y,!0}function S(O,q,X,W,Y){if(/^(?:script|textarea)$/i.test(X)){var ie=O.indexOf("</"+X+">",q),ue=O.substring(q+1,ie);if(/[&<]/.test(ue))return/^script$/i.test(X)?(Y.characters(ue,0,ue.length),ie):(ue=ue.replace(/&#?\w+;/g,W),Y.characters(ue,0,ue.length),ie)}return q+1}function V(O,q,X,W){var Y=W[X];return Y==null&&(Y=O.lastIndexOf("</"+X+">"),Y<q&&(Y=O.lastIndexOf("</"+X)),W[X]=Y),Y<q}function y(O,q){for(var X in O)Object.prototype.hasOwnProperty.call(O,X)&&(q[X]=O[X])}function K(O,q,X,W){var Y=O.charAt(q+2);switch(Y){case"-":if(O.charAt(q+3)==="-"){var ie=O.indexOf("-->",q+4);return ie>q?(X.comment(O,q+4,ie-q-4),ie+3):(W.error("Unclosed comment"),-1)}else return-1;default:if(O.substr(q+3,6)=="CDATA["){var ie=O.indexOf("]]>",q+9);return X.startCDATA(),X.characters(O,q+9,ie-q-9),X.endCDATA(),ie+3}var ue=re(O,q),le=ue.length;if(le>1&&/!doctype/i.test(ue[0][0])){var te=ue[1][0],de=!1,ce=!1;le>3&&(/^public$/i.test(ue[2][0])?(de=ue[3][0],ce=le>4&&ue[4][0]):/^system$/i.test(ue[2][0])&&(ce=ue[3][0]));var Se=ue[le-1];return X.startDTD(te,de,ce),X.endDTD(),Se.index+Se[0].length}}return-1}function L(O,q,X){var W=O.indexOf("?>",q);if(W){var Y=O.substring(q,W).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Y?(Y[0].length,X.processingInstruction(Y[1],Y[2]),W+2):-1}return-1}function G(){this.attributeNames={}}G.prototype={setTagName:function(O){if(!h.test(O))throw new Error("invalid tagName:"+O);this.tagName=O},addValue:function(O,q,X){if(!h.test(O))throw new Error("invalid attribute:"+O);this.attributeNames[O]=this.length,this[this.length++]={qName:O,value:q,offset:X}},length:0,getLocalName:function(O){return this[O].localName},getLocator:function(O){return this[O].locator},getQName:function(O){return this[O].qName},getURI:function(O){return this[O].uri},getValue:function(O){return this[O].value}};function re(O,q){var X,W=[],Y=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Y.lastIndex=q,Y.exec(O);X=Y.exec(O);)if(W.push(X),X[1])return W}e.XMLReader=J,e.ParseError=N},"./node_modules/process/browser.js":function(o,e){var t=o.exports={},r,a;function i(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=i}catch{r=i}try{typeof clearTimeout=="function"?a=clearTimeout:a=h}catch{a=h}})();function x(Q){if(r===setTimeout)return setTimeout(Q,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(Q,0);try{return r(Q,0)}catch{try{return r.call(null,Q,0)}catch{return r.call(this,Q,0)}}}function _(Q){if(a===clearTimeout)return clearTimeout(Q);if((a===h||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(Q);try{return a(Q)}catch{try{return a.call(null,Q)}catch{return a.call(this,Q)}}}var T=[],k=!1,D,F=-1;function j(){!k||!D||(k=!1,D.length?T=D.concat(T):F=-1,T.length&&P())}function P(){if(!k){var Q=x(j);k=!0;for(var se=T.length;se;){for(D=T,T=[];++F<se;)D&&D[F].run();F=-1,se=T.length}D=null,k=!1,_(Q)}}t.nextTick=function(Q){var se=new Array(arguments.length-1);if(arguments.length>1)for(var B=1;B<arguments.length;B++)se[B-1]=arguments[B];T.push(new N(Q,se)),T.length===1&&!k&&x(P)};function N(Q,se){this.fun=Q,this.array=se}N.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function J(){}t.on=J,t.addListener=J,t.once=J,t.off=J,t.removeListener=J,t.removeAllListeners=J,t.emit=J,t.prependListener=J,t.prependOnceListener=J,t.listeners=function(Q){return[]},t.binding=function(Q){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(Q){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},"./node_modules/webpack/buildin/amd-options.js":function(o,e){(function(t){o.exports=t}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(o,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}o.exports=t},"./node_modules/webpack/buildin/module.js":function(o,e){o.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"./package.json":function(o){o.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.4.18","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js test/test.js server/sts.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"@xmldom/xmldom":"^0.8.6"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","prettier":"2.8.8","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(o,e,t){var r=t("./node_modules/@babel/runtime/helpers/typeof.js"),a=t("./src/session.js"),i=t("./src/async.js"),h=t("./src/event.js").EventProxy,x=t("./src/util.js"),_=t("./src/tracker.js");function T(y,K){var L=this,G=new h,re=y.TaskId,O=y.Bucket,q=y.Region,X=y.Key,W=y.Body,Y=y.ChunkSize||y.SliceSize||L.options.ChunkSize,ie=y.AsyncLimit,ue=y.StorageClass,le=y.ServerSideEncryption,te,de,ce=y.onHashProgress,Se=y.tracker;Se&&Se.setParams({chunkSize:Y}),G.on("error",function($){if(L._isRunningTask(re))return $.UploadId=y.UploadData.UploadId||"",K($)}),G.on("upload_complete",function($){var oe=x.extend({UploadId:y.UploadData.UploadId||""},$);K(null,oe)}),G.on("upload_slice_complete",function($){var oe={};x.each(y.Headers,function(pe,Ee){var ve=Ee.toLowerCase();(ve.indexOf("x-cos-meta-")===0||ve==="pic-operations")&&(oe[Ee]=pe)}),N.call(L,{Bucket:O,Region:q,Key:X,UploadId:$.UploadId,SliceList:$.SliceList,Headers:oe,tracker:Se},function(pe,Ee){if(L._isRunningTask(re)){if(a.removeUsing($.UploadId),pe)return de(null,!0),G.emit("error",pe);a.removeUploadId.call(L,$.UploadId),de({loaded:te,total:te},!0),G.emit("upload_complete",Ee)}})}),G.on("get_upload_data_finish",function($){var oe=a.getFileId(W,y.ChunkSize,O,X);oe&&a.saveUploadId.call(L,oe,$.UploadId,L.options.UploadIdCacheLimit),a.setUsing($.UploadId),de(null,!0),j.call(L,{TaskId:re,Bucket:O,Region:q,Key:X,Body:W,FileSize:te,SliceSize:Y,AsyncLimit:ie,ServerSideEncryption:le,UploadData:$,Headers:y.Headers,onProgress:de,tracker:Se},function(pe,Ee){if(L._isRunningTask(re)){if(pe)return de(null,!0),G.emit("error",pe);G.emit("upload_slice_complete",Ee)}})}),G.on("get_file_size_finish",function(){if(de=x.throttleOnProgress.call(L,te,y.onProgress),y.UploadData.UploadId)G.emit("get_upload_data_finish",y.UploadData);else{var $=x.extend({TaskId:re,Bucket:O,Region:q,Key:X,Headers:y.Headers,StorageClass:ue,Body:W,FileSize:te,SliceSize:Y,onHashProgress:ce,tracker:Se},y);k.call(L,$,function(oe,pe){if(L._isRunningTask(re)){if(oe)return G.emit("error",oe);y.UploadData.UploadId=pe.UploadId,y.UploadData.PartList=pe.PartList,G.emit("get_upload_data_finish",y.UploadData)}})}}),te=y.ContentLength,delete y.ContentLength,!y.Headers&&(y.Headers={}),x.each(y.Headers,function($,oe){oe.toLowerCase()==="content-length"&&delete y.Headers[oe]}),function(){for(var $=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],oe=1024*1024,pe=0;pe<$.length&&(oe=$[pe]*1024*1024,!(te/oe<=L.options.MaxPartNumber));pe++);y.ChunkSize=y.SliceSize=Y=Math.max(Y,oe)}(),te===0?(y.Body="",y.ContentLength=0,y.SkipTask=!0,L.putObject(y,K)):G.emit("get_file_size_finish")}function k(y,K){var L=y.TaskId,G=y.Bucket,re=y.Region,O=y.Key,q=y.StorageClass,X=this,W={},Y=y.FileSize,ie=y.SliceSize,ue=Math.ceil(Y/ie),le=0,te=x.throttleOnProgress.call(X,Y,y.onHashProgress),de=function(oe,pe){var Ee=ie*(oe-1),ve=Math.min(Ee+ie,Y),me=ve-Ee;W[oe]?pe(null,{PartNumber:oe,ETag:W[oe],Size:me}):x.fileSlice(y.Body,Ee,ve,!1,function(Ce){x.getFileMd5(Ce,function(xe,ke){if(xe)return pe(x.error(xe));var Ae='"'+ke+'"';W[oe]=Ae,le+=me,te({loaded:le,total:Y}),pe(null,{PartNumber:oe,ETag:Ae,Size:me})})})},ce=function(oe,pe){var Ee=oe.length;if(Ee===0)return pe(null,!0);if(Ee>ue)return pe(null,!1);if(Ee>1){var ve=Math.max(oe[0].Size,oe[1].Size);if(ve!==ie)return pe(null,!1)}var me=function Ce(xe){if(xe<Ee){var ke=oe[xe];de(ke.PartNumber,function(Ae,Ie){Ie&&Ie.ETag===ke.ETag&&Ie.Size===ke.Size?Ce(xe+1):pe(null,!1)})}else pe(null,!0)};me(0)},Se=new h;Se.on("error",function($){if(X._isRunningTask(L))return K($)}),Se.on("upload_id_available",function($){var oe={},pe=[];x.each($.PartList,function(me){oe[me.PartNumber]=me});for(var Ee=1;Ee<=ue;Ee++){var ve=oe[Ee];ve?(ve.PartNumber=Ee,ve.Uploaded=!0):ve={PartNumber:Ee,ETag:null,Uploaded:!1},pe.push(ve)}$.PartList=pe,K(null,$)}),Se.on("no_available_upload_id",function(){if(X._isRunningTask(L)){var $=x.extend({Bucket:G,Region:re,Key:O,Query:x.clone(y.Query),StorageClass:q,Body:y.Body,calledBySdk:"sliceUploadFile",tracker:y.tracker},y),oe=x.clone(y.Headers);delete oe["x-cos-mime-limit"],$.Headers=oe,X.multipartInit($,function(pe,Ee){if(X._isRunningTask(L)){if(pe)return Se.emit("error",pe);var ve=Ee.UploadId;if(!ve)return K(x.error(new Error("no such upload id")));Se.emit("upload_id_available",{UploadId:ve,PartList:[]})}})}}),Se.on("has_and_check_upload_id",function($){$=$.reverse(),i.eachLimit($,1,function(oe,pe){if(X._isRunningTask(L)){if(a.using[oe]){pe();return}F.call(X,{Bucket:G,Region:re,Key:O,UploadId:oe,tracker:y.tracker},function(Ee,ve){if(X._isRunningTask(L)){if(Ee)return a.removeUsing(oe),Se.emit("error",Ee);var me=ve.PartList;me.forEach(function(Ce){Ce.PartNumber*=1,Ce.Size*=1,Ce.ETag=Ce.ETag||""}),ce(me,function(Ce,xe){if(X._isRunningTask(L)){if(Ce)return Se.emit("error",Ce);xe?pe({UploadId:oe,PartList:me}):pe()}})}})}},function(oe){X._isRunningTask(L)&&(te(null,!0),oe&&oe.UploadId?Se.emit("upload_id_available",oe):Se.emit("no_available_upload_id"))})}),Se.on("seek_local_avail_upload_id",function($){var oe=a.getFileId(y.Body,y.ChunkSize,G,O),pe=a.getUploadIdList.call(X,oe);if(!oe||!pe){Se.emit("has_and_check_upload_id",$);return}var Ee=function ve(me){if(me>=pe.length){Se.emit("has_and_check_upload_id",$);return}var Ce=pe[me];if(!x.isInArray($,Ce)){a.removeUploadId.call(X,Ce),ve(me+1);return}if(a.using[Ce]){ve(me+1);return}F.call(X,{Bucket:G,Region:re,Key:O,UploadId:Ce,tracker:y.tracker},function(xe,ke){X._isRunningTask(L)&&(xe?(a.removeUploadId.call(X,Ce),ve(me+1)):Se.emit("upload_id_available",{UploadId:Ce,PartList:ke.PartList}))})};Ee(0)}),Se.on("get_remote_upload_id_list",function(){D.call(X,{Bucket:G,Region:re,Key:O,tracker:y.tracker},function($,oe){if(X._isRunningTask(L)){if($)return Se.emit("error",$);var pe=x.filter(oe.UploadList,function(me){return me.Key===O&&(!q||me.StorageClass.toUpperCase()===q.toUpperCase())}).reverse().map(function(me){return me.UploadId||me.UploadID});if(pe.length)Se.emit("seek_local_avail_upload_id",pe);else{var Ee=a.getFileId(y.Body,y.ChunkSize,G,O),ve;Ee&&(ve=a.getUploadIdList.call(X,Ee))&&x.each(ve,function(me){a.removeUploadId.call(X,me)}),Se.emit("no_available_upload_id")}}})}),Se.emit("get_remote_upload_id_list")}function D(y,K){var L=this,G=[],re={Bucket:y.Bucket,Region:y.Region,Prefix:y.Key,calledBySdk:y.calledBySdk||"sliceUploadFile",tracker:y.tracker},O=function q(){L.multipartList(re,function(X,W){if(X)return K(X);G.push.apply(G,W.Upload||[]),W.IsTruncated==="true"?(re.KeyMarker=W.NextKeyMarker,re.UploadIdMarker=W.NextUploadIdMarker,q()):K(null,{UploadList:G})})};O()}function F(y,K){var L=this,G=[],re={Bucket:y.Bucket,Region:y.Region,Key:y.Key,UploadId:y.UploadId,calledBySdk:"sliceUploadFile",tracker:y.tracker},O=function q(){L.multipartListPart(re,function(X,W){if(X)return K(X);G.push.apply(G,W.Part||[]),W.IsTruncated==="true"?(re.PartNumberMarker=W.NextPartNumberMarker,q()):K(null,{PartList:G})})};O()}function j(y,K){var L=this,G=y.TaskId,re=y.Bucket,O=y.Region,q=y.Key,X=y.UploadData,W=y.FileSize,Y=y.SliceSize,ie=Math.min(y.AsyncLimit||L.options.ChunkParallelLimit||1,256),ue=y.Body,le=Math.ceil(W/Y),te=0,de=y.ServerSideEncryption,ce=y.Headers,Se=x.filter(X.PartList,function(oe){return oe.Uploaded&&(te+=oe.PartNumber>=le&&W%Y||Y),!oe.Uploaded}),$=y.onProgress;i.eachLimit(Se,ie,function(oe,pe){if(L._isRunningTask(G)){var Ee=oe.PartNumber,ve=Math.min(W,oe.PartNumber*Y)-(oe.PartNumber-1)*Y,me=0;P.call(L,{TaskId:G,Bucket:re,Region:O,Key:q,SliceSize:Y,FileSize:W,PartNumber:Ee,ServerSideEncryption:de,Body:ue,UploadData:X,Headers:ce,onProgress:function(xe){te+=xe.loaded-me,me=xe.loaded,$({loaded:te,total:W})},tracker:y.tracker},function(Ce,xe){L._isRunningTask(G)&&(!Ce&&!xe.ETag&&(Ce='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )'),Ce?te-=me:(te+=ve-me,oe.ETag=xe.ETag),$({loaded:te,total:W}),pe(Ce||null,xe))})}},function(oe){if(L._isRunningTask(G)){if(oe)return K(oe);K(null,{UploadId:X.UploadId,SliceList:X.PartList})}})}function P(y,K){var L=this,G=y.TaskId,re=y.Bucket,O=y.Region,q=y.Key,X=y.FileSize,W=y.Body,Y=y.PartNumber*1,ie=y.SliceSize,ue=y.ServerSideEncryption,le=y.UploadData,te=y.Headers||{},de=L.options.ChunkRetryTimes+1,ce=ie*(Y-1),Se=ie,$=ce+ie;$>X&&($=X,Se=$-ce);var oe=["x-cos-traffic-limit","x-cos-mime-limit"],pe={};x.each(te,function(ve,me){oe.indexOf(me)>-1&&(pe[me]=ve)});var Ee=le.PartList[Y-1];i.retry(de,function(ve){L._isRunningTask(G)&&x.fileSlice(W,ce,$,!0,function(me){L.multipartUpload({TaskId:G,Bucket:re,Region:O,Key:q,ContentLength:Se,PartNumber:Y,UploadId:le.UploadId,ServerSideEncryption:ue,Body:me,Headers:pe,onProgress:y.onProgress,calledBySdk:"sliceUploadFile",tracker:y.tracker},function(Ce,xe){if(L._isRunningTask(G))return Ce?ve(Ce):(Ee.Uploaded=!0,ve(null,xe))})})},function(ve,me){if(L._isRunningTask(G))return K(ve,me)})}function N(y,K){var L=y.Bucket,G=y.Region,re=y.Key,O=y.UploadId,q=y.SliceList,X=this,W=this.options.ChunkRetryTimes+1,Y=y.Headers,ie=q.map(function(ue){return{PartNumber:ue.PartNumber,ETag:ue.ETag}});i.retry(W,function(ue){X.multipartComplete({Bucket:L,Region:G,Key:re,UploadId:O,Parts:ie,Headers:Y,calledBySdk:"sliceUploadFile",tracker:y.tracker},ue)},function(ue,le){K(ue,le)})}function J(y,K){var L=y.Bucket,G=y.Region,re=y.Key,O=y.UploadId,q=y.Level||"task",X=y.AsyncLimit,W=this,Y=new h;if(Y.on("error",function(ie){return K(ie)}),Y.on("get_abort_array",function(ie){Q.call(W,{Bucket:L,Region:G,Key:re,Headers:y.Headers,AsyncLimit:X,AbortArray:ie},K)}),q==="bucket")D.call(W,{Bucket:L,Region:G,calledBySdk:"abortUploadTask"},function(ie,ue){if(ie)return K(ie);Y.emit("get_abort_array",ue.UploadList||[])});else if(q==="file"){if(!re)return K(x.error(new Error("abort_upload_task_no_key")));D.call(W,{Bucket:L,Region:G,Key:re,calledBySdk:"abortUploadTask"},function(ie,ue){if(ie)return K(ie);Y.emit("get_abort_array",ue.UploadList||[])})}else if(q==="task"){if(!O)return K(x.error(new Error("abort_upload_task_no_id")));if(!re)return K(x.error(new Error("abort_upload_task_no_key")));Y.emit("get_abort_array",[{Key:re,UploadId:O}])}else return K(x.error(new Error("abort_unknown_level")))}function Q(y,K){var L=y.Bucket,G=y.Region,re=y.Key,O=y.AbortArray,q=y.AsyncLimit||1,X=this,W=0,Y=new Array(O.length);i.eachLimit(O,q,function(ie,ue){var le=W;if(re&&re!==ie.Key){Y[le]={error:{KeyNotMatch:!0}},ue(null);return}var te=ie.UploadId||ie.UploadID;X.multipartAbort({Bucket:L,Region:G,Key:ie.Key,Headers:y.Headers,UploadId:te},function(de){var ce={Bucket:L,Region:G,Key:ie.Key,UploadId:te};Y[le]={error:de,task:ce},ue(null)}),W++},function(ie){if(ie)return K(ie);for(var ue=[],le=[],te=0,de=Y.length;te<de;te++){var ce=Y[te];ce.task&&(ce.error?le.push(ce.task):ue.push(ce.task))}return K(null,{successList:ue,errorList:le})})}function se(y,K){var L=this,G=y.SliceSize===void 0?L.options.SliceSize:y.SliceSize,re=[],O=y.Body,q=O.size||O.length||0,X={TaskId:""};if(L.options.EnableTracker){var W=L.options.UseAccelerate||typeof L.options.Domain=="string"&&L.options.Domain.includes("accelerate.");y.tracker=new _({bucket:y.Bucket,region:y.Region,apiName:"uploadFile",fileKey:y.Key,fileSize:q,accelerate:W,deepTracker:L.options.DeepTracker,customId:L.options.CustomId,delay:L.options.TrackerDelay})}x.each(y,function(de,ce){r(de)!=="object"&&typeof de!="function"&&(X[ce]=de)});var Y=y.onTaskReady,ie=function(ce){X.TaskId=ce,Y&&Y(ce)};y.onTaskReady=ie;var ue=q>G?"sliceUploadFile":"putObject",le=y.onFileFinish,te=function(ce,Se){y.tracker&&y.tracker.formatResult(ce,Se),le&&le(ce,Se,X),K&&K(ce,Se)};re.push({api:ue,params:y,callback:te}),L._addTasks(re)}function B(y,K){var L=this,G=y.SliceSize===void 0?L.options.SliceSize:y.SliceSize,re=0,O=0,q=x.throttleOnProgress.call(L,O,y.onProgress),X=y.files.length,W=y.onFileFinish,Y=Array(X),ie=function(te,de,ce){q(null,!0),W&&W(te,de,ce),Y[ce.Index]={options:ce,error:te,data:de},--X<=0&&K&&K(null,{files:Y})},ue=[];x.each(y.files,function(le,te){(function(){var de=le.Body,ce=de.size||de.length||0,Se={Index:te,TaskId:""};if(re+=ce,L.options.EnableTracker){var $=L.options.UseAccelerate||typeof L.options.Domain=="string"&&L.options.Domain.includes("accelerate.");le.tracker=new _({bucket:le.Bucket,region:le.Region,apiName:"uploadFiles",fileKey:le.Key,fileSize:ce,accelerate:$,deepTracker:L.options.DeepTracker,customId:L.options.CustomId,delay:L.options.TrackerDelay})}x.each(le,function(Ae,Ie){r(Ae)!=="object"&&typeof Ae!="function"&&(Se[Ie]=Ae)});var oe=le.onTaskReady,pe=function(Ie){Se.TaskId=Ie,oe&&oe(Ie)};le.onTaskReady=pe;var Ee=0,ve=le.onProgress,me=function(Ie){O=O-Ee+Ie.loaded,Ee=Ie.loaded,ve&&ve(Ie),q({loaded:O,total:re})};le.onProgress=me;var Ce=ce>G?"sliceUploadFile":"putObject",xe=le.onFileFinish,ke=function(Ie,Oe){le.tracker&&le.tracker.formatResult(Ie,Oe),xe&&xe(Ie,Oe),ie&&ie(Ie,Oe,Se)};ue.push({api:Ce,params:le,callback:ke})})()}),L._addTasks(ue)}function C(y,K){var L=new h,G=this,re=y.Bucket,O=y.Region,q=y.Key,X=y.CopySource,W=x.getSourceParams.call(this,X);if(!W){K(x.error(new Error("CopySource format error")));return}var Y=W.Bucket,ie=W.Region,ue=decodeURIComponent(W.Key),le=y.CopySliceSize===void 0?G.options.CopySliceSize:y.CopySliceSize;le=Math.max(0,le);var te=y.CopyChunkSize||this.options.CopyChunkSize,de=this.options.CopyChunkParallelLimit,ce=this.options.ChunkRetryTimes+1,Se=0,$=0,oe,pe,Ee={},ve={},me={};L.on("copy_slice_complete",function(Ce){x.each(y.Headers,function(ke,Ae){Ae.toLowerCase().indexOf("x-cos-meta-")});var xe=x.map(Ce.PartList,function(ke){return{PartNumber:ke.PartNumber,ETag:ke.ETag}});i.retry(ce,function(ke){G.multipartComplete({Bucket:re,Region:O,Key:q,UploadId:Ce.UploadId,Parts:xe,calledBySdk:"sliceCopyFile"},ke)},function(ke,Ae){if(a.removeUsing(Ce.UploadId),ke)return pe(null,!0),K(ke);a.removeUploadId(Ce.UploadId),pe({loaded:oe,total:oe},!0),K(null,Ae)})}),L.on("get_copy_data_finish",function(Ce){var xe=a.getCopyFileId(X,Ee,te,re,q);xe&&a.saveUploadId(xe,Ce.UploadId,G.options.UploadIdCacheLimit),a.setUsing(Ce.UploadId);var ke=x.filter(Ce.PartList,function(Ae){return Ae.Uploaded&&($+=Ae.PartNumber>=Se&&oe%te||te),!Ae.Uploaded});i.eachLimit(ke,de,function(Ae,Ie){var Oe=Ae.PartNumber,ae=Ae.CopySourceRange,A=Ae.end-Ae.start;i.retry(ce,function(z){S.call(G,{Bucket:re,Region:O,Key:q,CopySource:X,UploadId:Ce.UploadId,PartNumber:Oe,CopySourceRange:ae},z)},function(z,v){if(z)return Ie(z);$+=A,pe({loaded:$,total:oe}),Ae.ETag=v.ETag,Ie(z||null,v)})},function(Ae){if(Ae)return a.removeUsing(Ce.UploadId),pe(null,!0),K(Ae);L.emit("copy_slice_complete",Ce)})}),L.on("get_chunk_size_finish",function(){var Ce=function(){G.multipartInit({Bucket:re,Region:O,Key:q,Headers:me},function(Oe,ae){if(Oe)return K(Oe);y.UploadId=ae.UploadId,L.emit("get_copy_data_finish",{UploadId:y.UploadId,PartList:y.PartList})})},xe=a.getCopyFileId(X,Ee,te,re,q),ke=a.getUploadIdList(xe);if(!xe||!ke)return Ce();var Ae=function Ie(Oe){if(Oe>=ke.length)return Ce();var ae=ke[Oe];if(a.using[ae])return Ie(Oe+1);F.call(G,{Bucket:re,Region:O,Key:q,UploadId:ae},function(A,z){if(A)a.removeUploadId(ae),Ie(Oe+1);else{if(a.using[ae])return Ie(Oe+1);var v={},u=0;x.each(z.PartList,function(d){var c=parseInt(d.Size),m=u+c-1;v[d.PartNumber+"|"+u+"|"+m]=d.ETag,u+=c}),x.each(y.PartList,function(d){var c=v[d.PartNumber+"|"+d.start+"|"+d.end];c&&(d.ETag=c,d.Uploaded=!0)}),L.emit("get_copy_data_finish",{UploadId:ae,PartList:y.PartList})}})};Ae(0)}),L.on("get_file_size_finish",function(){if(function(){for(var xe=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],ke=1024*1024,Ae=0;Ae<xe.length&&(ke=xe[Ae]*1024*1024,!(oe/ke<=G.options.MaxPartNumber));Ae++);y.ChunkSize=te=Math.max(te,ke),Se=Math.ceil(oe/te);for(var Ie=[],Oe=1;Oe<=Se;Oe++){var ae=(Oe-1)*te,A=Oe*te<oe?Oe*te-1:oe-1,z={PartNumber:Oe,start:ae,end:A,CopySourceRange:"bytes="+ae+"-"+A};Ie.push(z)}y.PartList=Ie}(),y.Headers["x-cos-metadata-directive"]==="Replaced"?me=y.Headers:me=ve,me["x-cos-storage-class"]=y.Headers["x-cos-storage-class"]||ve["x-cos-storage-class"],me=x.clearKey(me),ve["x-cos-storage-class"]==="ARCHIVE"||ve["x-cos-storage-class"]==="DEEP_ARCHIVE"){var Ce=ve["x-cos-restore"];if(!Ce||Ce==='ongoing-request="true"'){K(x.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete me["x-cos-copy-source"],delete me["x-cos-metadata-directive"],delete me["x-cos-copy-source-If-Modified-Since"],delete me["x-cos-copy-source-If-Unmodified-Since"],delete me["x-cos-copy-source-If-Match"],delete me["x-cos-copy-source-If-None-Match"],L.emit("get_chunk_size_finish")}),G.headObject({Bucket:Y,Region:ie,Key:ue},function(Ce,xe){if(Ce){Ce.statusCode&&Ce.statusCode===404?K(x.error(Ce,{ErrorStatus:ue+" Not Exist"})):K(Ce);return}if(oe=y.FileSize=xe.headers["content-length"],oe===void 0||!oe){K(x.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(pe=x.throttleOnProgress.call(G,oe,y.onProgress),oe<=le)y.Headers["x-cos-metadata-directive"]||(y.Headers["x-cos-metadata-directive"]="Copy"),G.putObjectCopy(y,function(Ae,Ie){if(Ae)return pe(null,!0),K(Ae);pe({loaded:oe,total:oe},!0),K(Ae,Ie)});else{var ke=xe.headers;Ee=ke,ve={"Cache-Control":ke["cache-control"],"Content-Disposition":ke["content-disposition"],"Content-Encoding":ke["content-encoding"],"Content-Type":ke["content-type"],Expires:ke.expires,"x-cos-storage-class":ke["x-cos-storage-class"]},x.each(ke,function(Ae,Ie){var Oe="x-cos-meta-";Ie.indexOf(Oe)===0&&Ie.length>Oe.length&&(ve[Ie]=Ae)}),L.emit("get_file_size_finish")}})}function S(y,K){var L=y.TaskId,G=y.Bucket,re=y.Region,O=y.Key,q=y.CopySource,X=y.UploadId,W=y.PartNumber*1,Y=y.CopySourceRange,ie=this.options.ChunkRetryTimes+1,ue=this;i.retry(ie,function(le){ue.uploadPartCopy({TaskId:L,Bucket:G,Region:re,Key:O,CopySource:q,UploadId:X,PartNumber:W,CopySourceRange:Y},function(te,de){le(te||null,de)})},function(le,te){return K(le,te)})}var V={sliceUploadFile:T,abortUploadTask:J,uploadFile:se,uploadFiles:B,sliceCopyFile:C};o.exports.init=function(y,K){K.transferToTaskMethod(V,"sliceUploadFile"),x.each(V,function(L,G){y.prototype[G]=x.apiWrapper(G,L)})}},"./src/async.js":function(o,e){var t=function(h,x,_,T){if(T=T||function(){},!h.length||x<=0)return T();var k=0,D=0,F=0;(function j(){if(k>=h.length)return T();for(;F<x&&D<h.length;)D+=1,F+=1,_(h[D-1],function(P){P?(T(P),T=function(){}):(k+=1,F-=1,k>=h.length?T():j())})})()},r=function(h,x,_){var T=function k(D){x(function(F,j){F&&D<h?k(D+1):_(F,j)})};h<1?_():T(1)},a={eachLimit:t,retry:r};o.exports=a},"./src/base.js":function(o,e,t){var r=t("./node_modules/@babel/runtime/helpers/typeof.js"),a=t("./lib/request.js"),i=t("./src/util.js");function h(n,p){typeof n=="function"&&(p=n,n={});var s=this.options.Protocol||(i.isBrowser&&(typeof location>"u"?"undefined":r(location))==="object"&&location.protocol==="http:"?"http:":"https:"),f=this.options.ServiceDomain,b=n.AppId||this.options.appId,E=n.Region;f?(f=f.replace(/\{\{AppId\}\}/gi,b||"").replace(/\{\{Region\}\}/gi,E||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(f)||(f=s+"//"+f),f.slice(-1)==="/"&&(f=f.slice(0,-1))):E?f=s+"//cos."+E+".myqcloud.com":f=s+"//service.cos.myqcloud.com";var w="",M=E?"cos."+E+".myqcloud.com":"service.cos.myqcloud.com",Z=f.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");M===Z&&(w=M),fe.call(this,{Action:"name/cos:GetService",url:f,method:"GET",headers:n.Headers,SignHost:w},function(De,we){if(De)return p(De);var be=we&&we.ListAllMyBucketsResult&&we.ListAllMyBucketsResult.Buckets&&we.ListAllMyBucketsResult.Buckets.Bucket||[];be=i.isArray(be)?be:[be];var Re=we&&we.ListAllMyBucketsResult&&we.ListAllMyBucketsResult.Owner||{};p(null,{Buckets:be,Owner:Re,statusCode:we.statusCode,headers:we.headers})})}function x(n,p){var s=this,f="";if(n.BucketAZConfig){var b={BucketAZConfig:n.BucketAZConfig};f=i.json2xml({CreateBucketConfiguration:b})}fe.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,body:f},function(E,w){if(E)return p(E);var M=H({protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:n.Region,isLocation:!0});p(null,{Location:M,statusCode:w.statusCode,headers:w.headers})})}function _(n,p){fe.call(this,{Action:"name/cos:HeadBucket",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,method:"HEAD"},p)}function T(n,p){var s={};s.prefix=n.Prefix||"",s.delimiter=n.Delimiter,s.marker=n.Marker,s["max-keys"]=n.MaxKeys,s["encoding-type"]=n.EncodingType,fe.call(this,{Action:"name/cos:GetBucket",ResourceKey:s.prefix,method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,qs:s},function(f,b){if(f)return p(f);var E=b.ListBucketResult||{},w=E.Contents||[],M=E.CommonPrefixes||[];w=i.isArray(w)?w:[w],M=i.isArray(M)?M:[M];var Z=i.clone(E);i.extend(Z,{Contents:w,CommonPrefixes:M,statusCode:b.statusCode,headers:b.headers}),p(null,Z)})}function k(n,p){fe.call(this,{Action:"name/cos:DeleteBucket",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,method:"DELETE"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function D(n,p){var s=n.Headers,f="";if(n.AccessControlPolicy){var b=i.clone(n.AccessControlPolicy||{}),E=b.Grants||b.Grant;E=i.isArray(E)?E:[E],delete b.Grant,delete b.Grants,b.AccessControlList={Grant:E},f=i.json2xml({AccessControlPolicy:b}),s["Content-Type"]="application/xml",s["Content-MD5"]=i.b64(i.md5(f))}i.each(s,function(w,M){M.indexOf("x-cos-grant-")===0&&(s[M]=R(s[M]))}),fe.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:n.Bucket,Region:n.Region,headers:s,action:"acl",body:f},function(w,M){if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function F(n,p){fe.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"acl"},function(s,f){if(s)return p(s);var b=f.AccessControlPolicy||{},E=b.Owner||{},w=b.AccessControlList.Grant||[];w=i.isArray(w)?w:[w];var M=g(b);f.headers&&f.headers["x-cos-acl"]&&(M.ACL=f.headers["x-cos-acl"]),M=i.extend(M,{Owner:E,Grants:w,statusCode:f.statusCode,headers:f.headers}),p(null,M)})}function j(n,p){var s=n.CORSConfiguration||{},f=s.CORSRules||n.CORSRules||[];f=i.clone(i.isArray(f)?f:[f]),i.each(f,function(M){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(Z){var De=Z+"s",we=M[De]||M[Z]||[];delete M[De],M[Z]=i.isArray(we)?we:[we]})});var b={CORSRule:f};n.ResponseVary&&(b.ResponseVary=n.ResponseVary);var E=i.json2xml({CORSConfiguration:b}),w=n.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=i.b64(i.md5(E)),fe.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:E,action:"cors",headers:w},function(M,Z){if(M)return p(M);p(null,{statusCode:Z.statusCode,headers:Z.headers})})}function P(n,p){fe.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"cors"},function(s,f){if(s){if(s.statusCode===404&&s.error&&s.error.Code==="NoSuchCORSConfiguration"){var b={CORSRules:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}var E=f.CORSConfiguration||{},w=E.CORSRules||E.CORSRule||[];w=i.clone(i.isArray(w)?w:[w]);var M=E.ResponseVary;i.each(w,function(Z){i.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(De){var we=De+"s",be=Z[we]||Z[De]||[];delete Z[De],Z[we]=i.isArray(be)?be:[be]})}),p(null,{CORSRules:w,ResponseVary:M,statusCode:f.statusCode,headers:f.headers})})}function N(n,p){fe.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"cors"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode||s.statusCode,headers:f.headers})})}function J(n,p){fe.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"location"},p)}function Q(n,p){var s=n.Policy;try{typeof s=="string"&&(s=JSON.parse(s))}catch{}if(!s||typeof s=="string")return p(i.error(new Error("Policy format error")));var f=JSON.stringify(s);s.version||(s.version="2.0");var b=n.Headers;b["Content-Type"]="application/json",b["Content-MD5"]=i.b64(i.md5(f)),fe.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:n.Bucket,Region:n.Region,action:"policy",body:f,headers:b},function(E,w){if(E&&E.statusCode===204)return p(null,{statusCode:E.statusCode});if(E)return p(E);p(null,{statusCode:w.statusCode,headers:w.headers})})}function se(n,p){fe.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"policy",rawBody:!0},function(s,f){if(s)return s.statusCode&&s.statusCode===403?p(i.error(s,{ErrorStatus:"Access Denied"})):s.statusCode&&s.statusCode===405?p(i.error(s,{ErrorStatus:"Method Not Allowed"})):s.statusCode&&s.statusCode===404?p(i.error(s,{ErrorStatus:"Policy Not Found"})):p(s);var b={};try{b=JSON.parse(f.body)}catch{}p(null,{Policy:b,statusCode:f.statusCode,headers:f.headers})})}function B(n,p){fe.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"policy"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode||s.statusCode,headers:f.headers})})}function C(n,p){var s=n.Tagging||{},f=s.TagSet||s.Tags||n.Tags||[];f=i.clone(i.isArray(f)?f:[f]);var b=i.json2xml({Tagging:{TagSet:{Tag:f}}}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"tagging",headers:E},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function S(n,p){fe.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"tagging"},function(s,f){if(s){if(s.statusCode===404&&s.error&&(s.error==="Not Found"||s.error.Code==="NoSuchTagSet")){var b={Tags:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}var E=[];try{E=f.Tagging.TagSet.Tag||[]}catch{}E=i.clone(i.isArray(E)?E:[E]),p(null,{Tags:E,statusCode:f.statusCode,headers:f.headers})})}function V(n,p){fe.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"tagging"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function y(n,p){var s=n.LifecycleConfiguration||{},f=s.Rules||n.Rules||[];f=i.clone(f);var b=i.json2xml({LifecycleConfiguration:{Rule:f}}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"lifecycle",headers:E},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function K(n,p){fe.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"lifecycle"},function(s,f){if(s){if(s.statusCode===404&&s.error&&s.error.Code==="NoSuchLifecycleConfiguration"){var b={Rules:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}var E=[];try{E=f.LifecycleConfiguration.Rule||[]}catch{}E=i.clone(i.isArray(E)?E:[E]),p(null,{Rules:E,statusCode:f.statusCode,headers:f.headers})})}function L(n,p){fe.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"lifecycle"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function G(n,p){if(!n.VersioningConfiguration){p(i.error(new Error("missing param VersioningConfiguration")));return}var s=n.VersioningConfiguration||{},f=i.json2xml({VersioningConfiguration:s}),b=n.Headers;b["Content-Type"]="application/xml",b["Content-MD5"]=i.b64(i.md5(f)),fe.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:f,action:"versioning",headers:b},function(E,w){if(E&&E.statusCode===204)return p(null,{statusCode:E.statusCode});if(E)return p(E);p(null,{statusCode:w.statusCode,headers:w.headers})})}function re(n,p){fe.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"versioning"},function(s,f){s||!f.VersioningConfiguration&&(f.VersioningConfiguration={}),p(s,f)})}function O(n,p){var s=i.clone(n.ReplicationConfiguration),f=i.json2xml({ReplicationConfiguration:s});f=f.replace(/<(\/?)Rules>/gi,"<$1Rule>"),f=f.replace(/<(\/?)Tags>/gi,"<$1Tag>");var b=n.Headers;b["Content-Type"]="application/xml",b["Content-MD5"]=i.b64(i.md5(f)),fe.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:f,action:"replication",headers:b},function(E,w){if(E&&E.statusCode===204)return p(null,{statusCode:E.statusCode});if(E)return p(E);p(null,{statusCode:w.statusCode,headers:w.headers})})}function q(n,p){fe.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"replication"},function(s,f){if(s){if(s.statusCode===404&&s.error&&(s.error==="Not Found"||s.error.Code==="ReplicationConfigurationnotFoundError")){var b={ReplicationConfiguration:{Rules:[]},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}!f.ReplicationConfiguration&&(f.ReplicationConfiguration={}),f.ReplicationConfiguration.Rule&&(f.ReplicationConfiguration.Rules=i.makeArray(f.ReplicationConfiguration.Rule),delete f.ReplicationConfiguration.Rule),p(s,f)})}function X(n,p){fe.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"replication"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function W(n,p){if(!n.WebsiteConfiguration){p(i.error(new Error("missing param WebsiteConfiguration")));return}var s=i.clone(n.WebsiteConfiguration||{}),f=s.RoutingRules||s.RoutingRule||[];f=i.isArray(f)?f:[f],delete s.RoutingRule,delete s.RoutingRules,f.length&&(s.RoutingRules={RoutingRule:f});var b=i.json2xml({WebsiteConfiguration:s}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"website",headers:E},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function Y(n,p){fe.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"website"},function(s,f){if(s){if(s.statusCode===404&&s.error.Code==="NoSuchWebsiteConfiguration"){var b={WebsiteConfiguration:{},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}var E=f.WebsiteConfiguration||{};if(E.RoutingRules){var w=i.clone(E.RoutingRules.RoutingRule||[]);w=i.makeArray(w),E.RoutingRules=w}p(null,{WebsiteConfiguration:E,statusCode:f.statusCode,headers:f.headers})})}function ie(n,p){fe.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"website"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function ue(n,p){if(!n.RefererConfiguration){p(i.error(new Error("missing param RefererConfiguration")));return}var s=i.clone(n.RefererConfiguration||{}),f=s.DomainList||{},b=f.Domains||f.Domain||[];b=i.isArray(b)?b:[b],b.length&&(s.DomainList={Domain:b});var E=i.json2xml({RefererConfiguration:s}),w=n.Headers;w["Content-Type"]="application/xml",w["Content-MD5"]=i.b64(i.md5(E)),fe.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:E,action:"referer",headers:w},function(M,Z){if(M&&M.statusCode===204)return p(null,{statusCode:M.statusCode});if(M)return p(M);p(null,{statusCode:Z.statusCode,headers:Z.headers})})}function le(n,p){fe.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"referer"},function(s,f){if(s){if(s.statusCode===404&&s.error.Code==="NoSuchRefererConfiguration"){var b={WebsiteConfiguration:{},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}var E=f.RefererConfiguration||{};if(E.DomainList){var w=i.makeArray(E.DomainList.Domain||[]);E.DomainList={Domains:w}}p(null,{RefererConfiguration:E,statusCode:f.statusCode,headers:f.headers})})}function te(n,p){var s=n.DomainConfiguration||{},f=s.DomainRule||n.DomainRule||[];f=i.clone(f);var b=i.json2xml({DomainConfiguration:{DomainRule:f}}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"domain",headers:E},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function de(n,p){fe.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"domain"},function(s,f){if(s)return p(s);var b=[];try{b=f.DomainConfiguration.DomainRule||[]}catch{}b=i.clone(i.isArray(b)?b:[b]),p(null,{DomainRule:b,statusCode:f.statusCode,headers:f.headers})})}function ce(n,p){fe.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"domain"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function Se(n,p){var s=n.OriginConfiguration||{},f=s.OriginRule||n.OriginRule||[];f=i.clone(f);var b=i.json2xml({OriginConfiguration:{OriginRule:f}}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"origin",headers:E},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function $(n,p){fe.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"origin"},function(s,f){if(s)return p(s);var b=[];try{b=f.OriginConfiguration.OriginRule||[]}catch{}b=i.clone(i.isArray(b)?b:[b]),p(null,{OriginRule:b,statusCode:f.statusCode,headers:f.headers})})}function oe(n,p){fe.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"origin"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function pe(n,p){var s=i.json2xml({BucketLoggingStatus:n.BucketLoggingStatus||""}),f=n.Headers;f["Content-Type"]="application/xml",f["Content-MD5"]=i.b64(i.md5(s)),fe.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:s,action:"logging",headers:f},function(b,E){if(b&&b.statusCode===204)return p(null,{statusCode:b.statusCode});if(b)return p(b);p(null,{statusCode:E.statusCode,headers:E.headers})})}function Ee(n,p){fe.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"logging"},function(s,f){if(s)return p(s);p(null,{BucketLoggingStatus:f.BucketLoggingStatus,statusCode:f.statusCode,headers:f.headers})})}function ve(n,p,s){var f=i.clone(p.InventoryConfiguration);if(f.OptionalFields){var b=f.OptionalFields||[];f.OptionalFields={Field:b}}if(f.Destination&&f.Destination.COSBucketDestination&&f.Destination.COSBucketDestination.Encryption){var E=f.Destination.COSBucketDestination.Encryption;Object.keys(E).indexOf("SSECOS")>-1&&(E["SSE-COS"]=E.SSECOS,delete E.SSECOS)}var w=i.json2xml({InventoryConfiguration:f}),M=p.Headers;M["Content-Type"]="application/xml",M["Content-MD5"]=i.b64(i.md5(w));var Z=n==="PUT"?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";fe.call(this,{Action:Z,method:n,Bucket:p.Bucket,Region:p.Region,body:w,action:"inventory",qs:{id:p.Id},headers:M},function(De,we){if(De&&De.statusCode===204)return s(null,{statusCode:De.statusCode});if(De)return s(De);s(null,{statusCode:we.statusCode,headers:we.headers})})}function me(n,p){return ve.call(this,"PUT",n,p)}function Ce(n,p){return ve.call(this,"POST",n,p)}function xe(n,p){fe.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"inventory",qs:{id:n.Id}},function(s,f){if(s)return p(s);var b=f.InventoryConfiguration;if(b&&b.OptionalFields&&b.OptionalFields.Field){var E=b.OptionalFields.Field;i.isArray(E)||(E=[E]),b.OptionalFields=E}if(b.Destination&&b.Destination.COSBucketDestination&&b.Destination.COSBucketDestination.Encryption){var w=b.Destination.COSBucketDestination.Encryption;Object.keys(w).indexOf("SSE-COS")>-1&&(w.SSECOS=w["SSE-COS"],delete w["SSE-COS"])}p(null,{InventoryConfiguration:b,statusCode:f.statusCode,headers:f.headers})})}function ke(n,p){fe.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"inventory",qs:{"continuation-token":n.ContinuationToken}},function(s,f){if(s)return p(s);var b=f.ListInventoryConfigurationResult,E=b.InventoryConfiguration||[];E=i.isArray(E)?E:[E],delete b.InventoryConfiguration,i.each(E,function(w){if(w&&w.OptionalFields&&w.OptionalFields.Field){var M=w.OptionalFields.Field;i.isArray(M)||(M=[M]),w.OptionalFields=M}if(w.Destination&&w.Destination.COSBucketDestination&&w.Destination.COSBucketDestination.Encryption){var Z=w.Destination.COSBucketDestination.Encryption;Object.keys(Z).indexOf("SSE-COS")>-1&&(Z.SSECOS=Z["SSE-COS"],delete Z["SSE-COS"])}}),b.InventoryConfigurations=E,i.extend(b,{statusCode:f.statusCode,headers:f.headers}),p(null,b)})}function Ae(n,p){fe.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"inventory",qs:{id:n.Id}},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function Ie(n,p){if(!n.AccelerateConfiguration){p(i.error(new Error("missing param AccelerateConfiguration")));return}var s={AccelerateConfiguration:n.AccelerateConfiguration||{}},f=i.json2xml(s),b={};b["Content-Type"]="application/xml",b["Content-MD5"]=i.b64(i.md5(f)),fe.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:f,action:"accelerate",headers:b},function(E,w){if(E)return p(E);p(null,{statusCode:w.statusCode,headers:w.headers})})}function Oe(n,p){fe.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:n.Bucket,Region:n.Region,action:"accelerate"},function(s,f){s||!f.AccelerateConfiguration&&(f.AccelerateConfiguration={}),p(s,f)})}function ae(n,p){var s=n.ServerSideEncryptionConfiguration||{},f=s.Rule||s.Rules||[],b=i.json2xml({ServerSideEncryptionConfiguration:{Rule:f}}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:n.Bucket,Region:n.Region,body:b,action:"encryption",headers:E},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function A(n,p){fe.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"encryption"},function(s,f){if(s){if(s.statusCode===404&&s.code==="NoSuchEncryptionConfiguration"){var b={EncryptionConfiguration:{Rules:[]},statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}var E=i.makeArray(f.EncryptionConfiguration&&f.EncryptionConfiguration.Rule||[]);f.EncryptionConfiguration={Rules:E},p(s,f)})}function z(n,p){fe.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"encryption"},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function v(n,p){fe.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,headers:n.Headers},function(s,f){if(s){var b=s.statusCode;return n.Headers["If-Modified-Since"]&&b&&b===304?p(null,{NotModified:!0,statusCode:b}):p(s)}f.ETag=i.attr(f.headers,"etag",""),p(null,f)})}function u(n,p){var s={};s.prefix=n.Prefix||"",s.delimiter=n.Delimiter,s["key-marker"]=n.KeyMarker,s["version-id-marker"]=n.VersionIdMarker,s["max-keys"]=n.MaxKeys,s["encoding-type"]=n.EncodingType,fe.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:s.prefix,method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,qs:s,action:"versions"},function(f,b){if(f)return p(f);var E=b.ListVersionsResult||{},w=E.DeleteMarker||[];w=i.isArray(w)?w:[w];var M=E.Version||[];M=i.isArray(M)?M:[M];var Z=i.clone(E);delete Z.DeleteMarker,delete Z.Version,i.extend(Z,{DeleteMarkers:w,Versions:M,statusCode:b.statusCode,headers:b.headers}),p(null,Z)})}function d(n,p){var s=n.Query||{},f=n.QueryString||"",b=i.throttleOnProgress.call(this,0,n.onProgress),E=n.tracker;E&&E.setParams({signStartTime:new Date().getTime()}),s["response-content-type"]=n.ResponseContentType,s["response-content-language"]=n.ResponseContentLanguage,s["response-expires"]=n.ResponseExpires,s["response-cache-control"]=n.ResponseCacheControl,s["response-content-disposition"]=n.ResponseContentDisposition,s["response-content-encoding"]=n.ResponseContentEncoding,fe.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,DataType:n.DataType,headers:n.Headers,qs:s,qsStr:f,rawBody:!0,onDownloadProgress:b,tracker:E},function(w,M){if(b(null,!0),w){var Z=w.statusCode;return n.Headers["If-Modified-Since"]&&Z&&Z===304?p(null,{NotModified:!0}):p(w)}p(null,{Body:M.body,ETag:i.attr(M.headers,"etag",""),statusCode:M.statusCode,headers:M.headers})})}function c(n,p){var s=this,f=n.ContentLength,b=i.throttleOnProgress.call(s,f,n.onProgress),E=n.Headers;!E["Cache-Control"]&&!E["cache-control"]&&(E["Cache-Control"]=""),!E["Content-Type"]&&!E["content-type"]&&(E["Content-Type"]=n.Body&&n.Body.type||"");var w=n.UploadAddMetaMd5||s.options.UploadAddMetaMd5||s.options.UploadCheckContentMd5,M=n.tracker;w&&M&&M.setParams({md5StartTime:new Date().getTime()}),i.getBodyMd5(w,n.Body,function(Z){Z&&(M&&M.setParams({md5EndTime:new Date().getTime()}),s.options.UploadCheckContentMd5&&(E["Content-MD5"]=i.b64(Z)),(n.UploadAddMetaMd5||s.options.UploadAddMetaMd5)&&(E["x-cos-meta-md5"]=Z)),n.ContentLength!==void 0&&(E["Content-Length"]=n.ContentLength),b(null,!0),fe.call(s,{Action:"name/cos:PutObject",TaskId:n.TaskId,method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:n.Query,body:n.Body,onProgress:b,tracker:M},function(De,we){if(De)return b(null,!0),p(De);b({loaded:f,total:f},!0);var be=H({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:s.options.UseAccelerate?"accelerate":n.Region,object:n.Key});be=be.substr(be.indexOf("://")+3),we.Location=be,we.ETag=i.attr(we.headers,"etag",""),p(null,we)})},n.onHashProgress)}function m(n,p){fe.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,VersionId:n.VersionId,action:n.Recursive?"recursive":""},function(s,f){if(s){var b=s.statusCode;return b&&b===404?p(null,{BucketNotFound:!0,statusCode:b}):p(s)}p(null,{statusCode:f.statusCode,headers:f.headers})})}function I(n,p){var s={};n.VersionId&&(s.versionId=n.VersionId),fe.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:s,action:"acl"},function(f,b){if(f)return p(f);var E=b.AccessControlPolicy||{},w=E.Owner||{},M=E.AccessControlList&&E.AccessControlList.Grant||[];M=i.isArray(M)?M:[M];var Z=g(E);delete Z.GrantWrite,b.headers&&b.headers["x-cos-acl"]&&(Z.ACL=b.headers["x-cos-acl"]),Z=i.extend(Z,{Owner:w,Grants:M,statusCode:b.statusCode,headers:b.headers}),p(null,Z)})}function U(n,p){var s=n.Headers,f="";if(n.AccessControlPolicy){var b=i.clone(n.AccessControlPolicy||{}),E=b.Grants||b.Grant;E=i.isArray(E)?E:[E],delete b.Grant,delete b.Grants,b.AccessControlList={Grant:E},f=i.json2xml({AccessControlPolicy:b}),s["Content-Type"]="application/xml",s["Content-MD5"]=i.b64(i.md5(f))}i.each(s,function(w,M){M.indexOf("x-cos-grant-")===0&&(s[M]=R(s[M]))}),fe.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,action:"acl",headers:s,body:f},function(w,M){if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function ee(n,p){var s=n.Headers;s.Origin=n.Origin,s["Access-Control-Request-Method"]=n.AccessControlRequestMethod,s["Access-Control-Request-Headers"]=n.AccessControlRequestHeaders,fe.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:s},function(f,b){if(f)return f.statusCode&&f.statusCode===403?p(null,{OptionsForbidden:!0,statusCode:f.statusCode}):p(f);var E=b.headers||{};p(null,{AccessControlAllowOrigin:E["access-control-allow-origin"],AccessControlAllowMethods:E["access-control-allow-methods"],AccessControlAllowHeaders:E["access-control-allow-headers"],AccessControlExposeHeaders:E["access-control-expose-headers"],AccessControlMaxAge:E["access-control-max-age"],statusCode:b.statusCode,headers:b.headers})})}function ge(n,p){var s=this,f=n.Headers;!f["Cache-Control"]&&!f["cache-control"]&&(f["Cache-Control"]="");var b=n.CopySource||"",E=i.getSourceParams.call(this,b);if(!E){p(i.error(new Error("CopySource format error")));return}var w=E.Bucket,M=E.Region,Z=decodeURIComponent(E.Key);fe.call(this,{Scope:[{action:"name/cos:GetObject",bucket:w,region:M,prefix:Z},{action:"name/cos:PutObject",bucket:n.Bucket,region:n.Region,prefix:n.Key}],method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,headers:n.Headers},function(De,we){if(De)return p(De);var be=i.clone(we.CopyObjectResult||{}),Re=H({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:n.Region,object:n.Key,isLocation:!0});i.extend(be,{Location:Re,statusCode:we.statusCode,headers:we.headers}),p(null,be)})}function ye(n,p){var s=n.CopySource||"",f=i.getSourceParams.call(this,s);if(!f){p(i.error(new Error("CopySource format error")));return}var b=f.Bucket,E=f.Region,w=decodeURIComponent(f.Key);fe.call(this,{Scope:[{action:"name/cos:GetObject",bucket:b,region:E,prefix:w},{action:"name/cos:PutObject",bucket:n.Bucket,region:n.Region,prefix:n.Key}],method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,qs:{partNumber:n.PartNumber,uploadId:n.UploadId},headers:n.Headers},function(M,Z){if(M)return p(M);var De=i.clone(Z.CopyPartResult||{});i.extend(De,{statusCode:Z.statusCode,headers:Z.headers}),p(null,De)})}function ne(n,p){var s=n.Objects||[],f=n.Quiet;s=i.isArray(s)?s:[s];var b=i.json2xml({Delete:{Object:s,Quiet:f||!1}}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b));var w=i.map(s,function(M){return{action:"name/cos:DeleteObject",bucket:n.Bucket,region:n.Region,prefix:M.Key}});fe.call(this,{Scope:w,method:"POST",Bucket:n.Bucket,Region:n.Region,body:b,action:"delete",headers:E},function(M,Z){if(M)return p(M);var De=Z.DeleteResult||{},we=De.Deleted||[],be=De.Error||[];we=i.isArray(we)?we:[we],be=i.isArray(be)?be:[be];var Re=i.clone(De);i.extend(Re,{Error:be,Deleted:we,statusCode:Z.statusCode,headers:Z.headers}),p(null,Re)})}function Be(n,p){var s=n.Headers;if(!n.RestoreRequest){p(i.error(new Error("missing param RestoreRequest")));return}var f=n.RestoreRequest||{},b=i.json2xml({RestoreRequest:f});s["Content-Type"]="application/xml",s["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,VersionId:n.VersionId,body:b,action:"restore",headers:s},p)}function Te(n,p){var s=n.Tagging||{},f=s.TagSet||s.Tags||n.Tags||[];f=i.clone(i.isArray(f)?f:[f]);var b=i.json2xml({Tagging:{TagSet:{Tag:f}}}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:n.Bucket,Key:n.Key,Region:n.Region,body:b,action:"tagging",headers:E,VersionId:n.VersionId},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);p(null,{statusCode:M.statusCode,headers:M.headers})})}function Me(n,p){fe.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:n.Key,Bucket:n.Bucket,Region:n.Region,headers:n.Headers,action:"tagging",VersionId:n.VersionId},function(s,f){if(s){if(s.statusCode===404&&s.error&&(s.error==="Not Found"||s.error.Code==="NoSuchTagSet")){var b={Tags:[],statusCode:s.statusCode};s.headers&&(b.headers=s.headers),p(null,b)}else p(s);return}var E=[];try{E=f.Tagging.TagSet.Tag||[]}catch{}E=i.clone(i.isArray(E)?E:[E]),p(null,{Tags:E,statusCode:f.statusCode,headers:f.headers})})}function Fe(n,p){fe.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"tagging",VersionId:n.VersionId},function(s,f){if(s&&s.statusCode===204)return p(null,{statusCode:s.statusCode});if(s)return p(s);p(null,{statusCode:f.statusCode,headers:f.headers})})}function Ke(n,p){var s=n.SelectType;if(!s)return p(i.error(new Error("missing param SelectType")));var f=n.SelectRequest||{},b=i.json2xml({SelectRequest:f}),E=n.Headers;E["Content-Type"]="application/xml",E["Content-MD5"]=i.b64(i.md5(b)),fe.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,action:"select",qs:{"select-type":n.SelectType},VersionId:n.VersionId,body:b,DataType:"arraybuffer",rawBody:!0},function(w,M){if(w&&w.statusCode===204)return p(null,{statusCode:w.statusCode});if(w)return p(w);var Z=i.parseSelectPayload(M.body);p(null,{statusCode:M.statusCode,headers:M.headers,Body:Z.body,Payload:Z.payload})})}function qe(n,p){var s=this,f=n.Headers,b=n.tracker;!f["Cache-Control"]&&!f["cache-control"]&&(f["Cache-Control"]=""),!f["Content-Type"]&&!f["content-type"]&&(f["Content-Type"]=n.Body&&n.Body.type||"");var E=n.Body&&(n.UploadAddMetaMd5||s.options.UploadAddMetaMd5);E&&b&&b.setParams({md5StartTime:new Date().getTime()}),i.getBodyMd5(E,n.Body,function(w){w&&(n.Headers["x-cos-meta-md5"]=w),E&&b&&b.setParams({md5EndTime:new Date().getTime()}),fe.call(s,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,action:"uploads",headers:n.Headers,qs:n.Query,tracker:b},function(M,Z){if(M)return b&&b.parent&&b.parent.setParams({errorNode:"multipartInit"}),p(M);if(Z=i.clone(Z||{}),Z&&Z.InitiateMultipartUploadResult)return p(null,i.extend(Z.InitiateMultipartUploadResult,{statusCode:Z.statusCode,headers:Z.headers}));p(null,Z)})},n.onHashProgress)}function Ve(n,p){var s=this;i.getFileSize("multipartUpload",n,function(){var f=n.tracker,b=s.options.UploadCheckContentMd5;b&&f&&f.setParams({md5StartTime:new Date().getTime()}),i.getBodyMd5(b,n.Body,function(E){E&&(n.Headers["Content-MD5"]=i.b64(E)),b&&f&&f.setParams({md5EndTime:new Date().getTime()}),f&&f.setParams({partNumber:n.PartNumber}),fe.call(s,{Action:"name/cos:UploadPart",TaskId:n.TaskId,method:"PUT",Bucket:n.Bucket,Region:n.Region,Key:n.Key,qs:{partNumber:n.PartNumber,uploadId:n.UploadId},headers:n.Headers,onProgress:n.onProgress,body:n.Body||null,tracker:f},function(w,M){if(w)return f&&f.parent&&f.parent.setParams({errorNode:"multipartUpload"}),p(w);p(null,{ETag:i.attr(M.headers,"etag",""),statusCode:M.statusCode,headers:M.headers})})})})}function Xe(n,p){for(var s=this,f=n.UploadId,b=n.Parts,E=n.tracker,w=0,M=b.length;w<M;w++)b[w].ETag&&b[w].ETag.indexOf('"')===0||(b[w].ETag='"'+b[w].ETag+'"');var Z=i.json2xml({CompleteMultipartUpload:{Part:b}});Z=Z.replace(/\n\s*/g,"");var De=n.Headers;De["Content-Type"]="application/xml",De["Content-MD5"]=i.b64(i.md5(Z)),fe.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:n.Bucket,Region:n.Region,Key:n.Key,qs:{uploadId:f},body:Z,headers:De,tracker:E},function(we,be){if(we)return E&&E.parent&&E.parent.setParams({errorNode:"multipartComplete"}),p(we);var Re=H({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:n.Bucket,region:n.Region,object:n.Key,isLocation:!0}),je=be.CompleteMultipartUploadResult||{};je.ProcessResults&&je&&je.ProcessResults&&(je.UploadResult={OriginalInfo:{Key:je.Key,Location:Re,ETag:je.ETag,ImageInfo:je.ImageInfo},ProcessResults:je.ProcessResults},delete je.ImageInfo,delete je.ProcessResults);var $e=i.extend(je,{Location:Re,statusCode:be.statusCode,headers:be.headers});p(null,$e)})}function ze(n,p){var s={};s.delimiter=n.Delimiter,s["encoding-type"]=n.EncodingType,s.prefix=n.Prefix||"",s["max-uploads"]=n.MaxUploads,s["key-marker"]=n.KeyMarker,s["upload-id-marker"]=n.UploadIdMarker,s=i.clearKey(s);var f=n.tracker;f&&f.setParams({signStartTime:new Date().getTime()}),fe.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:s.prefix,method:"GET",Bucket:n.Bucket,Region:n.Region,headers:n.Headers,qs:s,action:"uploads",tracker:f},function(b,E){if(b)return f&&f.parent&&f.parent.setParams({errorNode:"multipartList"}),p(b);if(E&&E.ListMultipartUploadsResult){var w=E.ListMultipartUploadsResult.Upload||[];w=i.isArray(w)?w:[w],E.ListMultipartUploadsResult.Upload=w}var M=i.clone(E.ListMultipartUploadsResult||{});i.extend(M,{statusCode:E.statusCode,headers:E.headers}),p(null,M)})}function Ge(n,p){var s={},f=n.tracker;s.uploadId=n.UploadId,s["encoding-type"]=n.EncodingType,s["max-parts"]=n.MaxParts,s["part-number-marker"]=n.PartNumberMarker,fe.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:s},function(b,E){if(b)return f&&f.parent&&f.parent.setParams({errorNode:"multipartListPart"}),p(b);var w=E.ListPartsResult||{},M=w.Part||[];M=i.isArray(M)?M:[M],w.Part=M;var Z=i.clone(w);i.extend(Z,{statusCode:E.statusCode,headers:E.headers}),p(null,Z)})}function We(n,p){var s={};s.uploadId=n.UploadId,fe.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:n.Bucket,Region:n.Region,Key:n.Key,headers:n.Headers,qs:s},function(f,b){if(f)return p(f);p(null,{statusCode:b.statusCode,headers:b.headers})})}function st(n,p){fe.call(this,{method:n.Method,Bucket:n.Bucket,Region:n.Region,Key:n.Key,action:n.Action,headers:n.Headers,qs:n.Query,body:n.Body,Url:n.Url,rawBody:n.RawBody,DataType:n.DataType},function(s,f){if(s)return p(s);f&&f.body&&(f.Body=f.body,delete f.body),p(s,f)})}function ot(n,p){var s=n.Headers;!s["Cache-Control"]&&!s["cache-control"]&&(s["Cache-Control"]=""),!s["Content-Type"]&&!s["content-type"]&&(s["Content-Type"]=n.Body&&n.Body.type||""),fe.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:n.Bucket,Region:n.Region,action:"append",Key:n.Key,body:n.Body,qs:{position:n.Position},headers:n.Headers},function(f,b){if(f)return p(f);p(null,b)})}function tt(n){var p=this;return i.getAuth({SecretId:n.SecretId||this.options.SecretId||"",SecretKey:n.SecretKey||this.options.SecretKey||"",Bucket:n.Bucket,Region:n.Region,Method:n.Method,Key:n.Key,Query:n.Query,Headers:n.Headers,Expires:n.Expires,UseRawKey:p.options.UseRawKey,SystemClockOffset:p.options.SystemClockOffset})}function l(n,p){var s=this,f=n.UseAccelerate===void 0?s.options.UseAccelerate:n.UseAccelerate,b=H({ForcePathStyle:s.options.ForcePathStyle,protocol:n.Protocol||s.options.Protocol,domain:n.Domain||s.options.Domain,bucket:n.Bucket,region:f?"accelerate":n.Region,object:n.Key}),E="";n.Query&&(E+=i.obj2str(n.Query)),n.QueryString&&(E+=(E?"&":"")+n.QueryString);var w=b;if(n.Sign!==void 0&&!n.Sign)return E&&(w+="?"+E),p(null,{Url:w}),w;var M=he.call(this,{Bucket:n.Bucket,Region:n.Region,UseAccelerate:n.UseAccelerate,Url:b}),Z=_e.call(this,{Action:(n.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:n.Bucket||"",Region:n.Region||"",Method:n.Method||"get",Key:n.Key,Expires:n.Expires,Headers:n.Headers,Query:n.Query,SignHost:M,ForceSignHost:n.ForceSignHost===!1?!1:s.options.ForceSignHost},function(De,we){if(p){if(De){p(De);return}var be=function($e){var rt=$e.match(/q-url-param-list.*?(?=&)/g)[0],nt="q-url-param-list="+encodeURIComponent(rt.replace(/q-url-param-list=/,"")).toLowerCase(),Ze=new RegExp(rt,"g"),it=$e.replace(Ze,nt);return it},Re=b;Re+="?"+(we.Authorization.indexOf("q-signature")>-1?be(we.Authorization):"sign="+encodeURIComponent(we.Authorization)),we.SecurityToken&&(Re+="&x-cos-security-token="+we.SecurityToken),we.ClientIP&&(Re+="&clientIP="+we.ClientIP),we.ClientUA&&(Re+="&clientUA="+we.ClientUA),we.Token&&(Re+="&token="+we.Token),E&&(Re+="&"+E),setTimeout(function(){p(null,{Url:Re})})}});return Z?(w+="?"+Z.Authorization+(Z.SecurityToken?"&x-cos-security-token="+Z.SecurityToken:""),E&&(w+="&"+E)):E&&(w+="?"+E),w}function g(n){var p={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},s={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},f=n&&n.AccessControlList||{},b=f.Grant;b&&(b=i.isArray(b)?b:[b]);var E={READ:0,WRITE:0,FULL_CONTROL:0};return b&&b.length&&i.each(b,function(w){w.Grantee.ID==="qcs::cam::anyone:anyone"||w.Grantee.URI==="http://cam.qcloud.com/groups/global/AllUsers"?E[w.Permission]=1:w.Grantee.ID!==n.Owner.ID&&p[s[w.Permission]].push('id="'+w.Grantee.ID+'"')}),E.FULL_CONTROL||E.WRITE&&E.READ?p.ACL="public-read-write":E.READ?p.ACL="public-read":p.ACL="private",i.each(s,function(w){p[w]=R(p[w].join(","))}),p}function R(n){var p=n.split(","),s={},f,b;for(f=0;f<p.length;)b=p[f].trim(),s[b]?p.splice(f,1):(s[b]=!0,p[f]=b,f++);return p.join(",")}function H(n){var p=n.region||"",s=n.bucket||"",f=s.substr(0,s.lastIndexOf("-")),b=s.substr(s.lastIndexOf("-")+1),E=n.domain,w=n.object;typeof E=="function"&&(E=E({Bucket:s,Region:p})),["http","https"].includes(n.protocol)&&(n.protocol=n.protocol+":");var M=n.protocol||(i.isBrowser&&(typeof location>"u"?"undefined":r(location))==="object"&&location.protocol==="http:"?"http:":"https:");E||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(p)>-1?E="{Region}.myqcloud.com":E="cos.{Region}.myqcloud.com",n.ForcePathStyle||(E="{Bucket}."+E)),E=E.replace(/\{\{AppId\}\}/gi,b).replace(/\{\{Bucket\}\}/gi,f).replace(/\{\{Region\}\}/gi,p).replace(/\{\{.*?\}\}/gi,""),E=E.replace(/\{AppId\}/gi,b).replace(/\{BucketName\}/gi,f).replace(/\{Bucket\}/gi,s).replace(/\{Region\}/gi,p).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(E)||(E=M+"//"+E),E.slice(-1)==="/"&&(E=E.slice(0,-1));var Z=E;return n.ForcePathStyle&&(Z+="/"+s),Z+="/",w&&(Z+=i.camSafeUrlEncode(w).replace(/%2F/g,"/")),n.isLocation&&(Z=Z.replace(/^https?:\/\//,"")),Z}var he=function(p){if(!p.Bucket||!p.Region)return"";var s=p.UseAccelerate===void 0?this.options.UseAccelerate:p.UseAccelerate,f=p.Url||H({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:p.Bucket,region:s?"accelerate":p.Region}),b=f.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1"),E=new RegExp("^([a-z\\d-]+-\\d+\\.)?(cos|cosv6|ci|pic)\\.([a-z\\d-]+)\\.myqcloud\\.com$");return E.test(b)?b:""};function _e(n,p){var s=i.clone(n.Headers),f="";i.each(s,function(Ne,Pe){(Ne===""||["content-type","cache-control","expires"].indexOf(Pe.toLowerCase())>-1)&&delete s[Pe],Pe.toLowerCase()==="host"&&(f=Ne)});var b=n.ForceSignHost!==!1;!f&&n.SignHost&&b&&(s.Host=n.SignHost);var E=!1,w=function(Pe,Le){E||(E=!0,Le&&Le.XCosSecurityToken&&!Le.SecurityToken&&(Le=i.clone(Le),Le.SecurityToken=Le.XCosSecurityToken,delete Le.XCosSecurityToken),p&&p(Pe,Le))},M=this,Z=n.Bucket||"",De=n.Region||"",we=n.Key||"";M.options.ForcePathStyle&&Z&&(we=Z+"/"+we);var be="/"+we,Re={},je=n.Scope;if(!je){var $e=n.Action||"",rt=n.ResourceKey||n.Key||"";je=n.Scope||[{action:$e,bucket:Z,region:De,prefix:rt}]}var nt=i.md5(JSON.stringify(je));M._StsCache=M._StsCache||[],function(){var Ne,Pe;for(Ne=M._StsCache.length-1;Ne>=0;Ne--){Pe=M._StsCache[Ne];var Le=Math.round(i.getSkewTime(M.options.SystemClockOffset)/1e3)+30;if(Pe.StartTime&&Le<Pe.StartTime||Le>=Pe.ExpiredTime){M._StsCache.splice(Ne,1);continue}if(!Pe.ScopeLimit||Pe.ScopeLimit&&Pe.ScopeKey===nt){Re=Pe;break}}}();var Ze=function(){var Pe="";Re.StartTime&&n.Expires?Pe=Re.StartTime+";"+(Re.StartTime+n.Expires*1):Re.StartTime&&Re.ExpiredTime&&(Pe=Re.StartTime+";"+Re.ExpiredTime);var Le=i.getAuth({SecretId:Re.TmpSecretId,SecretKey:Re.TmpSecretKey,Method:n.Method,Pathname:be,Query:n.Query,Headers:s,Expires:n.Expires,UseRawKey:M.options.UseRawKey,SystemClockOffset:M.options.SystemClockOffset,KeyTime:Pe,ForceSignHost:b}),He={Authorization:Le,SecurityToken:Re.SecurityToken||Re.XCosSecurityToken||"",Token:Re.Token||"",ClientIP:Re.ClientIP||"",ClientUA:Re.ClientUA||""};w(null,He)},it=function(Pe){if(Pe.Authorization){var Le=!1,He=Pe.Authorization;if(He)if(He.indexOf(" ")>-1)Le=!1;else if(He.indexOf("q-sign-algorithm=")>-1&&He.indexOf("q-ak=")>-1&&He.indexOf("q-sign-time=")>-1&&He.indexOf("q-key-time=")>-1&&He.indexOf("q-url-param-list=")>-1)Le=!0;else try{He=atob(He),He.indexOf("a=")>-1&&He.indexOf("k=")>-1&&He.indexOf("t=")>-1&&He.indexOf("r=")>-1&&He.indexOf("b=")>-1&&(Le=!0)}catch{}if(!Le)return i.error(new Error("getAuthorization callback params format error"))}else{if(!Pe.TmpSecretId)return i.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!Pe.TmpSecretKey)return i.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!Pe.SecurityToken&&!Pe.XCosSecurityToken)return i.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!Pe.ExpiredTime)return i.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(Pe.ExpiredTime&&Pe.ExpiredTime.toString().length!==10)return i.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(Pe.StartTime&&Pe.StartTime.toString().length!==10)return i.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(Re.ExpiredTime&&Re.ExpiredTime-i.getSkewTime(M.options.SystemClockOffset)/1e3>60)Ze();else if(M.options.getAuthorization)M.options.getAuthorization.call(M,{Bucket:Z,Region:De,Method:n.Method,Key:we,Pathname:be,Query:n.Query,Headers:s,Scope:je,SystemClockOffset:M.options.SystemClockOffset,ForceSignHost:b},function(Ne){typeof Ne=="string"&&(Ne={Authorization:Ne});var Pe=it(Ne);if(Pe)return w(Pe);Ne.Authorization?w(null,Ne):(Re=Ne||{},Re.Scope=je,Re.ScopeKey=nt,M._StsCache.push(Re),Ze())});else if(M.options.getSTS)M.options.getSTS.call(M,{Bucket:Z,Region:De},function(Ne){Re=Ne||{},Re.Scope=je,Re.ScopeKey=nt,Re.TmpSecretId||(Re.TmpSecretId=Re.SecretId),Re.TmpSecretKey||(Re.TmpSecretKey=Re.SecretKey);var Pe=it(Re);if(Pe)return w(Pe);M._StsCache.push(Re),Ze()});else return function(){var Ne=i.getAuth({SecretId:n.SecretId||M.options.SecretId,SecretKey:n.SecretKey||M.options.SecretKey,Method:n.Method,Pathname:be,Query:n.Query,Headers:s,Expires:n.Expires,UseRawKey:M.options.UseRawKey,SystemClockOffset:M.options.SystemClockOffset,ForceSignHost:b}),Pe={Authorization:Ne,SecurityToken:M.options.SecurityToken||M.options.XCosSecurityToken};return w(null,Pe),Pe}();return""}function Ue(n){var p=!1,s=!1,f=n.headers&&(n.headers.date||n.headers.Date)||n.error&&n.error.ServerTime;try{var b=n.error.Code,E=n.error.Message;(b==="RequestTimeTooSkewed"||b==="AccessDenied"&&E==="Request has expired")&&(s=!0)}catch{}if(n)if(s&&f){var w=Date.parse(f);this.options.CorrectClockSkew&&Math.abs(i.getSkewTime(this.options.SystemClockOffset)-w)>=3e4&&(this.options.SystemClockOffset=w-Date.now(),p=!0)}else Math.floor(n.statusCode/100)===5&&(p=!0);return p}function fe(n,p){var s=this;!n.headers&&(n.headers={}),!n.qs&&(n.qs={}),n.VersionId&&(n.qs.versionId=n.VersionId),n.qs=i.clearKey(n.qs),n.headers&&(n.headers=i.clearKey(n.headers)),n.qs&&(n.qs=i.clearKey(n.qs));var f=i.clone(n.qs);n.action&&(f[n.action]="");var b=n.url||n.Url,E=n.SignHost||he.call(this,{Bucket:n.Bucket,Region:n.Region,Url:b}),w=n.tracker,M=function Z(De){var we=s.options.SystemClockOffset;w&&w.setParams({signStartTime:new Date().getTime(),retryTimes:De-1}),_e.call(s,{Bucket:n.Bucket||"",Region:n.Region||"",Method:n.method,Key:n.Key,Query:f,Headers:n.headers,SignHost:E,Action:n.Action,ResourceKey:n.ResourceKey,Scope:n.Scope,ForceSignHost:s.options.ForceSignHost},function(be,Re){if(be){p(be);return}w&&w.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),n.AuthData=Re,Qe.call(s,n,function(je,$e){w&&w.setParams({httpEndTime:new Date().getTime()}),je&&De<2&&(we!==s.options.SystemClockOffset||Ue.call(s,je))?(n.headers&&(delete n.headers.Authorization,delete n.headers.token,delete n.headers.clientIP,delete n.headers.clientUA,n.headers["x-cos-security-token"]&&delete n.headers["x-cos-security-token"],n.headers["x-ci-security-token"]&&delete n.headers["x-ci-security-token"]),Z(De+1)):p(je,$e)})})};M(1)}function Qe(n,p){var s=this,f=n.TaskId;if(!(f&&!s._isRunningTask(f))){var b=n.Bucket,E=n.Region,w=n.Key,M=n.method||"GET",Z=n.Url||n.url,De=n.body,we=n.rawBody;s.options.UseAccelerate&&(E="accelerate"),Z=Z||H({ForcePathStyle:s.options.ForcePathStyle,protocol:s.options.Protocol,domain:s.options.Domain,bucket:b,region:E,object:w}),n.action&&(Z=Z+"?"+(i.isIOS_QQ?"".concat(n.action,"="):n.action)),n.qsStr&&(Z.indexOf("?")>-1?Z=Z+"&"+n.qsStr:Z=Z+"?"+n.qsStr);var be={method:M,url:Z,headers:n.headers,qs:n.qs,body:De},Re="x-cos-security-token";if(i.isCIHost(Z)&&(Re="x-ci-security-token"),be.headers.Authorization=n.AuthData.Authorization,n.AuthData.Token&&(be.headers.token=n.AuthData.Token),n.AuthData.ClientIP&&(be.headers.clientIP=n.AuthData.ClientIP),n.AuthData.ClientUA&&(be.headers.clientUA=n.AuthData.ClientUA),n.AuthData.SecurityToken&&(be.headers[Re]=n.AuthData.SecurityToken),be.headers&&(be.headers=i.clearKey(be.headers)),be=i.clearKey(be),n.onProgress&&typeof n.onProgress=="function"){var je=De&&(De.size||De.length)||0;be.onProgress=function(Ne){if(!(f&&!s._isRunningTask(f))){var Pe=Ne?Ne.loaded:0;n.onProgress({loaded:Pe,total:je})}}}n.onDownloadProgress&&(be.onDownloadProgress=n.onDownloadProgress),n.DataType&&(be.dataType=n.DataType),this.options.Timeout&&(be.timeout=this.options.Timeout),s.options.ForcePathStyle&&(be.pathStyle=s.options.ForcePathStyle),s.emit("before-send",be);var $e=be.url.includes("accelerate."),rt=be.qs?Object.keys(be.qs).map(function(Ne){return"".concat(Ne,"=").concat(be.qs[Ne])}).join("&"):"",nt=rt?be.url+"?"+rt:be.url;n.tracker&&n.tracker.setParams({reqUrl:nt,accelerate:$e?"Y":"N"}),n.tracker&&n.tracker.parent&&n.tracker.parent.setParams({reqUrl:nt,accelerate:$e?"Y":"N"});var Ze=(s.options.Request||a)(be,function(Ne){if(!(Ne&&Ne.error==="abort")){var Pe={options:be,error:Ne&&Ne.error,statusCode:Ne&&Ne.statusCode||0,statusMessage:Ne&&Ne.statusMessage||"",headers:Ne&&Ne.headers||{},body:Ne&&Ne.body};s.emit("after-receive",Pe);var Le=Pe.error,He=Pe.body,et={statusCode:Pe.statusCode,statusMessage:Pe.statusMessage,headers:Pe.headers},gt,at=function(dt,ht){if(f&&s.off("inner-kill-task",it),!gt){gt=!0;var ft={};et&&et.statusCode&&(ft.statusCode=et.statusCode),et&&et.headers&&(ft.headers=et.headers),dt?(dt=i.extend(dt||{},ft),p(dt,null)):(ht=i.extend(ht||{},ft),p(null,ht)),Ze=null}};if(Le)return at(i.error(Le));var lt=et.statusCode,pt=Math.floor(lt/100)===2;if(we&&pt)return at(null,{body:He});var ut;try{ut=He&&He.indexOf("<")>-1&&He.indexOf(">")>-1&&i.xml2json(He)||{}}catch{ut={}}var ct=ut&&ut.Error;pt?at(null,ut):ct?at(i.error(new Error(ct.Message),{code:ct.Code,error:ct})):lt?at(i.error(new Error(et.statusMessage),{code:""+lt})):lt&&at(i.error(new Error("statusCode error")))}}),it=function Ne(Pe){Pe.TaskId===f&&(Ze&&Ze.abort&&Ze.abort(),s.off("inner-kill-task",Ne))};f&&s.on("inner-kill-task",it)}}var Ye={getService:h,putBucket:x,headBucket:_,getBucket:T,deleteBucket:k,putBucketAcl:D,getBucketAcl:F,putBucketCors:j,getBucketCors:P,deleteBucketCors:N,getBucketLocation:J,getBucketPolicy:se,putBucketPolicy:Q,deleteBucketPolicy:B,putBucketTagging:C,getBucketTagging:S,deleteBucketTagging:V,putBucketLifecycle:y,getBucketLifecycle:K,deleteBucketLifecycle:L,putBucketVersioning:G,getBucketVersioning:re,putBucketReplication:O,getBucketReplication:q,deleteBucketReplication:X,putBucketWebsite:W,getBucketWebsite:Y,deleteBucketWebsite:ie,putBucketReferer:ue,getBucketReferer:le,putBucketDomain:te,getBucketDomain:de,deleteBucketDomain:ce,putBucketOrigin:Se,getBucketOrigin:$,deleteBucketOrigin:oe,putBucketLogging:pe,getBucketLogging:Ee,putBucketInventory:me,postBucketInventory:Ce,getBucketInventory:xe,listBucketInventory:ke,deleteBucketInventory:Ae,putBucketAccelerate:Ie,getBucketAccelerate:Oe,putBucketEncryption:ae,getBucketEncryption:A,deleteBucketEncryption:z,getObject:d,headObject:v,listObjectVersions:u,putObject:c,deleteObject:m,getObjectAcl:I,putObjectAcl:U,optionsObject:ee,putObjectCopy:ge,deleteMultipleObject:ne,restoreObject:Be,putObjectTagging:Te,getObjectTagging:Me,deleteObjectTagging:Fe,selectObjectContent:Ke,appendObject:ot,uploadPartCopy:ye,multipartInit:qe,multipartUpload:Ve,multipartComplete:Xe,multipartList:ze,multipartListPart:Ge,multipartAbort:We,request:st,getObjectUrl:l,getAuth:tt};function Je(n,p,s){i.each(["Cors","Acl"],function(f){if(n.slice(-f.length)===f){var b=n.slice(0,-f.length)+f.toUpperCase(),E=i.apiWrapper(n,p),w=!1;s[b]=function(){w=!0,E.apply(this,arguments)}}})}o.exports.init=function(n,p){p.transferToTaskMethod(Ye,"putObject"),i.each(Ye,function(s,f){n.prototype[f]=i.apiWrapper(f,s),Je(f,s,n.prototype)})}},"./src/cos.js":function(o,e,t){var r=t("./src/util.js"),a=t("./src/event.js"),i=t("./src/task.js"),h=t("./src/base.js"),x=t("./src/advance.js"),_=t("./package.json"),T={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,EnableTracker:!1,DeepTracker:!1,TrackerDelay:5e3,CustomId:""},k=function(F){this.options=r.extend(r.clone(T),F||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId,this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1,this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1,r.isNode(),a.init(this),i.init(this)};h.init(k,i),x.init(k,i),k.util={md5:r.md5,xml2json:r.xml2json,json2xml:r.json2xml},k.getAuthorization=r.getAuth,k.version=_.version,o.exports=k},"./src/event.js":function(o,e){var t=function(i){var h={},x=function(T){return!h[T]&&(h[T]=[]),h[T]};i.on=function(_,T){x(_).push(T)},i.off=function(_,T){for(var k=x(_),D=k.length-1;D>=0;D--)T===k[D]&&k.splice(D,1)},i.emit=function(_,T){for(var k=x(_).map(function(F){return F}),D=0;D<k.length;D++)k[D](T)}},r=function(){t(this)};o.exports.init=t,o.exports.EventProxy=r},"./src/session.js":function(o,e,t){var r=t("./src/util.js"),a="cos_sdk_upload_cache",i=30*24*3600,h,x,_=function(){try{var P=JSON.parse(localStorage.getItem(a))}catch{}P||(P=[]),h=P},T=function(){try{h.length?localStorage.setItem(a,JSON.stringify(h)):localStorage.removeItem(a)}catch{}},k=function(){if(!h){_.call(this);for(var P=!1,N=Math.round(Date.now()/1e3),J=h.length-1;J>=0;J--){var Q=h[J][2];(!Q||Q+i<N)&&(h.splice(J,1),P=!0)}P&&T()}},D=function(){x||(x=setTimeout(function(){T(),x=null},400))},F={using:{},setUsing:function(P){F.using[P]=!0},removeUsing:function(P){delete F.using[P]},getFileId:function(P,N,J,Q){return P.name&&P.size&&P.lastModifiedDate&&N?r.md5([P.name,P.size,P.lastModifiedDate,N,J,Q].join("::")):null},getCopyFileId:function(P,N,J,Q,se){var B=N["content-length"],C=N.etag||"",S=N["last-modified"];return P&&J?r.md5([P,B,C,S,J,Q,se].join("::")):null},getUploadIdList:function(P){if(!P)return null;k.call(this);for(var N=[],J=0;J<h.length;J++)h[J][0]===P&&N.push(h[J][1]);return N.length?N:null},saveUploadId:function(P,N,J){if(k.call(this),!!P){for(var Q=h.length-1;Q>=0;Q--){var se=h[Q];se[0]===P&&se[1]===N&&h.splice(Q,1)}h.unshift([P,N,Math.round(Date.now()/1e3)]),h.length>J&&h.splice(J),D()}},removeUploadId:function(P){k.call(this),delete F.using[P];for(var N=h.length-1;N>=0;N--)h[N][1]===P&&h.splice(N,1);D()}};o.exports=F},"./src/task.js":function(o,e,t){var r=t("./src/session.js"),a=t("./src/util.js"),i={},h=function(T,k){i[k]=T[k],T[k]=function(D,F){D.SkipTask?i[k].call(this,D,F):this._addTask(k,D,F)}},x=function(T){var k=[],D={},F=0,j=0,P=function(S){var V={id:S.id,Bucket:S.Bucket,Region:S.Region,Key:S.Key,FilePath:S.FilePath,state:S.state,loaded:S.loaded,size:S.size,speed:S.speed,percent:S.percent,hashPercent:S.hashPercent,error:S.error};return S.FilePath&&(V.FilePath=S.FilePath),S._custom&&(V._custom=S._custom),V},N=function(){var C,S=function(){C=0,T.emit("task-list-update",{list:a.map(k,P)}),T.emit("list-update",{list:a.map(k,P)})};return function(){C||(C=setTimeout(S))}}(),J=function(){if(!(k.length<=T.options.UploadQueueSize)){for(var S=0;S<j&&S<k.length&&k.length>T.options.UploadQueueSize;){var V=k[S].state==="waiting"||k[S].state==="checking"||k[S].state==="uploading";!k[S]||!V?(D[k[S].id]&&delete D[k[S].id],k.splice(S,1),j--):S++}N()}},Q=function C(){if(!(F>=T.options.FileParallelLimit)){for(;k[j]&&k[j].state!=="waiting";)j++;if(!(j>=k.length)){var S=k[j];j++,F++,S.state="checking",S.params.onTaskStart&&S.params.onTaskStart(P(S)),!S.params.UploadData&&(S.params.UploadData={});var V=a.formatParams(S.api,S.params);i[S.api].call(T,V,function(y,K){T._isRunningTask(S.id)&&((S.state==="checking"||S.state==="uploading")&&(S.state=y?"error":"success",y&&(S.error=y),F--,N(),C(),S.callback&&S.callback(y,K),S.state==="success"&&(S.params&&(delete S.params.UploadData,delete S.params.Body,delete S.params),delete S.callback)),J())}),N(),setTimeout(C)}}},se=function(S,V){var y=D[S];if(y){var K=y&&y.state==="waiting",L=y&&(y.state==="checking"||y.state==="uploading");if(V==="canceled"&&y.state!=="canceled"||V==="paused"&&K||V==="paused"&&L){if(V==="paused"&&y.params.Body&&typeof y.params.Body.pipe=="function")return;y.state=V,T.emit("inner-kill-task",{TaskId:S,toState:V});try{var G=y&&y.params&&y.params.UploadData.UploadId}catch{}V==="canceled"&&G&&r.removeUsing(G),N(),L&&(F--,Q()),V==="canceled"&&(y.params&&(delete y.params.UploadData,delete y.params.Body,delete y.params),delete y.callback)}J()}};T._addTasks=function(C){a.each(C,function(S){T._addTask(S.api,S.params,S.callback,!0)}),N()};var B=!0;T._addTask=function(C,S,V,y){S=a.formatParams(C,S);var K=a.uuid();S.TaskId=K,S.onTaskReady&&S.onTaskReady(K),S.TaskReady&&(S.TaskReady(K),B=!1);var L={params:S,callback:V,api:C,index:k.length,id:K,Bucket:S.Bucket,Region:S.Region,Key:S.Key,FilePath:S.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:S._custom},G=S.onHashProgress;S.onHashProgress=function(O){T._isRunningTask(L.id)&&(L.hashPercent=O.percent,G&&G(O),N())};var re=S.onProgress;return S.onProgress=function(O){T._isRunningTask(L.id)&&(L.state==="checking"&&(L.state="uploading"),L.loaded=O.loaded,L.speed=O.speed,L.percent=O.percent,re&&re(O),N())},a.getFileSize(C,S,function(O,q){if(O)return V(a.error(O));D[K]=L,k.push(L),L.size=q,!y&&N(),Q(),J()}),K},T._isRunningTask=function(C){var S=D[C];return!!(S&&(S.state==="checking"||S.state==="uploading"))},T.getTaskList=function(){return a.map(k,P)},T.cancelTask=function(C){se(C,"canceled")},T.pauseTask=function(C){se(C,"paused")},T.restartTask=function(C){var S=D[C];S&&(S.state==="paused"||S.state==="error")&&(S.state="waiting",N(),j=Math.min(j,S.index),Q())},T.isUploadRunning=function(){return F||j<k.length}};o.exports.transferToTaskMethod=h,o.exports.init=x},"./src/tracker.js":function(o,e,t){var r=t("./node_modules/@babel/runtime/helpers/classCallCheck.js"),a=t("./node_modules/@babel/runtime/helpers/createClass.js"),i=t("./node_modules/@babel/runtime/helpers/typeof.js"),h=t("./package.json"),x=null,_=function(C){if(!x){var S=t("./lib/beacon.min.js");x=new S({appkey:"0AND0VEVB24UBGDU",versionCode:h.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:C,sessionDuration:60*1e3})}return x},T={getUid:function(){var C=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return C()+C()+"-"+C()+"-"+C()+"-"+C()+"-"+C()+C()+C()},getNetType:function(){if((typeof navigator>"u"?"undefined":i(navigator))==="object"){var C=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(C==null?void 0:C.type)||(C==null?void 0:C.effectiveType)||"unknown"}return"unknown"},getOsType:function(){if((typeof navigator>"u"?"undefined":i(navigator))!=="object")return"unknown os";var C=navigator.userAgent.toLowerCase(),S=/macintosh|mac os x/i.test(navigator.userAgent);return C.indexOf("win32")>=0||C.indexOf("wow32")>=0?"win32":C.indexOf("win64")>=0||C.indexOf("wow64")>=0?"win64":S?"mac":"unknown os"},isMobile:function(){var C=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":i(navigator))==="object"&&navigator.userAgent.match(C))},isAndroid:function(){var C=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":i(navigator))==="object"&&navigator.userAgent.match(C))},isIOS:function(){var C=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":i(navigator))==="object"&&navigator.userAgent.match(C))},isOtherMobile:function(){return isMobile&&!isAndroid&&!isIOS},getDeviceName:function(){if((typeof navigator>"u"?"undefined":i(navigator))!=="object")return"unknown device";var C=navigator.userAgent.toLowerCase();if(C.includes("app/tencent_wemeet"))return"tencent_wemeet";if(C.indexOf("maxthon")>=0){var S=C.match(/maxthon\/([\d.]+)/),V=S&&S[1]||"";return"傲游浏览器 ".concat(V).trim()}if(C.indexOf("qqbrowser")>=0){var y=C.match(/qqbrowser\/([\d.]+)/),K=y&&y[1]||"";return"QQ浏览器 ".concat(K).trim()}if(C.indexOf("se 2.x")>=0)return"搜狗浏览器";if(C.indexOf("wxwork")>=0)return"微信内置浏览器";if(C.indexOf("msie")>=0){var L=C.match(/msie ([\d.]+)/),G=L&&L[1]||"";return"IE ".concat(G).trim()}if(C.indexOf("firefox")>=0){var re=C.match(/firefox\/([\d.]+)/),O=re&&re[1]||"";return"Firefox ".concat(O).trim()}if(C.indexOf("chrome")>=0){var q=C.match(/chrome\/([\d.]+)/),X=q&&q[1]||"";return"Chrome ".concat(X).trim()}if(C.indexOf("opera")>=0){var W=C.match(/opera.([\d.]+)/),Y=W&&W[1]||"";return"Opera ".concat(Y).trim()}if(C.indexOf("safari")>=0){var ie=C.match(/version\/([\d.]+)/),ue=ie&&ie[1]||"";return"Safari ".concat(ue).trim()}if(C.indexOf("edge")>=0){var le=C.match(/edge\/([\d.]+)/),te=le&&le[1]||"";return"edge ".concat(te).trim()}return C.substr(0,200)}},k={isMobile:T.isMobile(),isBrowser:!T.isMobile(),mobileOsType:T.isAndroid()?"android":T.isIOS?"ios":"other_mobile",pcOsType:T.getOsType()},D={deviceType:k.isMobile?"mobile":k.isBrowser?"browser":"unknown",devicePlatform:k.isMobile?k.mobileOsType:k.pcOsType,deviceName:T.getDeviceName()},F=["multipartInit","multipartUpload","multipartComplete","multipartList","multipartListPart","multipartAbort"],j=["putObject","postObject","appendObject","sliceUploadFile","uploadFile","uploadFiles"].concat(F),P=["getObject"];function N(B){return j.includes(B)?"cos_upload":P.includes(B)?"cos_download":"base_service"}function J(B){return B.replace(/([A-Z])/g,"_$1").toLowerCase()}function Q(B){var C={},S=["tracePlatform","cossdkVersion","region","networkType","host","accelerate","requestPath","size","httpMd5","httpSign","httpFull","name","result","tookTime","errorNode","errorCode","errorMessage","errorRequestId","errorStatusCode","errorServiceName","errorType","traceId","bucket","appid","partNumber","retryTimes","reqUrl","customId","fullError","deviceType","devicePlatform","deviceName"],V=["tracePlatform","cossdkVersion","region","bucket","appid","networkType","host","accelerate","requestPath","partNumber","size","name","result","tookTime","errorRequestId","retryTimes","reqUrl","customId","deviceType","devicePlatform","deviceName"],y=B.result==="Success"?V:S;for(var K in B)if(y.includes(K)){var L=J(K);C[L]=B[K]}return C}var se=function(){function B(C){r(this,B);var S=C.parent,V=C.traceId,y=C.bucket,K=C.region,L=C.apiName,G=C.fileKey,re=C.fileSize,O=C.accelerate,q=C.customId,X=C.delay,W=C.deepTracker,Y=y&&y.substr(y.lastIndexOf("-")+1)||"";this.parent=S,this.deepTracker=W,this.delay=X,this.params={cossdkVersion:h.version,region:K,networkType:"",host:"",accelerate:O?"Y":"N",requestPath:G||"",size:re||-1,httpMd5:0,httpSign:0,httpFull:0,name:L||"",result:"",tookTime:0,errorNode:"",errorCode:"",errorMessage:"",errorRequestId:"",errorStatusCode:0,errorServiceName:"",tracePlatform:"cos-js-sdk-v5",traceId:V||T.getUid(),bucket:y,appid:Y,partNumber:0,retryTimes:0,reqUrl:"",customId:q||"",deviceType:D.deviceType,devicePlatform:D.devicePlatform,deviceName:D.deviceName,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0},this.beacon=_(X)}return a(B,[{key:"formatResult",value:function(S,V){var y,K,L,G,re,O,q=new Date().getTime(),X=q-this.params.startTime,W=T.getNetType(),Y=S?(S==null?void 0:S.code)||(S==null||(y=S.error)===null||y===void 0?void 0:y.code)||(S==null||(K=S.error)===null||K===void 0?void 0:K.Code):"",ie=S?(S==null?void 0:S.message)||(S==null||(L=S.error)===null||L===void 0?void 0:L.message)||(S==null||(G=S.error)===null||G===void 0?void 0:G.Message):"",ue=S?(S==null?void 0:S.resource)||(S==null||(re=S.error)===null||re===void 0?void 0:re.resource)||(S==null||(O=S.error)===null||O===void 0?void 0:O.Resource):"",le=S?S==null?void 0:S.statusCode:V.statusCode,te=S?(S==null?void 0:S.headers)&&(S==null?void 0:S.headers["x-cos-request-id"]):(V==null?void 0:V.headers)&&(V==null?void 0:V.headers["x-cos-request-id"]),de=S?te?"Server":"Client":"";if(Object.assign(this.params,{tookTime:X,networkType:W,httpMd5:this.params.md5EndTime-this.params.md5StartTime,httpSign:this.params.signEndTime-this.params.signStartTime,httpFull:this.params.httpEndTime-this.params.httpStartTime,result:S?"Fail":"Success",errorType:de,errorCode:Y,errorStatusCode:le,errorMessage:ie,errorServiceName:ue,errorRequestId:te}),S&&(!Y||!ie)&&(this.params.fullError=S?JSON.stringify(S):""),this.params.name==="getObject"&&(this.params.size=V?V.headers&&V.headers["content-length"]:-1),this.params.reqUrl)try{var ce=/^http(s)?:\/\/(.*?)\//.exec(this.params.reqUrl);this.params.host=ce[2]}catch{this.params.host=this.params.reqUrl}this.sendEvents()}},{key:"setParams",value:function(S){Object.assign(this.params,S)}},{key:"sendEvents",value:function(){if(!(F.includes(this.params.name)&&!this.deepTracker)){var S=N(this.params.name),V=Q(this.params);this.beacon||(this.beacon=_(this.delay||5e3)),this.delay===0?this.beacon&&this.beacon.onDirectUserAction(S,V):this.beacon&&this.beacon.onUserAction(S,V)}}},{key:"generateSubTracker",value:function(S){return Object.assign(S,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay}),new B(S)}}]),B}();o.exports=se},"./src/util.js":function(o,e,t){(function(r){var a=t("./node_modules/@babel/runtime/helpers/typeof.js"),i=t("./lib/md5.js"),h=t("./lib/crypto.js"),x=t("./lib/xml2json.js"),_=t("./lib/json2xml.js"),T=t("./src/tracker.js");function k(ae){return encodeURIComponent(ae).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function D(ae,A){var z=[];for(var v in ae)ae.hasOwnProperty(v)&&z.push(A?k(v).toLowerCase():v);return z.sort(function(u,d){return u=u.toLowerCase(),d=d.toLowerCase(),u===d?0:u>d?1:-1})}var F=function(A,z){var v,u,d,c=[],m=D(A);for(v=0;v<m.length;v++)u=m[v],d=A[u]===void 0||A[u]===null?"":""+A[u],u=z?k(u).toLowerCase():k(u),d=k(d)||"",c.push(u+"="+d);return c.join("&")},j=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding"],P=function(A){var z={};for(var v in A){var u=v.toLowerCase();(u.indexOf("x-cos-")>-1||j.indexOf(u)>-1)&&(z[v]=A[v])}return z},N=function(A){A=A||{};var z=A.SecretId,v=A.SecretKey,u=A.KeyTime,d=(A.method||A.Method||"get").toLowerCase(),c=O(A.Query||A.params||{}),m=P(O(A.Headers||A.headers||{})),I=A.Key||"",U;A.UseRawKey?U=A.Pathname||A.pathname||"/"+I:(U=A.Pathname||A.pathname||I,U.indexOf("/")!==0&&(U="/"+U));var ee=A.ForceSignHost!==!1;if(!m.Host&&!m.host&&A.Bucket&&A.Region&&ee&&(m.Host=A.Bucket+".cos."+A.Region+".myqcloud.com"),!z)throw new Error("missing param SecretId");if(!v)throw new Error("missing param SecretKey");var ge=Math.round(ve(A.SystemClockOffset)/1e3)-1,ye=ge,ne=A.Expires||A.expires;ne===void 0?ye+=900:ye+=ne*1||0;var Be="sha1",Te=z,Me=u||ge+";"+ye,Fe=u||ge+";"+ye,Ke=D(m,!0).join(";").toLowerCase(),qe=D(c,!0).join(";").toLowerCase(),Ve=h.HmacSHA1(Fe,v).toString(),Xe=[d,U,Oe.obj2str(c,!0),Oe.obj2str(m,!0),""].join(`
`),ze=["sha1",Me,h.SHA1(Xe).toString(),""].join(`
`),Ge=h.HmacSHA1(ze,Ve).toString(),We=["q-sign-algorithm="+Be,"q-ak="+Te,"q-sign-time="+Me,"q-key-time="+Fe,"q-header-list="+Ke,"q-url-param-list="+qe,"q-signature="+Ge].join("&");return We},J=function(A,z,v){var u=z/8,d=A.slice(v,v+u);return new Uint8Array(d).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[z](d)[0]},Q=function(A,z,v,u){var d=A.slice(z,v),c="";return new Uint8Array(d).forEach(function(m){c+=String.fromCharCode(m)}),u&&(c=decodeURIComponent(escape(c))),c},se=function(A){for(var z={},v=Q(A),u={records:[]};A.byteLength;){var d=J(A,32,0),c=J(A,32,4),m=d-c-16,I=0,U;for(A=A.slice(12);I<c;){var ee=J(A,8,I),ge=Q(A,I+1,I+1+ee),ye=J(A,16,I+ee+2),ne=Q(A,I+ee+4,I+ee+4+ye);z[ge]=ne,I+=ee+4+ye}if(z[":event-type"]==="Records")U=Q(A,I,I+m,!0),u.records.push(U);else if(z[":event-type"]==="Stats")U=Q(A,I,I+m,!0),u.stats=Oe.xml2json(U).Stats;else if(z[":event-type"]==="error"){var Be=z[":error-code"],Te=z[":error-message"],Me=new Error(Te);Me.message=Te,Me.name=Me.code=Be,u.error=Me}A=A.slice(I+m+4)}return{payload:u.records.join(""),body:v}},B=function(A){var z=this.options.CopySourceParser;if(z)return z(A);var v=A.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return v?{Bucket:v[1],Region:v[3],Key:v[7]}:null},C=function(){},S=function(A){var z={};for(var v in A)A.hasOwnProperty(v)&&A[v]!==void 0&&A[v]!==null&&(z[v]=A[v]);return z},V=function(A,z){var v,u=new FileReader;FileReader.prototype.readAsBinaryString?(v=FileReader.prototype.readAsBinaryString,u.onload=function(){z(this.result)}):FileReader.prototype.readAsArrayBuffer&&(v=function(c){var m="",I=new FileReader;I.onload=function(U){for(var ee=new Uint8Array(I.result),ge=ee.byteLength,ye=0;ye<ge;ye++)m+=String.fromCharCode(ee[ye]);z(m)},I.readAsArrayBuffer(c)}),v.call(u,A)},y=function(){var ae=function(v,u){v=v.split("."),u=u.split(".");for(var d=0;d<u.length;d++)if(v[d]!==u[d])return parseInt(v[d])>parseInt(u[d])?1:-1;return 0},A=function(v){if(!v)return!1;var u=(v.match(/Chrome\/([.\d]+)/)||[])[1],d=(v.match(/QBCore\/([.\d]+)/)||[])[1],c=(v.match(/QQBrowser\/([.\d]+)/)||[])[1],m=u&&ae(u,"53.0.2785.116")<0&&d&&ae(d,"3.53.991.400")<0&&c&&ae(c,"9.0.2524.400")<=0||!1;return m};return A(typeof navigator<"u"&&navigator.userAgent)}(),K=function(A,z,v,u,d){var c;if(A.slice?c=A.slice(z,v):A.mozSlice?c=A.mozSlice(z,v):A.webkitSlice&&(c=A.webkitSlice(z,v)),u&&y){var m=new FileReader;m.onload=function(I){c=null,d(new Blob([m.result]))},m.readAsArrayBuffer(c)}else d(c)},L=function(A,z,v,u){v=v||C,A?typeof z=="string"?v(Oe.md5(z,!0)):Blob&&z instanceof Blob?Oe.getFileMd5(z,function(d,c){v(c)},u):v():v()},G=1024*1024,re=function(A,z,v){var u=A.size,d=0,c=i.getCtx(),m=function I(U){if(U>=u){var ee=c.digest("hex");z(null,ee);return}var ge=Math.min(u,U+G);Oe.fileSlice(A,U,ge,!1,function(ye){V(ye,function(ne){ye=null,c=c.update(ne,!0),d+=ne.length,ne=null,v&&v({loaded:d,total:u,percent:Math.round(d/u*1e4)/1e4}),I(U+G)})})};m(0)};function O(ae){return le(ae,function(A){return a(A)==="object"&&A!==null?O(A):A})}function q(ae,A,z){return ae&&A in ae?ae[A]:z}function X(ae,A){return ue(A,function(z,v){ae[v]=A[v]}),ae}function W(ae){return ae instanceof Array}function Y(ae,A){for(var z=!1,v=0;v<ae.length;v++)if(A===ae[v]){z=!0;break}return z}function ie(ae){return W(ae)?ae:[ae]}function ue(ae,A){for(var z in ae)ae.hasOwnProperty(z)&&A(ae[z],z)}function le(ae,A){var z=W(ae)?[]:{};for(var v in ae)ae.hasOwnProperty(v)&&(z[v]=A(ae[v],v));return z}function te(ae,A){var z=W(ae),v=z?[]:{};for(var u in ae)ae.hasOwnProperty(u)&&A(ae[u],u)&&(z?v.push(ae[u]):v[u]=ae[u]);return v}var de=function(A){var z,v,u,d="";for(z=0,v=A.length/2;z<v;z++)u=parseInt(A[z*2]+A[z*2+1],16),d+=String.fromCharCode(u);return btoa(d)},ce=function(){var A=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return A()+A()+"-"+A()+"-"+A()+"-"+A()+"-"+A()+A()+A()},Se=function(A,z){var v=z.Bucket,u=z.Region,d=z.Key,c=this.options.Domain,m=!c||typeof c=="string"&&c.indexOf("{Bucket}")>-1,I=!c||typeof c=="string"&&c.indexOf("{Region}")>-1;if(A.indexOf("Bucket")>-1||A==="deleteMultipleObject"||A==="multipartList"||A==="listObjectVersions"){if(m&&!v)return"Bucket";if(I&&!u)return"Region"}else if(A.indexOf("Object")>-1||A.indexOf("multipart")>-1||A==="sliceUploadFile"||A==="abortUploadTask"){if(m&&!v)return"Bucket";if(I&&!u)return"Region";if(!d)return"Key"}return!1},$=function(A,z){if(z=X({},z),A!=="getAuth"&&A!=="getV4Auth"&&A!=="getObjectUrl"){var v=z.Headers||{};if(z&&a(z)==="object"){(function(){for(var d in z)z.hasOwnProperty(d)&&d.indexOf("x-cos-")>-1&&(v[d]=z[d])})();var u={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations"};Oe.each(u,function(d,c){z[d]!==void 0&&(v[c]=z[d])}),z.Headers=S(v)}}return z},oe=function(A,z){return function(v,u){var d=this;typeof v=="function"&&(u=v,v={}),v=$(A,v);var c;if(d.options.EnableTracker)if(v.calledBySdk==="sliceUploadFile")c=v.tracker&&v.tracker.generateSubTracker({apiName:A});else if(["uploadFile","uploadFiles"].includes(A))c=null;else{var m=-1;v.Body&&(m=typeof v.Body=="string"?v.Body.length:v.Body.size||v.Body.byteLength||-1),c=new T({bucket:v.Bucket,region:v.Region,apiName:A,fileKey:v.Key,fileSize:m,deepTracker:d.options.DeepTracker,customId:d.options.CustomId,delay:d.options.TrackerDelay})}v.tracker=c;var I=function(Te){return Te&&Te.headers&&(Te.headers["x-cos-request-id"]&&(Te.RequestId=Te.headers["x-cos-request-id"]),Te.headers["x-ci-request-id"]&&(Te.RequestId=Te.headers["x-ci-request-id"]),Te.headers["x-cos-version-id"]&&(Te.VersionId=Te.headers["x-cos-version-id"]),Te.headers["x-cos-delete-marker"]&&(Te.DeleteMarker=Te.headers["x-cos-delete-marker"])),Te},U=function(Te,Me){c&&c.formatResult(Te,Me),u&&u(I(Te),I(Me))},ee=function(){if(A!=="getService"&&A!=="abortUploadTask"){var Te=Se.call(d,A,v);if(Te)return"missing param "+Te;if(v.Region){if(d.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(v.Region))return"Region format error."}else{if(v.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(v.Region))return"Region format error."}!d.options.CompatibilityMode&&v.Region.indexOf("-")===-1&&v.Region!=="yfb"&&v.Region!=="default"&&v.Region}if(v.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(v.Bucket))if(v.AppId)v.Bucket=v.Bucket+"-"+v.AppId;else if(d.options.AppId)v.Bucket=v.Bucket+"-"+d.options.AppId;else return'Bucket should format as "test-1250000000".';v.AppId&&delete v.AppId}!d.options.UseRawKey&&v.Key&&v.Key.substr(0,1)==="/"&&(v.Key=v.Key.substr(1))}},ge=ee(),ye=["getAuth","getObjectUrl"].includes(A);if(typeof Promise=="function"&&!ye&&!u)return new Promise(function(Be,Te){if(u=function(Fe,Ke){Fe?Te(Fe):Be(Ke)},ge)return U(Oe.error(new Error(ge)));z.call(d,v,U)});if(ge)return U(Oe.error(new Error(ge)));var ne=z.call(d,v,U);if(ye)return ne}},pe=function(A,z){var v=this,u=0,d=0,c=Date.now(),m,I;function U(){if(I=0,z&&typeof z=="function"){m=Date.now();var ee=Math.max(0,Math.round((d-u)/((m-c)/1e3)*100)/100)||0,ge;d===0&&A===0?ge=1:ge=Math.floor(d/A*100)/100||0,c=m,u=d;try{z({loaded:d,total:A,speed:ee,percent:ge})}catch{}}}return function(ee,ge){if(ee&&(d=ee.loaded,A=ee.total),ge)clearTimeout(I),U();else{if(I)return;I=setTimeout(U,v.options.ProgressInterval)}}},Ee=function(A,z,v){var u;if(typeof z.Body=="string"?z.Body=new Blob([z.Body],{type:"text/plain"}):z.Body instanceof ArrayBuffer&&(z.Body=new Blob([z.Body])),z.Body&&(z.Body instanceof Blob||z.Body.toString()==="[object File]"||z.Body.toString()==="[object Blob]"))u=z.Body.size;else{v(Oe.error(new Error("params body format error, Only allow File|Blob|String.")));return}z.ContentLength=u,v(null,u)},ve=function(A){return Date.now()+(A||0)},me=function(A,z){var v=A;return A.message=A.message||null,typeof z=="string"?(A.error=z,A.message=z):a(z)==="object"&&z!==null&&(X(A,z),(z.code||z.name)&&(A.code=z.code||z.name),z.message&&(A.message=z.message),z.stack&&(A.stack=z.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(A,"name",{writable:!0,enumerable:!1}),Object.defineProperty(A,"message",{enumerable:!0})),A.name=z&&z.name||A.name||A.code||"Error",A.code||(A.code=A.name),A.error||(A.error=O(v)),A},Ce=function(){return(typeof globalThis>"u"?"undefined":a(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},xe=function(){return(typeof window>"u"?"undefined":a(window))!=="object"&&(typeof r>"u"?"undefined":a(r))==="object"&&!0&&!Ce()},ke=function(A){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(A)},Ae=function(){if((typeof navigator>"u"?"undefined":a(navigator))!=="object")return!1;var ae=navigator.userAgent,A=!!ae.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return A}(),Ie=function(){return(typeof navigator>"u"?"undefined":a(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),Oe={noop:C,formatParams:$,apiWrapper:oe,xml2json:x,json2xml:_,md5:i,clearKey:S,fileSlice:K,getBodyMd5:L,getFileMd5:re,b64:de,extend:X,isArray:W,isInArray:Y,makeArray:ie,each:ue,map:le,filter:te,clone:O,attr:q,uuid:ce,camSafeUrlEncode:k,throttleOnProgress:pe,getFileSize:Ee,getSkewTime:ve,error:me,obj2str:F,getAuth:N,parseSelectPayload:se,getSourceParams:B,isBrowser:!0,isNode:xe,isCIHost:ke,isIOS_QQ:Ae&&Ie};o.exports=Oe}).call(this,t("./node_modules/process/browser.js"))}})})})(cosJsSdkV5);var cosJsSdkV5Exports=cosJsSdkV5.exports;const COS=getDefaultExportFromCjs(cosJsSdkV5Exports);defineStore("cos",{state:()=>({cosKeys:{},cos:{},expires:""}),getters:{COS_KEYS(o){return o.cosKeys},COS(o){return o.cos}},actions:{setCosKeys(o){const e={Bucket:o.bucket,Region:o.region};this.cosKeys=e,sessionStorage.setItem("cosKeys",JSON.stringify(e))},createCOS(o){const e=new COS({getAuthorization(t,r){r({TmpSecretId:o.tmpSecretId,TmpSecretKey:o.tmpSecretKey,XCosSecurityToken:o.sessionToken,ExpiredTime:o.expiredTime,StartTime:o.StartTime})}});this.cos=e,sessionStorage.setItem("cos",JSON.stringify(e))},setExpires(o){const e=o.expiredTime-o.startTime-600,t=new Date().getTime()/1e3,r=parseInt(t);this.expires=r+e},async getTmpKeys(){const o=new Date().getTime()/1e3;if(parseInt(o)>this.expires){const t=await getQcloudTmpkeys();if(!t||t.code!==0)return;const r=t.data;this.setExpires(r),this.setCosKeys(r),this.createCOS(r)}}}});export{Sortable as S};
